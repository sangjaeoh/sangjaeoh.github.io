---
layout: single
title: "kubectl ê¸°ë³¸ ëª…ë ¹ì–´"
categories: [Kubernetes]
tag: [Kubernetes, k8s, kubectl]
author_profile: true
toc: true
toc_sticky: true
---

ğŸ’¾ kubectl ê¸°ë³¸ëª…ë ¹ì–´ë¥¼ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.

<br/>

## apply
ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœë¥¼ YAMLë¡œ ì‘ì„±í•˜ê³  apply ëª…ë ì–´ë¡œ ì„ ì–¸í•©ë‹ˆë‹¤.
```bash
kubectl apply -f [íŒŒì¼ëª… ë˜ëŠ” URL]
```
```bash
kubectl apply -f ./my-manifest.yaml        # ë¦¬ì†ŒìŠ¤(ë“¤) ìƒì„±
kubectl apply -f ./my1.yaml -f ./my2.yaml  # ì—¬ëŸ¬ íŒŒì¼ë¡œ ë¶€í„° ìƒì„±
kubectl apply -f ./dir                     # dir ë‚´ ëª¨ë“  ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì—ì„œ ë¦¬ì†ŒìŠ¤(ë“¤) ìƒì„± 
kubectl apply -f https://git.io/vPieo      # urlë¡œë¶€í„° ë¦¬ì†ŒìŠ¤(ë“¤) ìƒì„±
```
<br/>
<br/>



## get
ë¦¬ì†ŒìŠ¤ ëª©ë¡ ë³´ê¸°. ì¶œë ¥ í˜•íƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ”Â `-o`ì™€ ë ˆì´ë¸”ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”Â `--show-labels`ë¥¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
kubectl get [TYPE]
```
```bash
# ê¸°ë³¸ ì¶œë ¥ì„ ìœ„í•œ Get ì»¤ë§¨ë“œ
kubectl get services                      # ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  ì„œë¹„ìŠ¤ì˜ ëª©ë¡ ì¡°íšŒ
kubectl get pods --all-namespaces         # ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  íŒŒë“œì˜ ëª©ë¡ ì¡°íšŒ
kubectl get pods -o wide                  # í•´ë‹¹í•˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  íŒŒë“œì˜ ìƒì„¸ ëª©ë¡ ì¡°íšŒ
kubectl get deployment my-dep             # íŠ¹ì • ë””í”Œë¡œì´ë¨¼íŠ¸ì˜ ëª©ë¡ ì¡°íšŒ
kubectl get pods                          # ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  íŒŒë“œì˜ ëª©ë¡ ì¡°íšŒ
kubectl get pod my-pod -o yaml            # íŒŒë“œì˜ YAML ì¡°íšŒ
```
<br/>
<br/>


## describe
ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì„ ì–¸ëœ ë¦¬ì†ŒìŠ¤ì˜ ìƒì„¸í•œ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤. íŠ¹ì • ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœê°€ ê¶ê¸ˆí•˜ê±°ë‚˜ ìƒì„±ì´ ì‹¤íŒ¨í•œ ì´ìœ ë¥¼ í™•ì¸í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
```bash
kubectl describe [TYPE]/[NAME] ë˜ëŠ” [TYPE] [NAME]
```
```bash
kubectl get pod                                 # Pod ì¡°íšŒë¡œ ì´ë¦„ ê²€ìƒ‰
kubectl describe pod/wordpress-5f59577d4d-8t2dg # ì¡°íšŒí•œ ì´ë¦„ìœ¼ë¡œ ìƒì„¸ í™•ì¸
```
<br/>
<br/>


## delete
ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì„ ì–¸ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê±°í•©ë‹ˆë‹¤.
```bash
kubectl delete [TYPE]/[NAME] ë˜ëŠ” [TYPE] [NAME]
```
```bash
kubectl get pod                                # Pod ì¡°íšŒë¡œ ì´ë¦„ ê²€ìƒ‰
kubectl delete pod/wordpress-5f59577d4d-8t2dg  # ì¡°íšŒí•œ Pod ì œê±°
kubectl delete deploy deploymentname -n namespacename
```
<br/>
<br/>


## logs
ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. ì‹¤ì‹œê°„ ë¡œê·¸ë¥¼ ë³´ê³  ì‹¶ë‹¤ë©´ `-f`Â ì˜µì…˜ì„ ì´ìš©í•©ë‹ˆë‹¤. í•˜ë‚˜ì˜ Podì— ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆê°€ ìˆëŠ” ê²½ìš°ëŠ”Â `-c`Â ì˜µì…˜ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.
```bash
kubectl logs [POD_NAME]
```
```bash
kubectl get pod                              # Pod ì¡°íšŒë¡œ ì´ë¦„ ê²€ìƒ‰
kubectl logs wordpress-5f59577d4d-8t2dg      # ì¡°íšŒí•œ Pod ë¡œê·¸ì¡°íšŒ
kubectl logs -f wordpress-5f59577d4d-8t2dg   # ì‹¤ì‹œê°„ ë¡œê·¸ ë³´ê¸°
kubectl logs my-pod -c my-container          # ë©€í‹°-ì»¨í…Œì´ë„ˆ ê²½ìš°
```
<br/>
<br/>



## exec
ì»¨í…Œì´ë„ˆì— ëª…ë ¹ì–´ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. ì‰˜ë¡œ ì ‘ì†í•˜ì—¬ ì»¨í…Œì´ë„ˆ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ê²½ìš°ì—Â `-it`Â ì˜µì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆê°€ ìˆëŠ” ê²½ìš°ì—”Â `-c`Â ì˜µì…˜ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
```bash
kubectl exec [-it] [POD_NAME] -- [COMMAND]
```
```bash
kubectl get pod                                        # Pod ì¡°íšŒë¡œ ì´ë¦„ ê²€ìƒ‰
kubectl exec -it wordpress-5f59577d4d-8t2dg -- bash    # ì¡°íšŒí•œ Podì˜ ì»¨í…Œì´ë„ˆì— ì ‘ì†
kubectl exec my-pod -c my-container -- ls /            # ë©€í‹°-ì»¨í…Œì´ë„ˆ ê²½ìš°
```
<br/>
<br/>



## config
`kubectl`ì´ í†µì‹ í•˜ê³  ì„¤ì • ì •ë³´ë¥¼ ìˆ˜ì •í•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
```bash
kubectl config get-contexts             # ì»¨í…ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ ì¶œë ¥
kubectl config current-context          # í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ í™•ì¸
kubectl config use-context minikube     # ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ë¡œ ì„¤ì •
```
<br/>
<br/>


## api-resources
API ë¦¬ì†ŒìŠ¤ë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.
```bash
kubectl api-resources                        # ì „ì²´ ì˜¤ë¸Œì íŠ¸ ì¢…ë¥˜ í™•ì¸
kubectl api-resources --namespaced=true      # ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê°€ì§€ëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤
kubectl api-resources --namespaced=false     # ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤
kubectl api-resources -o name                # ëª¨ë“  ë¦¬ì†ŒìŠ¤ì˜ ë‹¨ìˆœí•œ (ë¦¬ì†ŒìŠ¤ ì´ë¦„ë§Œ) ì¶œë ¥
kubectl api-resources -o wide                # ëª¨ë“  ë¦¬ì†ŒìŠ¤ì˜ í™•ì¥ëœ ("wide"ë¡œ ì•Œë ¤ì§„) ì¶œë ¥
kubectl api-resources --verbs=list,get       # "list"ì™€ "get"ì˜ ìš”ì²­ ë™ì‚¬ë¥¼ ì§€ì›í•˜ëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì¶œë ¥
kubectl api-resources --api-group=extensions # "extensions" API ê·¸ë£¹ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤
```
<br/>
<br/>


## explain
íŠ¹ì • ì˜¤ë¸Œì íŠ¸ ì„¤ëª…ì„ í™•ì¸í•©ë‹ˆë‹¤.
```bash
kubectl explain pods           # íŒŒë“œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë¬¸ì„œë¥¼ ì¡°íšŒ
```
<br/>
<br/>


## cp
ë¡œì»¬ì—ì„œ ì»¨í…Œì´ë„ˆë¡œ, ì»¨í…Œì´ë„ˆì—ì„œ ë¡œì»¬ë¡œ íŒŒì¼ê³¼ ë””ë ‰í„°ë¦¬ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤.
```bash
kubectl cp /tmp/foo_dir my-pod:/tmp/bar_dir            # ë¡œì»¬ ë””ë ‰í† ë¦¬ /tmp/foo_dir ë¥¼ í˜„ì¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ my-pod íŒŒë“œ ì•ˆì˜ /tmp/bar_dir ë¡œ ë³µì‚¬
kubectl cp /tmp/foo my-pod:/tmp/bar -c my-container    # ë¡œì»¬ íŒŒì¼ /tmp/foo ë¥¼ my-pod íŒŒë“œì˜ my-container ì»¨í…Œì´ë„ˆ ì•ˆì˜ /tmp/bar ë¡œ ë³µì‚¬
kubectl cp /tmp/foo my-namespace/my-pod:/tmp/bar       # ë¡œì»¬ íŒŒì¼ /tmp/foo ë¥¼ my-namespace ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ my-pod íŒŒë“œ ì•ˆì˜ /tmp/bar ë¡œ ë³µì‚¬
kubectl cp my-namespace/my-pod:/tmp/foo /tmp/bar       # my-namespace ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ my-pod íŒŒë“œ ì•ˆì˜ íŒŒì¼ /tmp/foo ë¥¼ ë¡œì»¬ì˜ /tmp/bar ë¡œ ë³µì‚¬
```
<br/>
<br/>



## ì¶œë ¥ í˜•ì‹ ì§€ì •
íŠ¹ì • í˜•ì‹ìœ¼ë¡œ í„°ë¯¸ë„ ì°½ì— ì„¸ë¶€ì‚¬í•­ì„ ì¶œë ¥í•˜ë ¤ë©´, `kubectl`Â ëª…ë ¹ì—Â `-o`Â (ë˜ëŠ”Â `--output`) í”Œë˜ê·¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

| ì¶œë ¥ í˜•ì‹ | ì„¸ë¶€ ì‚¬í•­ |
| --- | --- |
| -o=custom-columns=<ëª…ì„¸> | ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ì‚¬ìš©ì ì •ì˜ ì—´ ëª©ë¡ì„ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸” ì¶œë ¥ |
| -o=custom-columns-file=<íŒŒì¼ëª…> | <íŒŒì¼ëª…>íŒŒì¼ì—ì„œ ì‚¬ìš©ì ì •ì˜ ì—´ í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸” ì¶œë ¥ |
| -o=json | JSON í˜•ì‹ì˜ API ì˜¤ë¸Œì íŠ¸ ì¶œë ¥ |
| -o=jsonpath=<í…œí”Œë¦¿> | https://kubernetes.io/ko/docs/reference/kubectl/jsonpathÂ í‘œí˜„ì‹ì— ì •ì˜ëœ í•„ë“œ ì¶œë ¥ |
| -o=jsonpath-file=<íŒŒì¼ëª…> | <íŒŒì¼ëª…> íŒŒì¼ì—ì„œÂ https://kubernetes.io/ko/docs/reference/kubectl/jsonpathÂ í‘œí˜„ì‹ì— ì •ì˜ëœ í•„ë“œ ì¶œë ¥ |
| -o=name | ë¦¬ì†ŒìŠ¤ ëª…ë§Œ ì¶œë ¥í•˜ê³  ê·¸ ì™¸ì—ëŠ” ì¶œë ¥í•˜ì§€ ì•ŠìŒ |
| -o=wide | ì¶”ê°€ ì •ë³´ê°€ í¬í•¨ëœ ì¼ë°˜-í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥í•˜ê³ , íŒŒë“œì˜ ê²½ìš° ë…¸ë“œ ëª…ì´ í¬í•¨ |
| -o=yaml | YAML í˜•ì‹ì˜ API ì˜¤ë¸Œì íŠ¸ ì¶œë ¥ |

{% capture notice %}
**ì‚¬ìš©ë°©ë²•**  
```text
$ kubectl get [(-o|--output=)json|yaml|name|go-template|go-template-file
|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file|custom-columns
|custom-columns-file|wide] (TYPE[.VERSION][.GROUP] [NAME | -l label] | TYPE[.VERSION][.GROUP]/NAME ...) [flags]
```
{% endcapture %}
<div class="notice--info">{{ notice | markdownify }}</div>

```bash
# í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ëª¨ë“  ì´ë¯¸ì§€
kubectl get pods -A -o=custom-columns='DATA:spec.containers[*].image'

# `default` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ íŒŒë“œë³„ë¡œ ê·¸ë£¹ì§€ì–´ ì¶œë ¥
kubectl get pods --namespace default --output=custom-columns="NAME:.metadata.name,IMAGE:.spec.containers[*].image"

 # "registry.k8s.io/coredns:1.6.2" ë¥¼ ì œì™¸í•œ ëª¨ë“  ì´ë¯¸ì§€
kubectl get pods -A -o=custom-columns='DATA:spec.containers[?(@.image!="registry.k8s.io/coredns:1.6.2")].image'

# ì´ë¦„ì— ê´€ê³„ì—†ì´ ë©”íƒ€ë°ì´í„° ì•„ë˜ì˜ ëª¨ë“  í•„ë“œ
kubectl get pods -A -o=custom-columns='DATA:metadata.*'
```
{% capture notice %}
**ë„ì»¤ ì‚¬ìš©ìë¥¼ ìœ„í•œ kubectl**  
ë§Œì•½ ë„ì»¤ ì»¤ë§¨ë“œ ë¼ì¸ ë„êµ¬ì— ìµìˆ™í•˜ë‹¤ë©´ [ë§í¬](https://kubernetes.io/ko/docs/reference/kubectl/docker-cli-to-kubectl/){:target="_blank"}ë¥¼ í†µí•´ ê°„ë‹¨íˆ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
{% endcapture %}
<div class="notice--info">{{ notice | markdownify }}</div>
<br/>
<br/>
<br/>


## ì°¸ê³ ì‚¬ì´íŠ¸
- [kubectl docs 1](https://kubernetes.io/ko/docs/reference/kubectl/){:target="_blank"}
- [kubectl docs 2](https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands){:target="_blank"}
- [kubectl cheatsheet](https://kubernetes.io/ko/docs/reference/kubectl/cheatsheet/){:target="_blank"}