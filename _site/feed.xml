<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-03-30T23:05:41+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Stack O Flow</title><subtitle>ì¡°ê¸ˆì”© ì•Œì•„ê°€ëŠ” ê²ƒì„ ì ëŠ” ê°œë°œ ë…¸íŠ¸ì…ë‹ˆë‹¤.</subtitle><author><name>Oh</name></author><entry><title type="html">kubernetes ê¸°ë³¸ì‚¬ìš©ë²•</title><link href="http://localhost:4000/kubernetes/kubernetes-%EA%B8%B0%EB%B3%B8%EC%82%AC%EC%9A%A9%EB%B2%95/" rel="alternate" type="text/html" title="kubernetes ê¸°ë³¸ì‚¬ìš©ë²•" /><published>2023-03-27T00:00:00+09:00</published><updated>2023-03-27T00:00:00+09:00</updated><id>http://localhost:4000/kubernetes/kubernetes-%EA%B8%B0%EB%B3%B8%EC%82%AC%EC%9A%A9%EB%B2%95</id><content type="html" xml:base="http://localhost:4000/kubernetes/kubernetes-%EA%B8%B0%EB%B3%B8%EC%82%AC%EC%9A%A9%EB%B2%95/"><![CDATA[<p>ğŸ’¾ kubernetesì˜ ê¸°ë³¸ ì‚¬ìš©ë²•ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ <a href="https://kubernetes.io/ko/docs/concepts/workloads/" target="_black">ë§í¬</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><br /></p>

<h1 id="-pod">ğŸ¯ Pod</h1>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ì™€ ë„ì»¤ì˜ ì°¨ì´ì ì€ <strong>ë„ì»¤ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ì§€ë§Œ, ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” Podë¥¼ ë§Œë“­ë‹ˆë‹¤.</strong><br />
PodëŠ” í•œ ê°œ ë˜ëŠ” ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ í¬í•¨í•©ë‹ˆë‹¤.</p>

<h2 id="pod-ìƒì„±">Pod ìƒì„±</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ìƒì„±</span>
kubectl run nginx-pod <span class="nt">--image</span><span class="o">=</span>nginx

<span class="c"># í™•ì¸</span>
kubectl get pod

<span class="c"># ì¶œë ¥</span>
NAME READY STATUS RESTARTS AGE
nginx-pod 1/1 Running 0 35s
</code></pre></div></div>

<div class="notice--warning">
<p>kubernetes v1.18 ì´ìƒì€Â runëª…ë ¹ì–´ê°€ podì„ ë§Œë“¤ì§€ë§Œ v1.17 ì´í•˜ëŠ” deploymentë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>
</div>
<p><br /></p>

<h2 id="pod-ì œê±°">Pod ì œê±°</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl delete pod/nginx-pod
</code></pre></div></div>
<p><br /></p>

<h2 id="yamlìœ¼ë¡œ-íŒŒë“œ-ìƒì„±">YAMLìœ¼ë¡œ íŒŒë“œ ìƒì„±</h2>
<p><strong>YAML íŒŒì¼ ì •ì˜</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># simple-pod.yaml</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nginx-pod</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nginx-pod</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">app</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">nginx</span>
</code></pre></div></div>

<div class="notice--info">
<p><strong>í•„ìˆ˜ ìš”ì†Œ</strong></p>

<table>
  <thead>
    <tr>
      <th>ì •ì˜</th>
      <th>ì„¤ëª…</th>
      <th>ì˜ˆ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>version</td>
      <td>ì˜¤ë¸Œì íŠ¸ ë²„ì „</td>
      <td>v1, app/v1, networking.k8s.io/v1, â€¦</td>
    </tr>
    <tr>
      <td>kind</td>
      <td>ì¢…ë¥˜</td>
      <td>Pod, ReplicaSet, Deployment, Service, â€¦</td>
    </tr>
    <tr>
      <td>metadata</td>
      <td>ë©”íƒ€ë°ì´í„°</td>
      <td>nameê³¼ label, annotation(ì£¼ì„)ìœ¼ë¡œ êµ¬ì„±</td>
    </tr>
    <tr>
      <td>spec</td>
      <td>ìƒì„¸ëª…ì„¸</td>
      <td>ë¦¬ì†ŒìŠ¤ ì¢…ë¥˜ë§ˆë‹¤ ë‹¤ë¦„</td>
    </tr>
  </tbody>
</table>

<p><strong><code class="language-plaintext highlighter-rouge">version,Â kind,Â metadata,Â spec</code> ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜í•  ë•Œ ë°˜ë“œì‹œ í•„ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤.</strong></p>
</div>

<p><strong>Pod ìƒì„±</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply <span class="nt">-f</span> simple-pod.yaml
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ìƒíƒœ-ëª¨ë‹ˆí„°ë§">ì»¨í…Œì´ë„ˆ ìƒíƒœ ëª¨ë‹ˆí„°ë§</h2>
<p><code class="language-plaintext highlighter-rouge">ì»¨í…Œì´ë„ˆ ìƒì„±</code>ê³¼ ì‹¤ì œÂ <code class="language-plaintext highlighter-rouge">ì„œë¹„ìŠ¤ ì¤€ë¹„</code>ëŠ” ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤. ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë©´ ë°”ë¡œ ì ‘ì†í•  ìˆ˜ ì—†ê³  ì§§ê²ŒëŠ” ìˆ˜ì´ˆ, ê¸¸ê²ŒëŠ” ìˆ˜ë¶„ì˜ ì´ˆê¸°í™” ì‹œê°„ì´ í•„ìš”í•œë° <strong>ì‹¤ì œë¡œ ì ‘ì†ì´ ê°€ëŠ¥í•  ë•ŒÂ ì„œë¹„ìŠ¤ê°€ ì¤€ë¹„ë˜ì—ˆë‹¤ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong><br />
<img src="/assets/images/posts/kubernetes/20230327/532BF508-682A-46F6-8BF6-7C7852804169.png" alt="ì»¨í…Œì´ë„ˆ ì¤€ë¹„" /></p>

<p><strong>livenessProbe</strong><br />
ì»¨í…Œì´ë„ˆê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ ì²´í¬í•˜ê³  ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹œì‘í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤.
<code class="language-plaintext highlighter-rouge">ì •ìƒ</code>ì´ë¼ëŠ” ê²ƒì€ ì—¬ëŸ¬ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²´í¬í•  ìˆ˜ ìˆëŠ”ë°, ì—¬ê¸°ì„œëŠ” <code class="language-plaintext highlighter-rouge">httpGet</code> ìš”ì²­ì„ ë³´ë‚´ í™•ì¸í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

<div class="notice--info">
<p><strong>ìƒíƒœì²´í¬</strong><br />
<code class="language-plaintext highlighter-rouge">httpGet</code> ì™¸ì—Â <code class="language-plaintext highlighter-rouge">tcpSocket</code>,Â <code class="language-plaintext highlighter-rouge">exec</code>Â ë°©ë²•ìœ¼ë¡œ ì²´í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">echo-lp</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">app</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/subicura/echo:v1</span>
      <span class="na">livenessProbe</span><span class="pi">:</span>
        <span class="na">httpGet</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">/actuator/health</span>
          <span class="na">port</span><span class="pi">:</span> <span class="m">8080</span>
        <span class="na">initialDelaySeconds</span><span class="pi">:</span> <span class="m">5</span>
        <span class="na">timeoutSeconds</span><span class="pi">:</span> <span class="m">2</span>        <span class="c1"># Default 1</span>
        <span class="na">periodSeconds</span><span class="pi">:</span> <span class="m">5</span>         <span class="c1"># Defaults 10</span>
        <span class="na">failureThreshold</span><span class="pi">:</span> <span class="m">1</span>      <span class="c1"># Defaults 3</span>
</code></pre></div></div>

<p>ì •ìƒì ìœ¼ë¡œ ì‘ë‹µí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ Podê°€ ì—¬ëŸ¬ë²ˆ ì¬ì‹œì‘ë˜ê³ , <code class="language-plaintext highlighter-rouge">CrashLoopBackOff</code>Â ìƒíƒœë¡œ ë³€ê²½ë©ë‹ˆë‹¤.</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME      READY   STATUS             RESTARTS      AGE
echo-lp   0/1     CrashLoopBackOff   4 (15s ago)   60s
</code></pre></div></div>
<p><br /></p>

<p><strong>readinessProbe</strong><br />
ì»¨í…Œì´ë„ˆê°€ ì¤€ë¹„ë˜ì—ˆëŠ”ì§€ ì²´í¬í•˜ê³  ì •ìƒì ìœ¼ë¡œ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ë‹¤ë©´ Podìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì œì™¸í•©ë‹ˆë‹¤.
livenessProbedì™€ ì°¨ì´ì ì€ ë¬¸ì œê°€ ìˆì–´ë„ Podë¥¼ ì¬ì‹œì‘í•˜ì§€ ì•Šê³  ìš”ì²­ë§Œ ì œì™¸í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">echo-rp</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">app</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/subicura/echo:v1</span>
      <span class="na">readinessProbe</span><span class="pi">:</span>
        <span class="na">httpGet</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">/actuator/health</span>
          <span class="na">port</span><span class="pi">:</span> <span class="m">8080</span>
        <span class="na">initialDelaySeconds</span><span class="pi">:</span> <span class="m">5</span>
        <span class="na">timeoutSeconds</span><span class="pi">:</span> <span class="m">2</span>               <span class="c1"># Default 1</span>
        <span class="na">periodSeconds</span><span class="pi">:</span> <span class="m">5</span>                <span class="c1"># Defaults 10</span>
        <span class="na">failureThreshold</span><span class="pi">:</span> <span class="m">1</span>             <span class="c1"># Defaults 3</span>
</code></pre></div></div>
<p>ìƒíƒœ í™•ì¸</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME      READY   STATUS    RESTARTS   AGE
echo-rp   0/1     Running   0          14s
</code></pre></div></div>
<p><br /></p>

<p><strong>livenessProbe + readinessProbe</strong><br />
ë³´í†µÂ <code class="language-plaintext highlighter-rouge">livenessProbe</code>ì™€Â <code class="language-plaintext highlighter-rouge">readinessProbe</code>ë¥¼ ê°™ì´ ì ìš©í•©ë‹ˆë‹¤. ìƒì„¸í•œ ì„¤ì •ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ì— ë”°ë¼ ì ì ˆí•˜ê²Œ ì¡°ì •í•©ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">echo-health</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">app</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/subicura/echo:v1</span>
      <span class="na">livenessProbe</span><span class="pi">:</span>
        <span class="na">httpGet</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">/actuator/health</span>
          <span class="na">port</span><span class="pi">:</span> <span class="m">3000</span>
      <span class="na">readinessProbe</span><span class="pi">:</span>
        <span class="na">httpGet</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">/actuator/health</span>
          <span class="na">port</span><span class="pi">:</span> <span class="m">3000</span>
</code></pre></div></div>
<p><br /></p>

<p><strong>ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ</strong><br />
ëŒ€ë¶€ë¶„Â <code class="language-plaintext highlighter-rouge">1 Pod = 1 ì»¨í…Œì´ë„ˆ</code>ì§€ë§Œ ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ê°€ì§„ ê²½ìš°ë„ ê½¤ í”í•©ë‹ˆë‹¤. 
í•˜ë‚˜ì˜ Podì— ì†í•œ ì»¨í…Œì´ë„ˆëŠ” ì„œë¡œ <span class="danger-color">ë„¤íŠ¸ì›Œí¬ë¥¼Â localhostë¡œ ê³µìœ í•˜ê³  ë™ì¼í•œ ë””ë ‰í† ë¦¬ë¥¼ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">counter</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">counter</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">app</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/subicura/counter:latest</span>
      <span class="na">env</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">REDIS_HOST</span>
          <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">localhost"</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">db</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">redis</span>
</code></pre></div></div>

<div class="notice--info">
<p><strong>í™˜ê²½ë³€ìˆ˜ ì„¤ì •</strong><br />
<code class="language-plaintext highlighter-rouge">env</code>ëŠ”Â <code class="language-plaintext highlighter-rouge">name</code>ê³¼Â <code class="language-plaintext highlighter-rouge">value</code>ë¥¼ ë³„ë„ë¡œ ì •ì˜í•©ë‹ˆë‹¤.</p>
</div>
<p><br />
<br />
<br /></p>

<h1 id="-replicaset">ğŸ¯ ReplicaSet</h1>
<p>Podì„ ë‹¨ë…ìœ¼ë¡œ ë§Œë“¤ë©´ ì–´ë–¤ ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ ìë™ìœ¼ë¡œ ë³µêµ¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Podì„ ì •í•´ì§„ ìˆ˜ë§Œí¼ ë³µì œí•˜ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ReplicaSetì…ë‹ˆë‹¤.</p>

<h2 id="replicaset-yaml">ReplicaSet YAML</h2>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># echo-rs.yml</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ReplicaSet</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">echo-rs</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>            <span class="c1"># ì›í•˜ëŠ” pod ê°œìˆ˜</span>
  <span class="na">selector</span><span class="pi">:</span>              <span class="c1"># lebel ì²´í¬ ì¡°ê±´</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
      <span class="na">tier</span><span class="pi">:</span> <span class="s">app</span>
  <span class="na">template</span><span class="pi">:</span>              <span class="c1"># ìƒì„±í•  podì˜ ëª…ì„¸</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
        <span class="na">tier</span><span class="pi">:</span> <span class="s">app</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">echo</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/subicura/echo:v1</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="replicaset-ìƒì„±-ë°-í™•ì¸">ReplicaSet ìƒì„± ë° í™•ì¸</h2>

<p><strong>ìƒì„±</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ReplicaSet ìƒì„±</span>
kubectl apply <span class="nt">-f</span> echo-rs.yml
</code></pre></div></div>

<p><strong>í™•ì¸</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ë¦¬ì†ŒìŠ¤ í™•ì¸</span>
kubectl get po,rs

<span class="c"># ë¦¬ì†ŒìŠ¤ í™•ì¸ ê²°ê³¼</span>
NAME                READY   STATUS    RESTARTS   AGE
pod/echo-rs-tcdwj   1/1     Running   0          61s

NAME                      DESIRED   CURRENT   READY   AGE
replicaset.apps/echo-rs   1         1         1       61s



<span class="c"># pod ë¼ë²¨ í™•ì¸</span>
kubectl get pod <span class="nt">--show-labels</span>

<span class="c"># pod ë¼ë²¨ í™•ì¸ ê²°ê³¼</span>
NAME            READY   STATUS    RESTARTS   AGE   LABELS
echo-rs-tcdwj   1/1     Running   0          3m    <span class="nv">app</span><span class="o">=</span><span class="nb">echo</span>,tier<span class="o">=</span>app
</code></pre></div></div>
<p>ReplicaSetê³¼ Podì´ ê°™ì´ ìƒì„±ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <span class="danger-color">ReplicaSetì€Â labelì„ ì²´í¬í•´ì„œÂ ì›í•˜ëŠ” ìˆ˜ì˜ Podì´ ì—†ìœ¼ë©´Â ìƒˆë¡œìš´ Podì„ ìƒì„±</span>í•©ë‹ˆë‹¤.<br />
<br /></p>

<h2 id="ìŠ¤ì¼€ì¼-ì•„ì›ƒ">ìŠ¤ì¼€ì¼ ì•„ì›ƒ</h2>
<p>ReplicaSetì„ ì´ìš©í•˜ë©´ ì†ì‰½ê²Œ Podì„ ì—¬ëŸ¬ê°œë¡œ ë³µì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><strong>replicas ë³€ê²½</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># echo-rs-scaled.yml</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ReplicaSet</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">echo-rs</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">4</span>            <span class="c1"># pod ê°œìˆ˜ 4ê°œë¡œ ì„¤ì •</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
      <span class="na">tier</span><span class="pi">:</span> <span class="s">app</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
        <span class="na">tier</span><span class="pi">:</span> <span class="s">app</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">echo</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/subicura/echo:v1</span>
</code></pre></div></div>

<p><strong>ì‹¤í–‰ ë° ê²°ê³¼</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì‹¤í–‰</span>
kubectl apply <span class="nt">-f</span> echo-rs-scaled.yml

<span class="c"># í™•ì¸</span>
kubectl get pod,rs

<span class="c"># í™•ì¸ ê²°ê³¼</span>
NAME                READY   STATUS    RESTARTS   AGE
pod/echo-rs-h4q86   1/1     Running   0          12m
pod/echo-rs-4wk6t   1/1     Running   0          2m12s
pod/echo-rs-nkgf2   1/1     Running   0          2m12s
pod/echo-rs-xpqnc   1/1     Running   0          2m12s

NAME                      DESIRED   CURRENT   READY   AGE
replicaset.apps/echo-rs   4         4         4       12m
</code></pre></div></div>
<p><br />
<br />
<br /></p>

<h1 id="-deployment">ğŸ¯ Deployment</h1>
<p>DeploymentëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ì˜¤ë¸Œì íŠ¸ì…ë‹ˆë‹¤. ReplicaSetì„ ì´ìš©í•˜ì—¬ Podì„ ì—…ë°ì´íŠ¸í•˜ê³  ì´ë ¥ì„ ê´€ë¦¬í•˜ì—¬ ë¡¤ë°±í•˜ê±°ë‚˜ íŠ¹ì • ë²„ì „(revision)ìœ¼ë¡œ ëŒì•„ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h2 id="deployment-yaml">Deployment YAML</h2>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># echo-deployment.yml</span>

<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">echo-deploy</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">4</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
      <span class="na">tier</span><span class="pi">:</span> <span class="s">app</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
        <span class="na">tier</span><span class="pi">:</span> <span class="s">app</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">echo</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/subicura/echo:v1</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="deployment-ìƒì„±-ë°-í™•ì¸">Deployment ìƒì„± ë° í™•ì¸</h2>
<p><strong>ìƒì„±</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Deployment ìƒì„±</span>
kubectl apply <span class="nt">-f</span> echo-deployment.yml
</code></pre></div></div>

<p><strong>í™•ì¸</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ë¦¬ì†ŒìŠ¤ í™•ì¸</span>
kubectl get po,rs,deploy

<span class="c"># ë¦¬ì†ŒìŠ¤ í™•ì¸ ê²°ê³¼</span>
NAME                               READY   STATUS    RESTARTS   AGE
pod/echo-deploy-76dcd9f4f9-clx78   1/1     Running   0          17s
pod/echo-deploy-76dcd9f4f9-jxnzx   1/1     Running   0          17s
pod/echo-deploy-76dcd9f4f9-kfl25   1/1     Running   0          17s
pod/echo-deploy-76dcd9f4f9-p8b85   1/1     Running   0          17s

NAME                                     DESIRED   CURRENT   READY   AGE
replicaset.apps/echo-deploy-76dcd9f4f9   4         4         4       17s

NAME                          READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/echo-deploy   4/4     4            4           17s

</code></pre></div></div>
<p>ReplicaSetê³¼ ë¹„ìŠ·í•´ ë³´ì´ì§€ë§Œ DeploymentëŠ” Podì„ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¡œ ì—…ë°ì´íŠ¸í•  ë•Œ ë™ì‘ì´ ë‹¤ë¦…ë‹ˆë‹¤.</p>

<h2 id="deployment-ì—…ë°ì´íŠ¸">Deployment ì—…ë°ì´íŠ¸</h2>
<p>Podì˜ ì´ë¯¸ì§€ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># echo-deployment.yml</span>

<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">echo-deploy</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">4</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
      <span class="na">tier</span><span class="pi">:</span> <span class="s">app</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
        <span class="na">tier</span><span class="pi">:</span> <span class="s">app</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">echo</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/subicura/echo:v2</span>  <span class="c1"># ì´ë¯¸ì§€ ë³€ê²½</span>
</code></pre></div></div>

<p><strong>ì—…ë°ì´íŠ¸</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ìƒˆë¡œìš´ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸</span>
kubectl apply <span class="nt">-f</span> echo-deployment-v2.yml
</code></pre></div></div>

<p><strong>í™•ì¸</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ë¦¬ì†ŒìŠ¤ í™•ì¸</span>
kubectl get po,rs,deploy

<span class="c"># ë¦¬ì†ŒìŠ¤ í™•ì¸ ê²°ê³¼</span>
NAME                               READY   STATUS    RESTARTS   AGE
pod/echo-deploy-77cd7699f4-jg7ws   1/1     Running   0          33s
pod/echo-deploy-77cd7699f4-rpbjx   1/1     Running   0          20s
pod/echo-deploy-77cd7699f4-rtgcv   1/1     Running   0          19s
pod/echo-deploy-77cd7699f4-rw29n   1/1     Running   0          33s

NAME                                     DESIRED   CURRENT   READY   AGE
replicaset.apps/echo-deploy-76dcd9f4f9   0         0         0       3m35s
replicaset.apps/echo-deploy-77cd7699f4   4         4         4       33s

NAME                          READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/echo-deploy   4/4     4            4           3m35s
</code></pre></div></div>
<p>ëª¨ë‘ ìƒˆë¡œìš´ Podìœ¼ë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="notice--info">
<p><strong>ì°¸ê³ </strong><br />
Podì€ ì—…ë°ì´íŠ¸ë¼ëŠ” ê°œë…ì´ ì—†ê³  ìƒˆë¡œìš´ ë²„ì „ì„ ìƒì„±í•˜ê³ , ê¸°ì¡´ Podì„ ì œê±°í•©ë‹ˆë‹¤.</p>
</div>
<p><br /></p>

<h2 id="ìŠ¤ì¼€ì¼ë§">ìŠ¤ì¼€ì¼ë§</h2>
<p>DeploymentëŠ” ìŠ¤ì¼€ì¼ë§ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Podì˜ ìˆ˜ë¥¼ 10ê°œë¡œ ì§€ì •</span>
kubectl scale deployment/nginx-deployment <span class="nt">--replicas</span><span class="o">=</span>10
</code></pre></div></div>
<p><br /></p>

<p>í´ëŸ¬ìŠ¤í„°ì—ì„œÂ <a href="https://kubernetes.io/ko/docs/tasks/run-application/horizontal-pod-autoscale/" target="_blank">horizontal Pod Autoscaling</a>ë¥¼ ì„¤ì • í•œ ê²½ìš° Deploymentì— ëŒ€í•œ ì˜¤í† ìŠ¤ì¼€ì¼ëŸ¬ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” Podì˜ CPU ì‚¬ìš©ë¥ ì„ ê¸°ì¤€ìœ¼ë¡œ ì‹¤í–‰í•  ìµœì†Œ Pod ë° ìµœëŒ€ Podì˜ ìˆ˜ë¥¼ ì„¤ì •í•œ ì˜ˆì…ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl autoscale deployment/nginx-deployment <span class="nt">--min</span><span class="o">=</span>10 <span class="nt">--max</span><span class="o">=</span>15 <span class="nt">--cpu-percent</span><span class="o">=</span>80
</code></pre></div></div>
<p><br /></p>

<h2 id="ë²„ì „ê´€ë¦¬">ë²„ì „ê´€ë¦¬</h2>
<p>DeploymentëŠ” ë³€ê²½ëœ ìƒíƒœë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># íˆìŠ¤í† ë¦¬ í™•ì¸</span>
kubectl rollout <span class="nb">history </span>deploy/echo-deploy

<span class="c"># revision 1 íˆìŠ¤í† ë¦¬ ìƒì„¸ í™•ì¸</span>
kubectl rollout <span class="nb">history </span>deploy/echo-deploy <span class="nt">--revision</span><span class="o">=</span>1

<span class="c"># ë°”ë¡œ ì „ìœ¼ë¡œ ë¡¤ë°±</span>
kubectl rollout undo deploy/echo-deploy

<span class="c"># íŠ¹ì • ë²„ì „ìœ¼ë¡œ ë¡¤ë°±</span>
kubectl rollout undo deploy/echo-deploy <span class="nt">--to-revision</span><span class="o">=</span>2
</code></pre></div></div>
<p><br /></p>

<h2 id="ë°°í¬-ì „ëµ-ì„¤ì •">ë°°í¬ ì „ëµ ì„¤ì •</h2>
<p>DeploymentëŠ” ë‹¤ì–‘í•œ ë°©ì‹ì˜ ë°°í¬ ì „ëµ(Rolling Update, Blue-Green, Canary)ì´ ìˆìŠµë‹ˆë‹¤. ì´ ì¤‘ Rolling Updateë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.</p>

<p>Rolling Updateë°©ì‹ì„ ì‚¬ìš©í•  ë•Œ ë™ì‹œì— ì—…ë°ì´íŠ¸í•˜ëŠ” Podì˜ ê°œìˆ˜ë¥¼ ë³€ê²½í•˜ëŠ” ì˜ˆì…ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># echo-strategy.yml</span>

<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">echo-deploy-st</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">4</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
      <span class="na">tier</span><span class="pi">:</span> <span class="s">app</span>
  <span class="na">minReadySeconds</span><span class="pi">:</span> <span class="m">5</span>
  <span class="na">strategy</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">RollingUpdate</span>        <span class="c1"># ë°°í¬ ì „ëµ ì„¤ì •</span>
    <span class="na">rollingUpdate</span><span class="pi">:</span>
      <span class="na">maxSurge</span><span class="pi">:</span> <span class="m">3</span>
      <span class="na">maxUnavailable</span><span class="pi">:</span> <span class="m">3</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">echo</span>
        <span class="na">tier</span><span class="pi">:</span> <span class="s">app</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">echo</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/subicura/echo:v1</span>
          <span class="na">livenessProbe</span><span class="pi">:</span>
            <span class="na">httpGet</span><span class="pi">:</span>
              <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
              <span class="na">port</span><span class="pi">:</span> <span class="m">3000</span>
</code></pre></div></div>

<p><strong>Deploymentë¥¼ ìƒì„±í•˜ê³  ê²°ê³¼ë¥¼ í™•ì¸</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì‹¤í–‰</span>
kubectl apply <span class="nt">-f</span> echo-strategy.yml

<span class="c"># ì¡°íšŒ</span>
kubectl get po,rs,deploy

<span class="c"># ì´ë¯¸ì§€ ë³€ê²½ (ëª…ë ¹ì–´ë¡œ)</span>
kubectl <span class="nb">set </span>image deploy/echo-deploy-st <span class="nb">echo</span><span class="o">=</span>ghcr.io/subicura/echo:v2

<span class="c"># ì´ë²¤íŠ¸ í™•ì¸</span>
kubectl describe deploy/echo-deploy-st

<span class="c"># ì´ë²¤íŠ¸ í™•ì¸ ê²°ê³¼</span>
Events:
  Type    Reason             Age   From                   Message
  <span class="nt">----</span>    <span class="nt">------</span>             <span class="nt">----</span>  <span class="nt">----</span>                   <span class="nt">-------</span>
  Normal  ScalingReplicaSet  59s   deployment-controller  Scaled up replica <span class="nb">set </span>echo-deploy-st-679749cb78 to 4
  Normal  ScalingReplicaSet  29s   deployment-controller  Scaled up replica <span class="nb">set </span>echo-deploy-st-6754948699 to 3
  Normal  ScalingReplicaSet  29s   deployment-controller  Scaled down replica <span class="nb">set </span>echo-deploy-st-679749cb78 to 1
  Normal  ScalingReplicaSet  29s   deployment-controller  Scaled up replica <span class="nb">set </span>echo-deploy-st-6754948699 to 4
  Normal  ScalingReplicaSet  19s   deployment-controller  Scaled down replica <span class="nb">set </span>echo-deploy-st-679749cb78 to 0

</code></pre></div></div>
<p>Podë¥¼ í•˜ë‚˜ì”© ìƒì„±í•˜ì§€ ì•Šê³  3ê°œì”© ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="notice--info">
<p><strong>ì°¸ê³ </strong><br />
<code class="language-plaintext highlighter-rouge">maxSurge</code>ì™€ <code class="language-plaintext highlighter-rouge">maxUnavailable</code>ì˜ <code class="language-plaintext highlighter-rouge">ê¸°ë³¸ê°’ì€ 25%</code>ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ìƒí™©ì—ì„œ ì ë‹¹í•˜ì§€ë§Œ ìƒí™©ì— ë”°ë¼ ì ì ˆí•˜ê²Œ ì¡°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
</div>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<p>ì‘ì„±ì¤‘â€¦.</p>]]></content><author><name>Oh</name></author><category term="Kubernetes" /><category term="Kubernetes" /><category term="k8s" /><summary type="html"><![CDATA[ğŸ’¾ kubernetesì˜ ê¸°ë³¸ ì‚¬ìš©ë²•ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ë§í¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">kubectl ê¸°ë³¸ ëª…ë ¹ì–´</title><link href="http://localhost:4000/kubernetes/kubectl-%EA%B8%B0%EB%B3%B8%EB%AA%85%EB%A0%B9%EC%96%B4/" rel="alternate" type="text/html" title="kubectl ê¸°ë³¸ ëª…ë ¹ì–´" /><published>2023-03-14T00:00:00+09:00</published><updated>2023-03-14T00:00:00+09:00</updated><id>http://localhost:4000/kubernetes/kubectl-%EA%B8%B0%EB%B3%B8%EB%AA%85%EB%A0%B9%EC%96%B4</id><content type="html" xml:base="http://localhost:4000/kubernetes/kubectl-%EA%B8%B0%EB%B3%B8%EB%AA%85%EB%A0%B9%EC%96%B4/"><![CDATA[<p>ğŸ’¾ kubectl ê¸°ë³¸ëª…ë ¹ì–´ë¥¼ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.</p>

<p><br /></p>

<h2 id="apply">apply</h2>
<p>ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœë¥¼ YAMLë¡œ ì‘ì„±í•˜ê³  apply ëª…ë ì–´ë¡œ ì„ ì–¸í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply <span class="nt">-f</span> <span class="o">[</span>íŒŒì¼ëª… ë˜ëŠ” URL]
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply <span class="nt">-f</span> ./my-manifest.yaml        <span class="c"># ë¦¬ì†ŒìŠ¤(ë“¤) ìƒì„±</span>
kubectl apply <span class="nt">-f</span> ./my1.yaml <span class="nt">-f</span> ./my2.yaml  <span class="c"># ì—¬ëŸ¬ íŒŒì¼ë¡œ ë¶€í„° ìƒì„±</span>
kubectl apply <span class="nt">-f</span> ./dir                     <span class="c"># dir ë‚´ ëª¨ë“  ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì—ì„œ ë¦¬ì†ŒìŠ¤(ë“¤) ìƒì„± </span>
kubectl apply <span class="nt">-f</span> https://git.io/vPieo      <span class="c"># urlë¡œë¶€í„° ë¦¬ì†ŒìŠ¤(ë“¤) ìƒì„±</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="get">get</h2>
<p>ë¦¬ì†ŒìŠ¤ ëª©ë¡ ë³´ê¸°. ì¶œë ¥ í˜•íƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ”Â <code class="language-plaintext highlighter-rouge">-o</code>ì™€ ë ˆì´ë¸”ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”Â <code class="language-plaintext highlighter-rouge">--show-labels</code>ë¥¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get <span class="o">[</span>TYPE]
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ê¸°ë³¸ ì¶œë ¥ì„ ìœ„í•œ Get ì»¤ë§¨ë“œ</span>
kubectl get services                      <span class="c"># ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  ì„œë¹„ìŠ¤ì˜ ëª©ë¡ ì¡°íšŒ</span>
kubectl get pods <span class="nt">--all-namespaces</span>         <span class="c"># ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  íŒŒë“œì˜ ëª©ë¡ ì¡°íšŒ</span>
kubectl get pods <span class="nt">-o</span> wide                  <span class="c"># í•´ë‹¹í•˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  íŒŒë“œì˜ ìƒì„¸ ëª©ë¡ ì¡°íšŒ</span>
kubectl get deployment my-dep             <span class="c"># íŠ¹ì • ë””í”Œë¡œì´ë¨¼íŠ¸ì˜ ëª©ë¡ ì¡°íšŒ</span>
kubectl get pods                          <span class="c"># ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  íŒŒë“œì˜ ëª©ë¡ ì¡°íšŒ</span>
kubectl get pod my-pod <span class="nt">-o</span> yaml            <span class="c"># íŒŒë“œì˜ YAML ì¡°íšŒ</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="describe">describe</h2>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì„ ì–¸ëœ ë¦¬ì†ŒìŠ¤ì˜ ìƒì„¸í•œ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤. íŠ¹ì • ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœê°€ ê¶ê¸ˆí•˜ê±°ë‚˜ ìƒì„±ì´ ì‹¤íŒ¨í•œ ì´ìœ ë¥¼ í™•ì¸í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl describe <span class="o">[</span>TYPE]/[NAME] ë˜ëŠ” <span class="o">[</span>TYPE] <span class="o">[</span>NAME]
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pod                                 <span class="c"># Pod ì¡°íšŒë¡œ ì´ë¦„ ê²€ìƒ‰</span>
kubectl describe pod/wordpress-5f59577d4d-8t2dg <span class="c"># ì¡°íšŒí•œ ì´ë¦„ìœ¼ë¡œ ìƒì„¸ í™•ì¸</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="delete">delete</h2>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì„ ì–¸ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê±°í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl delete <span class="o">[</span>TYPE]/[NAME] ë˜ëŠ” <span class="o">[</span>TYPE] <span class="o">[</span>NAME]
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pod                                <span class="c"># Pod ì¡°íšŒë¡œ ì´ë¦„ ê²€ìƒ‰</span>
kubectl delete pod/wordpress-5f59577d4d-8t2dg  <span class="c"># ì¡°íšŒí•œ Pod ì œê±°</span>
kubectl delete deploy deploymentname <span class="nt">-n</span> namespacename
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="logs">logs</h2>
<p>ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. ì‹¤ì‹œê°„ ë¡œê·¸ë¥¼ ë³´ê³  ì‹¶ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">-f</code>Â ì˜µì…˜ì„ ì´ìš©í•©ë‹ˆë‹¤. í•˜ë‚˜ì˜ Podì— ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆê°€ ìˆëŠ” ê²½ìš°ëŠ”Â <code class="language-plaintext highlighter-rouge">-c</code>Â ì˜µì…˜ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl logs <span class="o">[</span>POD_NAME]
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pod                              <span class="c"># Pod ì¡°íšŒë¡œ ì´ë¦„ ê²€ìƒ‰</span>
kubectl logs wordpress-5f59577d4d-8t2dg      <span class="c"># ì¡°íšŒí•œ Pod ë¡œê·¸ì¡°íšŒ</span>
kubectl logs <span class="nt">-f</span> wordpress-5f59577d4d-8t2dg   <span class="c"># ì‹¤ì‹œê°„ ë¡œê·¸ ë³´ê¸°</span>
kubectl logs my-pod <span class="nt">-c</span> my-container          <span class="c"># ë©€í‹°-ì»¨í…Œì´ë„ˆ ê²½ìš°</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="exec">exec</h2>
<p>ì»¨í…Œì´ë„ˆì— ëª…ë ¹ì–´ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. ì‰˜ë¡œ ì ‘ì†í•˜ì—¬ ì»¨í…Œì´ë„ˆ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ê²½ìš°ì—Â <code class="language-plaintext highlighter-rouge">-it</code>Â ì˜µì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆê°€ ìˆëŠ” ê²½ìš°ì—”Â <code class="language-plaintext highlighter-rouge">-c</code>Â ì˜µì…˜ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì§€ì •í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl <span class="nb">exec</span> <span class="o">[</span><span class="nt">-it</span><span class="o">]</span> <span class="o">[</span>POD_NAME] <span class="nt">--</span> <span class="o">[</span>COMMAND]
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pod                                        <span class="c"># Pod ì¡°íšŒë¡œ ì´ë¦„ ê²€ìƒ‰</span>
kubectl <span class="nb">exec</span> <span class="nt">-it</span> wordpress-5f59577d4d-8t2dg <span class="nt">--</span> bash    <span class="c"># ì¡°íšŒí•œ Podì˜ ì»¨í…Œì´ë„ˆì— ì ‘ì†</span>
kubectl <span class="nb">exec </span>my-pod <span class="nt">-c</span> my-container <span class="nt">--</span> <span class="nb">ls</span> /            <span class="c"># ë©€í‹°-ì»¨í…Œì´ë„ˆ ê²½ìš°</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="config">config</h2>
<p><code class="language-plaintext highlighter-rouge">kubectl</code>ì´ í†µì‹ í•˜ê³  ì„¤ì • ì •ë³´ë¥¼ ìˆ˜ì •í•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl config get-contexts             <span class="c"># ì»¨í…ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ ì¶œë ¥</span>
kubectl config current-context          <span class="c"># í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ í™•ì¸</span>
kubectl config use-context minikube     <span class="c"># ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ë¡œ ì„¤ì •</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="api-resources">api-resources</h2>
<p>API ë¦¬ì†ŒìŠ¤ë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl api-resources                        <span class="c"># ì „ì²´ ì˜¤ë¸Œì íŠ¸ ì¢…ë¥˜ í™•ì¸</span>
kubectl api-resources <span class="nt">--namespaced</span><span class="o">=</span><span class="nb">true</span>      <span class="c"># ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê°€ì§€ëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤</span>
kubectl api-resources <span class="nt">--namespaced</span><span class="o">=</span><span class="nb">false</span>     <span class="c"># ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤</span>
kubectl api-resources <span class="nt">-o</span> name                <span class="c"># ëª¨ë“  ë¦¬ì†ŒìŠ¤ì˜ ë‹¨ìˆœí•œ (ë¦¬ì†ŒìŠ¤ ì´ë¦„ë§Œ) ì¶œë ¥</span>
kubectl api-resources <span class="nt">-o</span> wide                <span class="c"># ëª¨ë“  ë¦¬ì†ŒìŠ¤ì˜ í™•ì¥ëœ ("wide"ë¡œ ì•Œë ¤ì§„) ì¶œë ¥</span>
kubectl api-resources <span class="nt">--verbs</span><span class="o">=</span>list,get       <span class="c"># "list"ì™€ "get"ì˜ ìš”ì²­ ë™ì‚¬ë¥¼ ì§€ì›í•˜ëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì¶œë ¥</span>
kubectl api-resources <span class="nt">--api-group</span><span class="o">=</span>extensions <span class="c"># "extensions" API ê·¸ë£¹ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="explain">explain</h2>
<p>íŠ¹ì • ì˜¤ë¸Œì íŠ¸ ì„¤ëª…ì„ í™•ì¸í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl explain pods           <span class="c"># íŒŒë“œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë¬¸ì„œë¥¼ ì¡°íšŒ</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="cp">cp</h2>
<p>ë¡œì»¬ì—ì„œ ì»¨í…Œì´ë„ˆë¡œ, ì»¨í…Œì´ë„ˆì—ì„œ ë¡œì»¬ë¡œ íŒŒì¼ê³¼ ë””ë ‰í„°ë¦¬ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl <span class="nb">cp</span> /tmp/foo_dir my-pod:/tmp/bar_dir            <span class="c"># ë¡œì»¬ ë””ë ‰í† ë¦¬ /tmp/foo_dir ë¥¼ í˜„ì¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ my-pod íŒŒë“œ ì•ˆì˜ /tmp/bar_dir ë¡œ ë³µì‚¬</span>
kubectl <span class="nb">cp</span> /tmp/foo my-pod:/tmp/bar <span class="nt">-c</span> my-container    <span class="c"># ë¡œì»¬ íŒŒì¼ /tmp/foo ë¥¼ my-pod íŒŒë“œì˜ my-container ì»¨í…Œì´ë„ˆ ì•ˆì˜ /tmp/bar ë¡œ ë³µì‚¬</span>
kubectl <span class="nb">cp</span> /tmp/foo my-namespace/my-pod:/tmp/bar       <span class="c"># ë¡œì»¬ íŒŒì¼ /tmp/foo ë¥¼ my-namespace ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ my-pod íŒŒë“œ ì•ˆì˜ /tmp/bar ë¡œ ë³µì‚¬</span>
kubectl <span class="nb">cp </span>my-namespace/my-pod:/tmp/foo /tmp/bar       <span class="c"># my-namespace ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ my-pod íŒŒë“œ ì•ˆì˜ íŒŒì¼ /tmp/foo ë¥¼ ë¡œì»¬ì˜ /tmp/bar ë¡œ ë³µì‚¬</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="ì¶œë ¥-í˜•ì‹-ì§€ì •">ì¶œë ¥ í˜•ì‹ ì§€ì •</h2>
<p>íŠ¹ì • í˜•ì‹ìœ¼ë¡œ í„°ë¯¸ë„ ì°½ì— ì„¸ë¶€ì‚¬í•­ì„ ì¶œë ¥í•˜ë ¤ë©´, <code class="language-plaintext highlighter-rouge">kubectl</code>Â ëª…ë ¹ì—Â <code class="language-plaintext highlighter-rouge">-o</code>Â (ë˜ëŠ”Â <code class="language-plaintext highlighter-rouge">--output</code>) í”Œë˜ê·¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>

<table>
  <thead>
    <tr>
      <th>ì¶œë ¥ í˜•ì‹</th>
      <th>ì„¸ë¶€ ì‚¬í•­</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-o=custom-columns=<ëª…ì„¸></ëª…ì„¸></td>
      <td>ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ì‚¬ìš©ì ì •ì˜ ì—´ ëª©ë¡ì„ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸” ì¶œë ¥</td>
    </tr>
    <tr>
      <td>-o=custom-columns-file=<íŒŒì¼ëª…></íŒŒì¼ëª…></td>
      <td><íŒŒì¼ëª…>íŒŒì¼ì—ì„œ ì‚¬ìš©ì ì •ì˜ ì—´ í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸” ì¶œë ¥</íŒŒì¼ëª…></td>
    </tr>
    <tr>
      <td>-o=json</td>
      <td>JSON í˜•ì‹ì˜ API ì˜¤ë¸Œì íŠ¸ ì¶œë ¥</td>
    </tr>
    <tr>
      <td>-o=jsonpath=<í…œí”Œë¦¿></í…œí”Œë¦¿></td>
      <td>https://kubernetes.io/ko/docs/reference/kubectl/jsonpathÂ í‘œí˜„ì‹ì— ì •ì˜ëœ í•„ë“œ ì¶œë ¥</td>
    </tr>
    <tr>
      <td>-o=jsonpath-file=<íŒŒì¼ëª…></íŒŒì¼ëª…></td>
      <td><íŒŒì¼ëª…> íŒŒì¼ì—ì„œÂ https://kubernetes.io/ko/docs/reference/kubectl/jsonpathÂ í‘œí˜„ì‹ì— ì •ì˜ëœ í•„ë“œ ì¶œë ¥</íŒŒì¼ëª…></td>
    </tr>
    <tr>
      <td>-o=name</td>
      <td>ë¦¬ì†ŒìŠ¤ ëª…ë§Œ ì¶œë ¥í•˜ê³  ê·¸ ì™¸ì—ëŠ” ì¶œë ¥í•˜ì§€ ì•ŠìŒ</td>
    </tr>
    <tr>
      <td>-o=wide</td>
      <td>ì¶”ê°€ ì •ë³´ê°€ í¬í•¨ëœ ì¼ë°˜-í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥í•˜ê³ , íŒŒë“œì˜ ê²½ìš° ë…¸ë“œ ëª…ì´ í¬í•¨</td>
    </tr>
    <tr>
      <td>-o=yaml</td>
      <td>YAML í˜•ì‹ì˜ API ì˜¤ë¸Œì íŠ¸ ì¶œë ¥</td>
    </tr>
  </tbody>
</table>

<div class="notice--info">
<p><strong>ì‚¬ìš©ë°©ë²•</strong></p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl get [(-o|--output=)json|yaml|name|go-template|go-template-file
|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file|custom-columns
|custom-columns-file|wide] (TYPE[.VERSION][.GROUP] [NAME | -l label] | TYPE[.VERSION][.GROUP]/NAME ...) [flags]
</code></pre></div></div>
</div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ëª¨ë“  ì´ë¯¸ì§€</span>
kubectl get pods <span class="nt">-A</span> <span class="nt">-o</span><span class="o">=</span>custom-columns<span class="o">=</span><span class="s1">'DATA:spec.containers[*].image'</span>

<span class="c"># `default` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ íŒŒë“œë³„ë¡œ ê·¸ë£¹ì§€ì–´ ì¶œë ¥</span>
kubectl get pods <span class="nt">--namespace</span> default <span class="nt">--output</span><span class="o">=</span>custom-columns<span class="o">=</span><span class="s2">"NAME:.metadata.name,IMAGE:.spec.containers[*].image"</span>

 <span class="c"># "registry.k8s.io/coredns:1.6.2" ë¥¼ ì œì™¸í•œ ëª¨ë“  ì´ë¯¸ì§€</span>
kubectl get pods <span class="nt">-A</span> <span class="nt">-o</span><span class="o">=</span>custom-columns<span class="o">=</span><span class="s1">'DATA:spec.containers[?(@.image!="registry.k8s.io/coredns:1.6.2")].image'</span>

<span class="c"># ì´ë¦„ì— ê´€ê³„ì—†ì´ ë©”íƒ€ë°ì´í„° ì•„ë˜ì˜ ëª¨ë“  í•„ë“œ</span>
kubectl get pods <span class="nt">-A</span> <span class="nt">-o</span><span class="o">=</span>custom-columns<span class="o">=</span><span class="s1">'DATA:metadata.*'</span>
</code></pre></div></div>

<div class="notice--info">
<p><strong>ë„ì»¤ ì‚¬ìš©ìë¥¼ ìœ„í•œ kubectl</strong><br />
ë§Œì•½ ë„ì»¤ ì»¤ë§¨ë“œ ë¼ì¸ ë„êµ¬ì— ìµìˆ™í•˜ë‹¤ë©´ <a href="https://kubernetes.io/ko/docs/reference/kubectl/docker-cli-to-kubectl/" target="_blank">ë§í¬</a>ë¥¼ í†µí•´ ê°„ë‹¨íˆ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</div>
<p><br />
<br />
<br /></p>

<h2 id="ì°¸ê³ ì‚¬ì´íŠ¸">ì°¸ê³ ì‚¬ì´íŠ¸</h2>
<ul>
  <li><a href="https://kubernetes.io/ko/docs/reference/kubectl/" target="_blank">kubectl docs 1</a></li>
  <li><a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands" target="_blank">kubectl docs 2</a></li>
  <li><a href="https://kubernetes.io/ko/docs/reference/kubectl/cheatsheet/" target="_blank">kubectl cheatsheet</a></li>
</ul>]]></content><author><name>Oh</name></author><category term="Kubernetes" /><category term="Kubernetes" /><category term="k8s" /><category term="kubectl" /><summary type="html"><![CDATA[ğŸ’¾ kubectl ê¸°ë³¸ëª…ë ¹ì–´ë¥¼ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">Kubernetes ì‚´í´ë³´ê¸°</title><link href="http://localhost:4000/kubernetes/kubernetes-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0/" rel="alternate" type="text/html" title="Kubernetes ì‚´í´ë³´ê¸°" /><published>2023-03-06T00:00:00+09:00</published><updated>2023-03-06T00:00:00+09:00</updated><id>http://localhost:4000/kubernetes/kubernetes-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0</id><content type="html" xml:base="http://localhost:4000/kubernetes/kubernetes-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0/"><![CDATA[<p>ğŸ’¾ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê¸°ë³¸ ê°œë…ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.</p>

<p><br /></p>

<h1 id="-ì¿ ë²„ë„¤í‹°ìŠ¤ë€">ğŸ¯ ì¿ ë²„ë„¤í‹°ìŠ¤ë€?</h1>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ”Â ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬, ê´€ë¦¬, í™•ì¥í•  ë•Œ ìˆ˜ë°˜ë˜ëŠ” ë‹¤ìˆ˜ì˜ ìˆ˜ë™ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™”í•˜ëŠ”Â <span class="danger-color">ì˜¤í”ˆì†ŒìŠ¤Â ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”Œë«í¼</span>ì…ë‹ˆë‹¤.</p>

<table>
  <thead>
    <tr>
      <th><strong>ìš©ì–´</strong></th>
      <th><strong>ëœ»</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ì»¨í…Œì´ë„ˆ</td>
      <td>ì•±ì´ êµ¬ë™ë˜ëŠ” í™˜ê²½ê¹Œì§€ ê°ì‹¸ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²©ë¦¬ ê¸°ìˆ </td>
    </tr>
    <tr>
      <td>ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„</td>
      <td>ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ë£¨ëŠ” ë„êµ¬</td>
    </tr>
    <tr>
      <td>ë„ì»¤</td>
      <td>ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ë£¨ëŠ” ë„êµ¬ ì¤‘ ê°€ì¥ ìœ ëª…í•œ ê²ƒ</td>
    </tr>
    <tr>
      <td>ì¿ ë²„ë„¤í‹°ìŠ¤</td>
      <td>ì»¨ì´ë„ˆ ëŸ°íƒ€ì„ì„ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í•˜ëŠ” ë„êµ¬</td>
    </tr>
    <tr>
      <td>ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜</td>
      <td>ì—¬ëŸ¬ ì„œë²„ì— ê±¸ì¹œ ì»¨í…Œì´ë„ˆ ë° ì‚¬ìš©í•˜ëŠ” í™˜ê²½ ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” í–‰ìœ„</td>
    </tr>
  </tbody>
</table>

<p><br />
<br />
<br /></p>

<h1 id="-ì¿ ë²„ë„¤í‹°ìŠ¤ê°€-í• -ìˆ˜-ìˆëŠ”-ì¼ì€">ğŸ¯ ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ í•  ìˆ˜ ìˆëŠ” ì¼ì€?</h1>
<ul>
  <li><strong>ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì™€ ë¡œë“œ ë°¸ëŸ°ì‹±:</strong> ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” DNS ì´ë¦„ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ìì²´ IP ì£¼ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ë…¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»¨í…Œì´ë„ˆì— ëŒ€í•œ íŠ¸ë˜í”½ì´ ë§ìœ¼ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ë¡œë“œë°¸ëŸ°ì‹±í•˜ê³  ë°°í¬í•˜ì—¬ ë°°í¬ê°€ ì•ˆì •ì ìœ¼ë¡œ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li><strong>ìŠ¤í† ë¦¬ì§€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜:</strong> ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë¡œì»¬ ì €ì¥ì†Œ, ê³µìš© í´ë¼ìš°ë“œ ê³µê¸‰ì ë“±ê³¼ ê°™ì´ ì›í•˜ëŠ” ì €ì¥ì†Œ ì‹œìŠ¤í…œì„ ìë™ìœ¼ë¡œ íƒ‘ì¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li><strong>ìë™í™”ëœ ë¡¤ì•„ì›ƒê³¼ ë¡¤ë°±:</strong> ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°í¬ëœ ì»¨í…Œì´ë„ˆì˜ ì›í•˜ëŠ” ìƒíƒœë¥¼ ì„œìˆ í•  ìˆ˜ ìˆìœ¼ë©° í˜„ì¬ ìƒíƒœë¥¼ ì›í•˜ëŠ” ìƒíƒœë¡œ ì„¤ì •í•œ ì†ë„ì— ë”°ë¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ìë™í™”í•´ì„œ ë°°í¬ìš© ìƒˆ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ê³ , ê¸°ì¡´ ì»¨í…Œì´ë„ˆë¥¼ ì œê±°í•˜ê³ , ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ìƒˆ ì»¨í…Œì´ë„ˆì— ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li><strong>ìë™í™”ëœ ë¹ˆ íŒ¨í‚¹(bin packing):</strong>Â ì»¨í…Œì´ë„ˆí™”ëœ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë…¸ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê° ì»¨í…Œì´ë„ˆê°€ í•„ìš”ë¡œ í•˜ëŠ” CPUì™€ ë©”ëª¨ë¦¬(RAM)ë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ê²Œ ì§€ì‹œí•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ë…¸ë“œì— ë§ì¶”ì–´ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì¥ ì˜ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.</li>
  <li><strong>ìë™í™”ëœ ë³µêµ¬(self-healing):</strong>Â ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì‹¤íŒ¨í•œ ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ê³ , ì»¨í…Œì´ë„ˆë¥¼ êµì²´í•˜ë©°, â€˜ì‚¬ìš©ì ì •ì˜ ìƒíƒœ ê²€ì‚¬â€™ì— ì‘ë‹µí•˜ì§€ ì•ŠëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì£½ì´ê³ , ì„œë¹„ìŠ¤ ì¤€ë¹„ê°€ ëë‚  ë•Œê¹Œì§€ ê·¸ëŸ¬í•œ ê³¼ì •ì„ í´ë¼ì´ì–¸íŠ¸ì— ë³´ì—¬ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
  <li><strong>ì‹œí¬ë¦¿ê³¼ êµ¬ì„± ê´€ë¦¬:</strong>Â ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì•”í˜¸, OAuth í† í° ë° SSH í‚¤ì™€ ê°™ì€ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì¬êµ¬ì„±í•˜ì§€ ì•Šê³  ìŠ¤íƒ êµ¬ì„±ì— ì‹œí¬ë¦¿ì„ ë…¸ì¶œí•˜ì§€ ì•Šê³ ë„ ì‹œí¬ë¦¿ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±ì„ ë°°í¬ ë° ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br />
<br />
<br />
<br /></li>
</ul>

<h1 id="-ì¿ ë²„ë„¤í‹°ìŠ¤-êµ¬ì„±-ìš”ì†Œ">ğŸ¯ ì¿ ë²„ë„¤í‹°ìŠ¤ êµ¬ì„± ìš”ì†Œ</h1>
<ul>
  <li><a href="https://kubernetes.io/ko/docs/concepts/overview/components/" target="_blank">ì¿ ë²„ë„¤í‹°ìŠ¤ ì»´í¬ë„ŒíŠ¸ ì„¤ëª…</a></li>
  <li><a href="https://www.redhat.com/ko/topics/containers/kubernetes-architecture" target="_blank">ì¿ ë²„ë„¤í‹°ìŠ¤ ì•„í‚¤í…ì²˜ ì„¤ëª…</a>
<img src="/assets/images/posts/kubernetes/20230306/589D640F-E2E0-4750-9B73-58187E0F7BB9.png" alt="kubernetes components" />
<img src="/assets/images/posts/kubernetes/20230306/5485F1CF-F476-4537-B8D8-3B2E15FECBD2.png" alt="kubernetes components" /></li>
</ul>

<h2 id="ìš©ì–´-ì •ë¦¬">ìš©ì–´ ì •ë¦¬</h2>
<p><a href="https://kubernetes.io/ko/docs/reference/glossary/?fundamental=true" target="_blank">ìš©ì–´ ì •ë¦¬</a></p>

<ul>
  <li><strong>ì»¨íŠ¸ë¡¤ í”Œë ˆì¸:</strong>Â ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œë¥¼ ì œì–´í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ ëª¨ë“  íƒœìŠ¤í¬ í• ë‹¹ì´ ì‹œì‘ë©ë‹ˆë‹¤.</li>
  <li><strong>ë…¸ë“œ:</strong>Â ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì—ì„œ í• ë‹¹ëœ ìš”ì²­ íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë¨¸ì‹ ì…ë‹ˆë‹¤.</li>
  <li><strong>í¬ë“œ:</strong>Â ë‹¨ì¼ ë…¸ë“œì— ë°°í¬ëœ í•˜ë‚˜ ì´ìƒì˜ ì»¨í…Œì´ë„ˆ ê·¸ë£¹ì…ë‹ˆë‹¤. í¬ë“œì— ìˆëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆëŠ” IP ì£¼ì†Œ, IPC, í˜¸ìŠ¤íŠ¸ ì´ë¦„, ê¸°íƒ€ ë¦¬ì†ŒìŠ¤ë¥¼ ê³µìœ í•©ë‹ˆë‹¤. í¬ë“œëŠ” ê¸°ë³¸ ì»¨í…Œì´ë„ˆì—ì„œ ë„¤íŠ¸ì›Œí¬ì™€ ìŠ¤í† ë¦¬ì§€ë¥¼ ì¶”ìƒí™”í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ë” ì‰½ê²Œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li><strong>ë³µì œ ì»¨íŠ¸ë¡¤ëŸ¬:</strong>Â ì´ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ë™ì¼í•œ í¬ë“œ ë³µì‚¬ë³¸ì˜ ê°œìˆ˜ë¥¼ ì œì–´í•©ë‹ˆë‹¤.</li>
  <li><strong>ì„œë¹„ìŠ¤:</strong>Â í¬ë“œì—ì„œ ì‘ì—… ì •ì˜ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤ í”„ë¡ì‹œëŠ” í´ëŸ¬ìŠ¤í„°ì—ì„œ ë‹¤ë¥¸ ìœ„ì¹˜ë¡œ ì´ë™ëœ ê²½ìš°ë‚˜ êµì²´ëœ ê²½ìš°ì— ìƒê´€ì—†ì´ ì„œë¹„ìŠ¤ ìš”ì²­ì„Â ì ì ˆí•œ í¬ë“œë¡œ ìë™ ìˆ˜ì‹ í•©ë‹ˆë‹¤.</li>
  <li><strong>Kubelet:</strong>Â ì´ ì„œë¹„ìŠ¤ëŠ” ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ë©° ì»¨í…Œì´ë„ˆ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì½ê³ , ì •ì˜ëœ ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë˜ì–´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
  <li><strong>kubectl:</strong>Â ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì»¤ë§¨ë“œ ë¼ì¸ êµ¬ì„± íˆ´ì…ë‹ˆë‹¤.<br />
<br />
<br /></li>
</ul>

<h2 id="ì»¨íŠ¸ë¡¤-í”Œë ˆì¸-ì»´í¬ë„ŒíŠ¸">ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì»´í¬ë„ŒíŠ¸</h2>
<p>ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì»´í¬ë„ŒíŠ¸ëŠ” í´ëŸ¬ìŠ¤í„°ì— ê´€í•œ ì „ë°˜ì ì¸ ê²°ì •(ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤ì¼€ì¤„ë§)ì„ ìˆ˜í–‰í•˜ê³  í´ëŸ¬ìŠ¤í„° ì´ë²¤íŠ¸(ì˜ˆë¥¼ ë“¤ì–´, ë””í”Œë¡œì´ë¨¼íŠ¸ì˜Â <code class="language-plaintext highlighter-rouge">replicas</code>Â í•„ë“œì— ëŒ€í•œ ìš”êµ¬ ì¡°ê±´ì´ ì¶©ì¡±ë˜ì§€ ì•Šì„ ê²½ìš° ìƒˆë¡œìš´Â íŒŒë“œë¥¼ êµ¬ë™ì‹œí‚¤ëŠ” ê²ƒ)ë¥¼ ê°ì§€í•˜ê³  ë°˜ì‘í•©ë‹ˆë‹¤.</p>

<ul>
  <li><strong>kube-apiserver:</strong> API ì„œë²„ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ APIë¥¼ ë…¸ì¶œí•˜ëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì˜ í”„ë¡ íŠ¸ ì—”ë“œ</li>
  <li><strong>etcd:</strong> ëª¨ë“  í´ëŸ¬ìŠ¤í„° ë°ì´í„°(êµ¬ì„± ìš”ì†Œë“¤ì˜ ìƒíƒœ ê°’ ë“±)ë¥¼ ë‹´ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ë’·ë‹¨ì˜ ì €ì¥ì†Œë¡œ ì‚¬ìš©ë˜ëŠ” ì¼ê´€ì„±Â·ê³ ê°€ìš©ì„± í‚¤-ê°’ ì €ì¥ì†Œ</li>
  <li><strong>Kube-scheduler:</strong> ë…¸ë“œê°€ ë°°ì •ë˜ì§€ ì•Šì€ ìƒˆë¡œ ìƒì„±ëœÂ íŒŒë“œë¥¼ ê°ì§€í•˜ê³ , ë…¸ë“œì˜ ìƒíƒœì™€ ìì›, ë ˆì´ë¸”, ìš”êµ¬ ì¡°ê±´ ë“±ì„ ê³ ë ¤í•´ íŒŒë“œë¥¼ ì–´ë–¤ ì›Œì»¤ ë…¸ë“œì— ìƒì„±í•  ê²ƒì¸ì§€ë¥¼ ê²°ì •í•˜ê³  í• ë‹¹</li>
  <li><strong>kube-controller-manager:</strong> ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ì˜¤ë¸Œì íŠ¸ ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
    <ul>
      <li><strong>ë…¸ë“œ ì»¨íŠ¸ë¡¤ëŸ¬:</strong> ë…¸ë“œê°€ ë‹¤ìš´ë˜ì—ˆì„ ë•Œ í†µì§€ì™€ ëŒ€ì‘ì— ê´€í•œ ì±…ì„</li>
      <li><strong>ì¡ ì»¨íŠ¸ë¡¤ëŸ¬:</strong> ì¼íšŒì„± ì‘ì—…ì„ ë‚˜íƒ€ë‚´ëŠ” ì¡ ì˜¤ë¸Œì íŠ¸ë¥¼ ê°ì‹œí•œ ë‹¤ìŒ, í•´ë‹¹ ì‘ì—…ì„ ì™„ë£Œí•  ë•Œê¹Œì§€ ë™ì‘í•˜ëŠ” íŒŒë“œë¥¼ ìƒì„±</li>
      <li><strong>ì—”ë“œí¬ì¸íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬:</strong> ì„œë¹„ìŠ¤ì™€ íŒŒë“œë¥¼ ì—°ê²°</li>
      <li><strong>ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ &amp; í† í° ì»¨íŠ¸ë¡¤ëŸ¬:</strong> ìƒˆë¡œìš´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ëŒ€í•œ ê¸°ë³¸ ê³„ì •ê³¼ API ì ‘ê·¼ í† í°ì„ ìƒì„±<br />
<br />
<br /></li>
    </ul>
  </li>
</ul>

<h2 id="ë…¸ë“œ-ì»´í¬ë„ŒíŠ¸">ë…¸ë“œ ì»´í¬ë„ŒíŠ¸</h2>
<p>ë…¸ë“œ ì»´í¬ë„ŒíŠ¸ëŠ” ë™ì‘ ì¤‘ì¸ íŒŒë“œë¥¼ ìœ ì§€ì‹œí‚¤ê³  ì¿ ë²„ë„¤í‹°ìŠ¤ ëŸ°íƒ€ì„ í™˜ê²½ì„ ì œê³µí•˜ë©°, ëª¨ë“  ë…¸ë“œ ìƒì—ì„œ ë™ì‘í•©ë‹ˆë‹¤.</p>

<ul>
  <li><strong>ë…¸ë“œ:</strong> ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì—ì„œ í• ë‹¹ëœ ìš”ì²­ íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë¨¸ì‹ ì…ë‹ˆë‹¤. (ì„œë²„)</li>
  <li><strong>íŒŒë“œ(pod):</strong> í•œ ê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆë¡œ ì´ë£¨ì–´ì§„ ìµœì†Œ ë‹¨ìœ„</li>
  <li><strong>ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„(CRI, Container Runtime Interface):</strong> íŒŒë“œë¥¼ ì´ë£¨ëŠ” ì»¨í…Œì´ë„ˆì˜ ì‹¤í–‰ì„ ë‹´ë‹¹. í‘œì¤€ ì¸í„°í˜ì´ìŠ¤</li>
  <li><strong>kubelet:</strong> íŒŒë“œì˜ êµ¬ì„± ë‚´ìš©(PodSpec)ì„ ë°›ì•„ì„œ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ìœ¼ë¡œ ì „ë‹¬í•˜ê³ , íŒŒë“œ ì•ˆì˜ ì»¨í…Œì´ë„ˆë“¤ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ ëª¨ë‹ˆí„°ë§</li>
  <li><strong>kube-proxy:</strong> í´ëŸ¬ìŠ¤í„°ì˜ ê°Â ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ í”„ë¡ì‹œë¡œ, ì¿ ë²„ë„¤í‹°ìŠ¤ì˜Â ì„œë¹„ìŠ¤Â ê°œë…ì˜ êµ¬í˜„ë¶€ì…ë‹ˆë‹¤. ë…¸ë“œì˜ ë„¤íŠ¸ì›Œí¬ ê·œì¹™ì„ ìœ ì§€ ê´€ë¦¬í•´ì¤ë‹ˆë‹¤. ì´ ë„¤íŠ¸ì›Œí¬ ê·œì¹™ì´ ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ ì„¸ì…˜ì´ë‚˜ í´ëŸ¬ìŠ¤í„° ë°”ê¹¥ì—ì„œ íŒŒë“œë¡œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ í•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.</li>
  <li><strong>CoreDNS:</strong> í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì»´í“¨íŒ… ì¬ë‹¨ì—ì„œ ë³´ì¦í•˜ëŠ” í”„ë¡œì íŠ¸ë¡œ, ë¹ ë¥´ê³  ìœ ì—°í•œ DNS ì„œë²„. ì¿ ë²„í…Œí‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë„ë©”ì¸ ì´ë¦„ì„ ì´ìš©í•´ í†µì‹ í•˜ëŠ” ë° ì‚¬ìš©í•©ë‹ˆë‹¤.<br />
<br />
<br /></li>
</ul>

<h2 id="íŒŒë“œì˜-ìƒëª…ì£¼ê¸°ë¡œ-ì¿ ë²„ë„¤í‹°ìŠ¤-êµ¬ì„±-ìš”ì†Œ-ì‚´í´ë³´ê¸°">íŒŒë“œì˜ ìƒëª…ì£¼ê¸°ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ êµ¬ì„± ìš”ì†Œ ì‚´í´ë³´ê¸°</h2>
<p><img src="/assets/images/posts/kubernetes/20230306/86DFC708-B0C9-495C-BD60-402EC75D59AC.png" alt="kubernetes components" /></p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">kubectl</code>ì„ í†µí•´ <code class="language-plaintext highlighter-rouge">API ì„œë²„</code>ì— íŒŒë“œ ìƒì„±ì„ ìš”ì²­</li>
  <li>(ì—…ë°ì´íŠ¸ê°€ ìˆì„ ë•Œ ë§ˆë‹¤) <code class="language-plaintext highlighter-rouge">API ì„œë²„</code>ì— ì „ë‹¬ëœ ë‚´ìš©ì´ ìˆìœ¼ë©´ <code class="language-plaintext highlighter-rouge">API ì„œë²„</code>ëŠ” <code class="language-plaintext highlighter-rouge">etcd</code>ì— ì „ë‹¬ëœ ë‚´ìš©ì„ ëª¨ë‘ ê¸°ë¡í•´ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœ ê°’ì„ ìµœì‹ ìœ¼ë¡œ ìœ ì§€í•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">API ì„œë²„</code>ì— íŒŒë“œ ìƒì„±ì´ ìš”ì²­ëœ ê²ƒì„ <code class="language-plaintext highlighter-rouge">ì»¨íŠ¸ë¡¤ëŸ¬ ë§¤ë‹ˆì €</code>ê°€ ì¸ì§€í•˜ë©´ <code class="language-plaintext highlighter-rouge">ì»¨íŠ¸ë¡¤ëŸ¬ ë§¤ë‹ˆì €ëŠ”</code> <code class="language-plaintext highlighter-rouge">íŒŒë“œ</code>ë¥¼ ìƒì„±í•˜ê³ , ì´ ìƒíƒœë¥¼ <code class="language-plaintext highlighter-rouge">APIì„œë²„</code>ì— ì „ë‹¬í•©ë‹ˆë‹¤. ì°¸ê³ ë¡œ ì•„ì§ ì–´ë–¤ ì›Œì»¤ ë…¸ë“œì— íŒŒë“œë¥¼ ì ìš©í• ì§€ëŠ” ê²°ì •ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ íŒŒë“œë§Œ ìƒì„±ëœë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">API ì„œë²„</code>ì— <code class="language-plaintext highlighter-rouge">íŒŒë“œ</code>ê°€ ìƒì„±ëë‹¤ëŠ” ì •ë³´ë¥¼ <code class="language-plaintext highlighter-rouge">ìŠ¤ì¼€ì¤„ëŸ¬</code>ê°€ ì¸ì§€í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">ìŠ¤ì¼€ì¤„ëŸ¬</code>ëŠ” ìƒì„±ëœ <code class="language-plaintext highlighter-rouge">íŒŒë“œ</code>ë¥¼ ì–´ë–¤ <code class="language-plaintext highlighter-rouge">ì›Œì»¤ ë…¸ë“œ</code>ì— ì ìš©í• ì§€ ì¡°ê±´ì„ ê³ ë ¤í•´ ê²°ì •í•˜ê³  í•´ë‹¹ <code class="language-plaintext highlighter-rouge">ì›Œì»¤ ë…¸ë“œ</code>ì— <code class="language-plaintext highlighter-rouge">íŒŒë“œ</code>ë¥¼ ë„ìš°ë„ë¡ ìš”ì²­í•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">APIì„œë²„</code>ì— ì „ë‹¬ëœ ì •ë³´ëŒ€ë¡œ ì§€ì •í•œ <code class="language-plaintext highlighter-rouge">ì›Œì»¤ ë…¸ë“œ</code>ì— <code class="language-plaintext highlighter-rouge">íŒŒë“œ</code>ê°€ ì†í•´ ìˆëŠ”ì§€ <code class="language-plaintext highlighter-rouge">ìŠ¤ì¼€ì¤„ëŸ¬</code>ê°€ <code class="language-plaintext highlighter-rouge">kubelet</code>ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">kubelet</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„</code>ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">íŒŒë“œ</code> ìƒì„± ìš”ì²­í•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">íŒŒë“œ</code> ìƒì„±</li>
  <li><code class="language-plaintext highlighter-rouge">íŒŒë“œ</code> ì‚¬ìš© ê°€ëŠ¥í•œ ìƒíƒœê°€ ë©ë‹ˆë‹¤.<br />
<br />
<br /></li>
</ol>

<div class="notice--info">
<p><strong>ì°¸ê³ </strong><br />
ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì„ ì–¸ì ì¸ ì‹œìŠ¤í…œ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì¦‰, ê° ìš”ì†Œê°€ ì¶”êµ¬í•˜ëŠ” ìƒíƒœë¥¼ ì„ ì–¸í•˜ë©´ í˜„ì¬ ìƒíƒœì™€ ë§ëŠ”ì§€ ì ê²€í•˜ê³  ê·¸ê²ƒì— ë§ì¶”ë ¤ê³  ë…¸ë ¥í•˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.</p>

<p><img src="/assets/images/posts/kubernetes/20230306/C43E9BFE-A4C2-4FC0-AB8C-56EBFAA99BE5.png" alt="ì„ ì–¸ì êµ¬ì¡°" /></p>
</div>
<p><br />
<br />
<br /></p>

<h1 id="-ì˜¤ë¸Œì íŠ¸">ğŸ¯ ì˜¤ë¸Œì íŠ¸</h1>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê´€ì ì—ì„œ íŒŒë“œ, ë””í”Œë¡œì´ë¨¼íŠ¸ ë“±ì€ ìŠ¤í™(spec)ê³¼ ìƒíƒœ(status) ë“±ì˜ ê°’ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê°’ì„ ê°€ì§€ê³  ìˆëŠ” íŒŒë“œì™€ ë””í”Œë¡œì´ë¨¼íŠ¸ ë“±ì„ ê°œë³„ ì†ì„±ì„ í¬í•¨í•´ ë¶€ë¥´ëŠ” ë‹¨ìœ„ë¥¼ ì˜¤ë¸Œì íŠ¸(Object)ë¼ê³  í•©ë‹ˆë‹¤.</p>

<p>ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¸Œì íŠ¸ëŠ” í•˜ë‚˜ì˜ <strong>ì˜ë„ë¥¼ ë‹´ì€ ë ˆì½”ë“œ</strong>ì…ë‹ˆë‹¤. ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê²Œ ë˜ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œìŠ¤í…œì€ ê·¸ ì˜¤ë¸Œì íŠ¸ ìƒì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì§€ì†ì ìœ¼ë¡œ ì‘ë™í•  ê²ƒì…ë‹ˆë‹¤. ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•¨ìœ¼ë¡œì¨, í´ëŸ¬ìŠ¤í„°ì˜ ì›Œí¬ë¡œë“œë¥¼ ì–´ë–¤ í˜•íƒœë¡œ ë³´ì´ê³ ì í•˜ëŠ”ì§€ì— ëŒ€í•´ íš¨ê³¼ì ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œìŠ¤í…œì— ì „ë‹¬í•©ë‹ˆë‹¤.
<br />
<br /></p>

<h2 id="ê¸°ë³¸-ì˜¤ë¸Œì íŠ¸">ê¸°ë³¸ ì˜¤ë¸Œì íŠ¸</h2>
<ul>
  <li><strong>íŒŒë“œ(Pod):</strong> ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì‹¤í–‰ë˜ëŠ” ìµœì†Œ ë‹¨ìœ„, ë…ë¦½ì ì¸ ê³µê°„ê³¼ ì‚¬ìš© ê°€ëŠ¥í•œ IPë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ íŒŒë“œëŠ” 1ê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤.</li>
  <li><strong>ë„¤ì„ìŠ¤í˜ì´ìŠ¤(Namespaces):</strong> ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë“¤ì„ êµ¬ë¶„í•´ ê´€ë¦¬í•˜ëŠ” ê·¸ë£¹ì…ë‹ˆë‹¤.</li>
  <li><strong>ë³¼ë¥¨(Volume):</strong> íŒŒë“œê°€ ìƒì„±ë  ë•Œ íŒŒë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë””ë ‰í„°ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ íŒŒë“œëŠ” ì˜ì†ë˜ëŠ” ê°œë…ì´ ì•„ë‹ˆë¼ ì œê³µë˜ëŠ” ë””ë ‰í† ë¦¬ë„ ì„ì‹œë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ íŒŒë“œê°€ ì‚¬ë¼ì§€ë”ë¼ë„ ì €ì¥ê³¼ ë³´ì¡´ì´ ê°€ëŠ¥í•œ ë””ë ‰í„°ë¦¬ë¥¼ ë³¼ë¥¨ ì˜¤ë¸Œì íŠ¸ë¥¼ í†µí•´ ìƒì„±í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li><strong>ì„œë¹„ìŠ¤(Service):</strong> íŒŒë“œëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ìœ ë™ì ì´ê¸° ë•Œë¬¸ì— ì ‘ì† ì •ë³´ê°€ ê³ ì •ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ íŒŒë“œ ì ‘ì†ì„ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•˜ë„ë¡ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ë‚´/ì™¸ë¶€ë¡œ ì—°ê²°ë©ë‹ˆë‹¤. ìƒˆë¡œìš´ íŒŒë“œê°€ ìƒì„±ë  ë•Œ ë¶€ì—¬ë˜ëŠ” ìƒˆë¡œìš´ IPë¥¼ ê¸°ì¡´ì— ì œê³µí•˜ë˜ ê¸°ëŠ¥ê³¼ ì—°ê²°í•´ ì¤ë‹ˆë‹¤.<br />
<br />
<br /></li>
</ul>

<p>ê¸°ë³¸ ì˜¤ë¸Œì íŠ¸ ë§ê³ ë„ <a href="https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/" target="_blank">ì—¬ëŸ¬ê°€ì§€ ì˜¤ë¸Œì íŠ¸</a>ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.</p>

<h2 id="ë””í”Œë¡œì´ë¨¼íŠ¸">ë””í”Œë¡œì´ë¨¼íŠ¸</h2>
<p>ê¸°ë³¸ ì˜¤ë¸Œì íŠ¸ë§Œìœ¼ë¡œë„ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ ì´ë¥¼ ì¢€ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‘ë™í•˜ë„ë¡ ê¸°ëŠ¥ë“¤ì„ ì¡°í•©í•˜ê³  ì¶”ê°€í•´ êµ¬í˜„í•œ ê²ƒì´ ë””í”Œë¡œì´ë¨¼íŠ¸ ì…ë‹ˆë‹¤. ë””í”Œë¡œì´ë¨¼íŠ¸ ì˜¤ë¸Œì íŠ¸ëŠ” íŒŒë“œì— ê¸°ë³¸ì„ ë‘ê³  ìˆìœ¼ë©°, ë ˆí”Œë¦¬ì¹´ì…‹ ì˜¤ë¸Œì íŠ¸ë¥¼ í•©ì³ ë†“ì€ í˜•íƒœ ì…ë‹ˆë‹¤.<br />
<img src="/assets/images/posts/kubernetes/20230306/701F7E06-6E1B-4DEC-8522-53ED577F2AAE.png" alt="ë””í”Œë¡œì´ë¨¼íŠ¸" />
<br />
<br />
<br /></p>

<h2 id="ë ˆí”Œë¦¬ì¹´ì…‹">ë ˆí”Œë¦¬ì¹´ì…‹</h2>
<p>ë‹¤ìˆ˜ì˜ íŒŒë“œê°€ í•„ìš”í•œë° ì´ë¥¼ í•˜ë‚˜ì”© ìƒì„±í•œë‹¤ë©´ ë§¤ìš° ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” ë‹¤ìˆ˜ì˜ íŒŒë“œë¥¼ ë§Œë“œëŠ” ë ˆí”Œë¦¬ì¹´ì…‹ ì˜¤ë¸Œì íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ì–´ íŒŒë“œë¥¼ 3ê°œ ë§Œë“¤ê² ë‹¤ê³  ë ˆí”Œë¦¬ì¹´ì…‹ì— ì„ ì–¸í•˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ ë§¤ë‹ˆì €ì™€ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì›Œì»¤ ë…¸ë“œì— íŒŒë“œ 3ê°œë¥¼ ë§Œë“¤ë„ë¡ ì„ ì–¸í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë ˆí”Œë¦¬ì¹´ì…‹ì€ íŒŒë“œ ìˆ˜ë¥¼ ë³´ì¥í•˜ëŠ” ê¸°ëŠ¥ë§Œ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ë¡¤ë§ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ ë“±ì´ ì¶”ê°€ëœ ë””í”Œë¡œì´ë¨¼íŠ¸ë¥¼ ì‚¬ìš©í•´ íŒŒë“œ ìˆ˜ë¥¼ ê´€ë¦¬í•˜ê¸°ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.
<img src="/assets/images/posts/kubernetes/20230306/19156B09-0770-4580-A1E8-47EE207F990E.png" alt="ë ˆí”Œë¦¬ì¹´ì…‹" />
<br />
<br />
<br /></p>

<h2 id="ì˜¤ë¸Œì íŠ¸-ìŠ¤í™">ì˜¤ë¸Œì íŠ¸ ìŠ¤í™</h2>
<p>ì—¬ëŸ¬ê°€ì§€ ì„¤ì •ì„ ì»¤ë§¨ë“œ ëª…ë ¹ìœ¼ë¡œë§Œìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ëŸ° ì„¤ì •ì€ íŒŒì¼ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë•Œ ì‘ì„±í•˜ëŠ” íŒŒì¼ì„ ì˜¤ë¸Œì íŠ¸ ìŠ¤í™ì´ë¼ê³  í•©ë‹ˆë‹¤. ì˜¤ë¸Œì íŠ¸ ìŠ¤í™ì€ ì¼ë°˜ì ìœ¼ë¡œ ì•¼ë¯ˆ(YAML) ë¬¸ë²•ìœ¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.</p>

<p>ë‹¤ìŒì€ <a href="https://kubernetes.io/ko/docs/concepts/workloads/controllers/" target="_blank">ì˜¤ë¸Œì íŠ¸ ìŠ¤í™ì˜ ì˜ˆì‹œ</a>ì…ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>   <span class="c1"># ì¢…ë¥˜</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nginx-deployment</span>     <span class="c1"># ë””í”Œë¡œì´ë¨¼íŠ¸ì˜ ì´ë¦„</span>
  <span class="na">labels</span><span class="pi">:</span>                    <span class="c1"># ë””í”Œë¡œì´ë¨¼íŠ¸ì˜ ë ˆì´ë¸”</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">3</span>       <span class="c1"># ë ˆí”Œë¦¬ì¹´ ì…‹ì„ ëª‡ ê°œ ìƒì„±í• ì§€ ê²°ì •</span>
  <span class="na">selector</span><span class="pi">:</span>         <span class="c1"># ì…€ë ‰í„°ì˜ ë ˆì´ë¸” ì§€ì •</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>       <span class="c1"># í…œí”Œë¦¿ì˜ ë©”íƒ€ë°ì´í„° ì§€ì •</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
    <span class="na">spec</span><span class="pi">:</span>           <span class="c1"># í…œí”Œë¦¿ì—ì„œ ì‚¬ìš©í•  ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ì§€ì •</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nginx</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:1.14.2</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">80</span>
</code></pre></div></div>
<p><br />
<br />
<br />
<br />
<br />
<br /></p>

<h1 id="ï¸-ì°¸ê³ ì‚¬ì´íŠ¸">ğŸ™‡ğŸ»â€â™‚ï¸ ì°¸ê³ ì‚¬ì´íŠ¸</h1>
<ul>
  <li><a href="https://product.kyobobook.co.kr/detail/S000001834629" target="_blank">ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤/ë„ì»¤</a></li>
  <li><a href="https://kubernetes.io/ko/docs/home/" target="_blank">ì¿ ë²„ë„¤í‹°ìŠ¤ ë ˆí¼ëŸ°ìŠ¤</a></li>
  <li><a href="https://subicura.com/k8s/guide/#%E1%84%80%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%83%E1%85%B3" target="_blank">ì¿ ë²„ë„¤í‹°ìŠ¤ ê°€ì´ë“œ</a></li>
  <li><a href="https://kimjingo.tistory.com/category/About/Kubernetes" target="_blank">ê¹€ì§•ì–´ì˜ Devlog</a></li>
</ul>]]></content><author><name>Oh</name></author><category term="Kubernetes" /><category term="Kubernetes" /><category term="k8s" /><summary type="html"><![CDATA[ğŸ’¾ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê¸°ë³¸ ê°œë…ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">ğŸ³ Docker Compose ë„¤íŠ¸ì›Œí¬</title><link href="http://localhost:4000/docker/docker-compose-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/" rel="alternate" type="text/html" title="ğŸ³ Docker Compose ë„¤íŠ¸ì›Œí¬" /><published>2023-02-28T00:00:00+09:00</published><updated>2023-02-28T00:00:00+09:00</updated><id>http://localhost:4000/docker/docker-compose-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC</id><content type="html" xml:base="http://localhost:4000/docker/docker-compose-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/"><![CDATA[<p>ğŸ’¾ ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆë¡œ êµ¬ì„±ëœ Docker Compose ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì»¨í…Œì´ë„ˆ ê°„ì˜ í†µì‹ ì„ ì„¤ëª…í•©ë‹ˆë‹¤.</p>

<p><br /></p>

<h2 id="ë””í´íŠ¸-ë„¤íŠ¸ì›Œí¬">ë””í´íŠ¸ ë„¤íŠ¸ì›Œí¬</h2>
<p>ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">Docker Compose</code>ëŠ” í•˜ë‚˜ì˜ ë””í´íŠ¸ ë„¤íŠ¸ì›Œí¬ì— ëª¨ë“  ì»¨í…Œì´ë„ˆë¥¼ ì—°ê²°í•©ë‹ˆë‹¤. ë””í´íŠ¸ ë„¤íŠ¸ì›Œí¬ì˜ ì´ë¦„ì€Â <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>ê°€ ìœ„ì¹˜í•œ ë””ë ‰í† ë¦¬ ì´ë¦„ ë’¤ì—Â <code class="language-plaintext highlighter-rouge">_default</code>ê°€ ë¶™ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë””ë ‰í† ë¦¬ ì´ë¦„ì´Â <code class="language-plaintext highlighter-rouge">our_app</code>ë¼ë©´ ë””í´íŠ¸ ë„¤íŠ¸ì›Œí¬ ì´ë¦„ì€Â <code class="language-plaintext highlighter-rouge">our_app_default</code>ê°€ ë©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">## /path/our_app ê²½ë¡œ</span>
<span class="nv">$ </span>docker-compose up <span class="nt">-d</span>

Creating network <span class="s2">"our_app_default"</span> with the default driver
Creating our_app_db_1 ... <span class="k">done
</span>Creating our_app_web_1 ... <span class="k">done</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">Docker Compose</code>ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‚´ë¦´ ë•ŒëŠ” ë°˜ëŒ€ ìˆœì„œë¡œ ë¨¼ì € ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œ/ì œê±°í•´ë†“ê³  ì œì¼ ë§ˆì§€ë§‰ì— ë„¤íŠ¸ì›Œí¬ë¥¼ ì œê±°í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose down
Stopping our_app_web_1 ... <span class="k">done
</span>Stopping our_app_db_1  ... <span class="k">done
</span>Removing our_app_web_1 ... <span class="k">done
</span>Removing our_app_db_1  ... <span class="k">done
</span>Removing network our_app_default
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ê°„-í†µì‹ ">ì»¨í…Œì´ë„ˆ ê°„ í†µì‹ </h2>

<p><strong>ê°™ì€ ë„¤íŠ¸ì›Œí¬ ê°„ í†µì‹ </strong><br />
ê°™ì€ ë„¤íŠ¸ì›Œí¬ ì•ˆì—ì„œ ì»¨í…Œì´ë„ˆ ê°„ì˜ í†µì‹ ì€ í˜¸ìŠ¤íŠ¸ëª…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë§Œì•½ í˜¸ìŠ¤íŠ¸ëª…ì„ ì§€ì •í•˜ì§€ ì•Šì•˜ë‹¤ë©´ ì„œë¹„ìŠ¤ì˜ ì´ë¦„ì´ í˜¸ìŠ¤íŠ¸ëª…ì´ ë©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose <span class="nb">exec </span>web ping db

PING db <span class="o">(</span>192.168.48.2<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
64 bytes from our_app_db_1.our_app_default <span class="o">(</span>192.168.48.2<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.094 ms
64 bytes from our_app_db_1.our_app_default <span class="o">(</span>192.168.48.2<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span>2 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.162 ms
</code></pre></div></div>
<p><br /></p>

<p><strong>í˜¸ì¶œ ìœ„ì¹˜ì— ë”°ë¥¸ í†µì‹ </strong><br />
ì»¨í…Œì´ë„Œ ê°„ í†µì‹ ì—ì„œ ì£¼ì˜í•  ì ì€ ì ‘ì†í•˜ëŠ” ìœ„ì¹˜ê°€ ë””í´íŠ¸ ë„¤íŠ¸ì›Œí¬ ë‚´ë¶€ëƒ ì™¸ë¶€ëƒì— ë”°ë¼ì„œ í¬íŠ¸(port)ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>services:
  web:
    build: <span class="nb">.</span>
    ports:
      - <span class="s2">"8001:8000"</span>
</code></pre></div></div>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°ì—ì„œ web ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆ ì ‘ì†</span>
<span class="nv">$ </span>curl <span class="nt">-I</span> localhost:8001

HTTP/1.1 200 OK
Date: Fri, 05 Jun 2020 02:05:10 GMT
Server: WSGIServer/0.2 CPython/3.8.2
Content-Type: text/html
X-Frame-Options: DENY
Content-Length: 16351
X-Content-Type-Options: nosniff
</code></pre></div></div>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ê°™ì€ ë„¤íŠ¸ì›Œí¬ ë‚´ì˜ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œ web ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆ ì ‘ì†</span>
<span class="nv">$ </span>docker-compose <span class="nb">exec </span>alpine curl <span class="nt">-I</span> web:8000

HTTP/1.1 200 OK
Date: Fri, 05 Jun 2020 02:13:46 GMT
Server: WSGIServer/0.2 CPython/3.8.2
Content-Type: text/html
X-Frame-Options: DENY
Content-Length: 16351
X-Content-Type-Options: nosniff
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="ì»¤ìŠ¤í…€-ë„¤íŠ¸ì›Œí¬-ì¶”ê°€">ì»¤ìŠ¤í…€ ë„¤íŠ¸ì›Œí¬ ì¶”ê°€</h2>
<p><code class="language-plaintext highlighter-rouge">Docker Compose</code>ëŠ” ë””í´íŠ¸ ë„¤íŠ¸ì›Œí¬ ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ë„ í•„ìš”ì— ë”°ë¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8000:8000"</span>
    <span class="na">networks</span><span class="pi">:</span> <span class="c1"># ì„œë¹„ìŠ¤ì—ì„œ ì—°ê²°í•  ë„¤íŠ¸ì›Œí¬ ì‘ì„±</span>
      <span class="pi">-</span> <span class="s">default</span>
      <span class="pi">-</span> <span class="s">our_net</span>

  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">postgres</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">POSTGRES_USER=postgres</span>
      <span class="pi">-</span> <span class="s">POSTGRES_PASSWORD=postgres</span>

<span class="c1"># ë„¤íŠ¸ì›Œí¬ ì¶”ê°€</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">our_net</span><span class="pi">:</span>
    <span class="na">driver</span><span class="pi">:</span> <span class="s">bridge</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Docker Compose</code>ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ ë‘ê°œì˜ ë„¤íŠ¸ì›Œí¬ê°€ ìƒì„±ë˜ëŠ”ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose up <span class="nt">-d</span>
Creating network <span class="s2">"our_app_default"</span> with the default driver
Creating network <span class="s2">"our_app_our_net"</span> with driver <span class="s2">"bridge"</span>
...

<span class="nv">$ </span>our_app docker network <span class="nb">ls
</span>NETWORK ID          NAME                   DRIVER              SCOPE
f1859120a0c3        bridge                 bridge              <span class="nb">local
</span>95b00551745b        host                   host                <span class="nb">local
</span>1f7202baa40a        none                   null                <span class="nb">local
</span>2682634e6535        our_app_default        bridge              <span class="nb">local
</span>525403b38bbe        our_app_our_net        bridge              <span class="nb">local</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">our_net</code>ì€ <code class="language-plaintext highlighter-rouge">Docker Compose</code> ë‚´ë¶€ì—ì„œ ì •ì˜ëœ ë„¤íŠ¸ì›Œí¬ ì´ë¯€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‚´ë¦´ ë•Œ ë””í´íŠ¸ ë„¤íŠ¸ì›Œí¬ì™€ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose down

Stopping our_app_web_1 ... <span class="k">done
</span>Stopping our_app_db_1  ... <span class="k">done
</span>Removing our_app_web_1 ... <span class="k">done
</span>Removing our_app_db_1  ... <span class="k">done
</span>Removing network our_app_default
Removing network our_app_our_net
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="ì™¸ë¶€-ë„¤íŠ¸ì›Œí¬-ì‚¬ìš©">ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ì‚¬ìš©</h2>
<p><code class="language-plaintext highlighter-rouge">Docker Compose</code>ê°€ ì œê³µí•˜ëŠ” ë””í´íŠ¸ ë„¤íŠ¸ì›Œí¬ ëŒ€ì‹ ì— ì™¸ë¶€ì—ì„œ ë¯¸ë¦¬ ìƒì„±í•´ë†“ì€ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">our_net</code>ì´ë¼ëŠ” ë„¤íŠ¸ì›Œí¬ ìƒì„±í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker network create our_net
6d791b927c8c151c45a10ac13c62f3571ecf38a90756fd2ca1c62b7d3de804e8
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">docker-compose.yml</code>ì—ì„œÂ ë„¤íŠ¸ì›Œí¬ì˜ ì˜µì…˜ì—Â <code class="language-plaintext highlighter-rouge">our_net</code>ë„¤íŠ¸ì›Œí¬ì— <code class="language-plaintext highlighter-rouge">external</code>ì„ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1ë²ˆ ë°©ë²™</span>
version: <span class="s1">'3.7'</span>

services:
  web:
    build: <span class="nb">.</span>
    ports:
      - <span class="s2">"8000:8000"</span>
    networks:
      - our_net

networks:
  our_net:
    driver: bridge
    external: <span class="nb">true</span>
</code></pre></div></div>

<div class="notice--warning">
<p><strong>ê²½ê³ </strong><br />
ì™¸ë¶€ì—ì„œ ìƒì„±ëœ ë„¤íŠ¸ì›Œí¬ì´ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">Docker Compose</code> ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‚´ë¦´ ë•Œ í•´ë‹¹ ë„¤íŠ¸ì›Œí¬ê°€ í•¨ê»˜ ì‚­ì œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose down

Stopping our_app_web_1 ... <span class="k">done
</span>Stopping our_app_db_1  ... <span class="k">done
</span>Removing our_app_web_1 ... <span class="k">done
</span>Removing our_app_db_1  ... <span class="k">done
</span>Network our_net is external, skipping
</code></pre></div></div>

</div>

<h2 id="ë ˆí¼ëŸ°ìŠ¤-ì°¸ê³ ">ë ˆí¼ëŸ°ìŠ¤ ì°¸ê³ </h2>
<ul>
  <li><a href="https://docs.docker.com/compose/networking/" target="_blank">docker-compose ë„¤íŠ¸ì›Œí¬</a></li>
  <li><a href="https://docs.docker.com/compose/compose-file/#network_mode" target="_blank">docker-compose ë„¤íŠ¸ì›Œí¬ ì„¤ì •</a>
<br />
<br /></li>
</ul>

<h2 id="ï¸-ì°¸ê³ ì‚¬ì´íŠ¸">ğŸ™‡ğŸ»â€â™‚ï¸ ì°¸ê³ ì‚¬ì´íŠ¸</h2>
<ul>
  <li><a href="https://www.daleseo.com/?tag=Docker" target="_blank">https://www.daleseo.com</a></li>
</ul>]]></content><author><name>Oh</name></author><category term="Docker" /><category term="Docker" /><category term="Docker Compose" /><category term="Container" /><summary type="html"><![CDATA[ğŸ’¾ ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆë¡œ êµ¬ì„±ëœ Docker Compose ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì»¨í…Œì´ë„ˆ ê°„ì˜ í†µì‹ ì„ ì„¤ëª…í•©ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">ğŸ³ Docker Compose ëª…ë ¹ì–´</title><link href="http://localhost:4000/docker/docker-compose-%EB%AA%85%EB%A0%B9%EC%96%B4/" rel="alternate" type="text/html" title="ğŸ³ Docker Compose ëª…ë ¹ì–´" /><published>2023-02-27T00:00:00+09:00</published><updated>2023-02-27T00:00:00+09:00</updated><id>http://localhost:4000/docker/docker-compose-%EB%AA%85%EB%A0%B9%EC%96%B4</id><content type="html" xml:base="http://localhost:4000/docker/docker-compose-%EB%AA%85%EB%A0%B9%EC%96%B4/"><![CDATA[<p>ğŸ’¾ Docker Compose ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì œì–´í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
<br /></p>

<h2 id="íŒŒì¼-ì§€ì •">íŒŒì¼ ì§€ì •</h2>
<p><code class="language-plaintext highlighter-rouge">Docker Compose</code>ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì»¤ë§¨ë“œê°€ ì‹¤í–‰í•˜ëŠ” ë””ë ‰í† ë¦¬ì— ìˆëŠ”Â <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>Â ë˜ëŠ”Â <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code>ë¥¼ ì„¤ì • íŒŒì¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ì´ë‚˜ ê²½ë¡œì˜ íŒŒì¼ì„ Docker Compose ì„¤ì • íŒŒì¼ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´Â <code class="language-plaintext highlighter-rouge">-f</code>Â ì˜µì…˜ìœ¼ë¡œ ëª…ì‹œë¥¼ í•´ì¤ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># -f ì˜µì…˜ìœ¼ë¡œ íŒŒì¼ì¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker-compose <span class="nt">-f</span> docker-compose-local.yml up

<span class="c"># -f ì˜µì…˜ì€ ì—¬ëŸ¬ ê°œì˜ ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•  ë•Œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
<span class="c"># ì´ ë•ŒëŠ” ë‚˜ì¤‘ì— ë‚˜ì˜¤ëŠ” ì„¤ì •ì´ ì•ì— ë‚˜ì˜¤ëŠ” ì„¤ì •ë³´ë‹¤ ìš°ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker-compose <span class="nt">-f</span> docker-compose.yml <span class="nt">-f</span> docker-compose-test.yml up
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ìƒì„±ì‹¤í–‰">ì»¨í…Œì´ë„ˆ ìƒì„±/ì‹¤í–‰</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose up</code> ì»¤ë§¨ë“œëŠ” <code class="language-plaintext highlighter-rouge">Docker Compose</code>ì— ì •ì˜ë˜ì–´ ìˆëŠ” ëª¨ë“  ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ í•œ ë²ˆì— ìƒì„±í•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># -d ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ë„ì›ë‹ˆë‹¤.</span>
<span class="c"># -d ì˜µì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ í„°ë¯¸ë„ì— ë¡œê·¸ê°€ ì¶œë ¥ë˜ê³ , Ctrl+cë¥¼ ì‚¬ìš©í•˜ì—¬ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker-compose up <span class="nt">-d</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ì •ì§€ì‚­ì œ">ì»¨í…Œì´ë„ˆ ì •ì§€/ì‚­ì œ</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose down</code>Â ì»¤ë§¨ë“œëŠ” <code class="language-plaintext highlighter-rouge">Docker Compose</code>ì— ì •ì˜ë˜ì–´ ìˆëŠ” ëª¨ë“  ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ í•œ ë²ˆì— ì •ì§€ì‹œí‚¤ê³  ì‚­ì œí•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># -v ì˜µì…˜ì„ ì£¼ë©´ docker-compose.ymlì— ì •ì˜ëœ ë³¼ë¥¨ì„ ì‚­ì œí•˜ë©° down í•©ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker-compose down <span class="nt">-v</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ì‹œì‘">ì»¨í…Œì´ë„ˆ ì‹œì‘</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose start</code>Â ì»¤ë§¨ë“œëŠ” ë‚´ë ¤ê°€ ìˆëŠ” ìˆëŠ” íŠ¹ì • ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ì˜¬ë¦¬ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">docker-compose up</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•´ë„ ë‚´ë ¤ê°„ ì„œë¹„ìŠ¤ë¥¼ ì•Œì•„ì„œ ì˜¬ë ¤ì¤ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose start web
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ì •ì§€">ì»¨í…Œì´ë„ˆ ì •ì§€</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose stop</code>Â ì»¤ë§¨ë“œëŠ”Â ëŒì•„ê¸°ê³  ìˆëŠ” íŠ¹ì • ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ì •ì§€ì‹œí‚¤ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose stop web
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ì¡°íšŒ">ì»¨í…Œì´ë„ˆ ì¡°íšŒ</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose ps</code>Â ì»¤ë§¨ë“œëŠ” <code class="language-plaintext highlighter-rouge">Docker Compose</code>ì— ì •ì˜ë˜ì–´ ìˆëŠ” ëª¨ë“  ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆ ëª©ë¡ì„ ì¡°íšŒí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose ps

      Name                    Command               State           Ports
<span class="nt">----------------------------------------------------------------------------------</span>
django-app_db_1    docker-entrypoint.sh postgres    Up      5432/tcp
django-app_web_1   python manage.py runserver ...   Up      0.0.0.0:8000-&gt;8000/tcp
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ë¡œê·¸">ì»¨í…Œì´ë„ˆ ë¡œê·¸</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose logs</code>Â ì»¤ë§¨ë“œëŠ” ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ë¥¼ í™•ì¸í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ë©°, ë³´í†µÂ <code class="language-plaintext highlighter-rouge">-f</code> ì˜µì…˜ì„ ë¶™ì—¬ì„œ ì‹¤ì‹œê°„ ë¡œê·¸ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">-f</code> ë‹¤ìŒì— ì„œë¹„ìŠ¤ëª…ì„ ì…ë ¥í•˜ë©´ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ ë¡œê·¸ë§Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose logs <span class="nt">-f</span> web

web_1  | May 30, 2020 - 22:16:29
web_1  | Django version 3.0.6, using settings <span class="s1">'our_project.settings'</span>
web_1  | Starting development server at http://0:8000/
web_1  | Quit the server with CONTROL-C.
</code></pre></div></div>
<p><br /></p>

<h2 id="ëª…ë ¹ì–´-ì „ë‹¬">ëª…ë ¹ì–´ ì „ë‹¬</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose exec</code>Â ì»¤ë§¨ë“œëŠ” ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ëŒ€ìƒìœ¼ë¡œ ì–´ë–¤ ëª…ë ¹ì–´ë¥¼ ë‚ ë¦´ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose <span class="nb">exec</span> <span class="nt">-it</span> web /bin/bash
</code></pre></div></div>
<p><br /></p>

<h2 id="ì¼íšŒì„±-ëª…ë ¹ì–´">ì¼íšŒì„± ëª…ë ¹ì–´</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose run</code> ì»¤ë§¨ë“œëŠ” ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆì˜ íŠ¹ì • ëª…ë ¹ì–´ë¥¼ ì¼íšŒì„±ìœ¼ë¡œ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker compose run web bash
</code></pre></div></div>
<p><br /></p>

<h2 id="ì„¤ì •-í™•ì¸">ì„¤ì • í™•ì¸</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose config</code> ì»¤ë§¨ë“œëŠ” <code class="language-plaintext highlighter-rouge">Docker Compose</code> ì„¤ì •ì„ í™•ì¸í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.Â <code class="language-plaintext highlighter-rouge">-f</code>Â ì˜µì…˜ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•  ë•Œ, ìµœì¢…ì ìœ¼ë¡œ ì–´ë–»ê²Œ ì„¤ì •ì´ ì ìš©ë˜ëŠ”ì§€ í™•ì¸í•´ë³¼ ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker compose config
</code></pre></div></div>
<p><br /></p>

<h2 id="ë ˆí¼ëŸ°ìŠ¤-ì°¸ê³ ">ë ˆí¼ëŸ°ìŠ¤ ì°¸ê³ </h2>
<p><a href="https://docs.docker.com/compose/reference/" target="_blank">docker-compose</a>
<br />
<br /></p>

<h2 id="ï¸-ì°¸ê³ ì‚¬ì´íŠ¸">ğŸ™‡ğŸ»â€â™‚ï¸ ì°¸ê³ ì‚¬ì´íŠ¸</h2>
<ul>
  <li><a href="https://www.daleseo.com/?tag=Docker" target="_blank">https://www.daleseo.com</a></li>
</ul>]]></content><author><name>Oh</name></author><category term="Docker" /><category term="Docker" /><category term="Docker Compose" /><category term="Container" /><summary type="html"><![CDATA[ğŸ’¾ Docker Compose ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì œì–´í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">ğŸ³ Docker Compose íŒŒì¼ êµ¬ì„± ìš”ì†Œ</title><link href="http://localhost:4000/docker/docker-compose-%ED%8C%8C%EC%9D%BC-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C/" rel="alternate" type="text/html" title="ğŸ³ Docker Compose íŒŒì¼ êµ¬ì„± ìš”ì†Œ" /><published>2023-02-22T00:00:00+09:00</published><updated>2023-02-22T00:00:00+09:00</updated><id>http://localhost:4000/docker/docker-compose-%ED%8C%8C%EC%9D%BC-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C</id><content type="html" xml:base="http://localhost:4000/docker/docker-compose-%ED%8C%8C%EC%9D%BC-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C/"><![CDATA[<p>ğŸ’¾ ë„ì»¤ ì»´í¬ì¦ˆì˜ ê¸°ë³¸ êµ¬ì„± ìš”ì†Œë£° ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ìì£¼ ì‚¬ìš©í•˜ëŠ” í•­ëª©ë§Œ ì •ë¦¬í•˜ì˜€ê³ , ë‹¤ë¥¸ í•­ëª©ë“¤ì„ í™•ì¸í•˜ì‹œë ¤ë©´ <a href="https://docs.docker.com/compose/compose-file" target="_blank">docker-compose</a>ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>

<p><br /></p>

<h1 id="docker-composeë€">Docker composeë€?</h1>
<p>Docker Composeë¥¼ ì´ìš©í•˜ë©´ ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆ(container)ë¡œ êµ¬ì„±ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ íŒŒì¼(YAML)ì— ì •ì˜í•´ë†“ê³  ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ í•œ ë²ˆì— ì˜¬ë¦¬ê±°ë‚˜ ë‚´ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Docker ComposeëŠ” ê¸°ë³¸ì ìœ¼ë¡œÂ <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>Â íŒŒì¼ì„ ì„¤ì • íŒŒì¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
<br />
<br /></p>

<h2 id="ê¸°ë³¸-êµ¬ì¡°">ê¸°ë³¸ êµ¬ì¡°</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose.yml</code>Â íŒŒì¼ì€ ëŒ€ëµì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ê°–ìŠµë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.7"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="c1"># ì»¨í…Œì´ë„ˆ ì„œë¹„ìŠ¤, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •</span>
  <span class="na">db</span><span class="pi">:</span>
    <span class="c1"># ì»¨í…Œì´ë„ˆ ì„œë¹„ìŠ¤, ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="c1"># ë„¤íŠ¸ì›Œí¬ ì„¤ì •</span>
<span class="na">volumes</span><span class="pi">:</span>
  <span class="c1"># ë³¼ë¥¨ ì„¤ì •</span>
</code></pre></div></div>
<p>Docker Composeì—ì„œ ì„œë¹„ìŠ¤ëŠ” ë…ë¦½ëœ ì»¨í…Œì´ë„ˆì—ì„œ ëŒì•„ê°€ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì„± ìš”ì†Œë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. ê°€ì¥ ë¨¼ì € í”„ë¡œì íŠ¸ì—ì„œ ê°œë°œí•˜ê³  ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ìì²´ê°€ ì„œë¹„ìŠ¤ê°€ ë  ê²ƒì´ê³ , ê·¸ ë°–ì— í•´ë‹¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì˜ì¡´í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë“±ë„ ì„œë¹„ìŠ¤ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¿ë§Œ ì•„ë‹ˆë¼ ì •ìƒì ìœ¼ë¡œ êµ¬ë™ë˜ê¸° ìœ„í•´ì„œ í•„ìš”í•œ ê¸°ë°˜ ì‹œìŠ¤í…œê¹Œì§€ Docker Composeë¡œ ì„¤ì •í•œë‹¤ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤. 
<br />
<br /></p>

<h2 id="env-íŒŒì¼">.env íŒŒì¼</h2>
<p><code class="language-plaintext highlighter-rouge">docker-compose.yml</code> íŒŒì¼ê³¼ ê°™ì€ ê²½ë¡œì— <code class="language-plaintext highlighter-rouge">.env</code> íŒŒì¼ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">.env </code>íŒŒì¼ì— í™˜ê²½ë³€ìˆ˜ë¥¼ ì •ì˜ í•˜ë©´ <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># .env

MY_ENV="prod"
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># docker-compose.yml</span>
<span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.7'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">web/</span>
      <span class="na">args</span><span class="pi">:</span>
        <span class="na">PROFILE</span><span class="pi">:</span> <span class="s">${MY_ENV}</span>
</code></pre></div></div>
<p><br />
<br />
<br />
<br /></p>

<h1 id="êµ¬ì„±-ìš”ì†Œ">êµ¬ì„± ìš”ì†Œ</h1>
<p><code class="language-plaintext highlighter-rouge">docker-compose.yml</code>ì‘ì„±ì‹œ ìì£¼ ì‚¬ìš©í•˜ëŠ” í•­ëª©ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.
<br /></p>

<h2 id="build">build</h2>
<p><code class="language-plaintext highlighter-rouge">build</code>Â í•­ëª©ì€ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ ìš©ë„ë¡œ,Â <code class="language-plaintext highlighter-rouge">Dockerfile</code>ì´ ìœ„ì¹˜í•˜ëŠ” ê²½ë¡œë¥¼ ì§€ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## docker-compose.ymlÂ íŒŒì¼ê³¼ ë™ì¼í•œ ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜í•œÂ Dockerfile ì„ ì‚¬ìš©í•´ì„œ web ì„œë¹„ìŠ¤ì˜ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œ</span>
<span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.7'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Dockerfileì´ ì•„ë‹Œ ë‹¤ë¥¸ ì´ë¦„ì˜ íŒŒì¼ë¡œ ë¹Œë“œë¥¼ í•˜ê³  ì‹¶ê±°ë‚˜, ë¹Œë“œ ì¸ìë¥¼ ë„˜ê²¨ì•¼ í•˜ëŠ” ê²½ìš°</span>
<span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.7'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">./app</span>
      <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">Dockerfile-dev</span>
      <span class="na">args</span><span class="pi">:</span>
        <span class="na">arg1</span><span class="pi">:</span> <span class="s2">"</span><span class="s">development"</span>
<span class="err">	</span>    <span class="na">arg2</span><span class="pi">:</span> <span class="s2">"</span><span class="s">docker"</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="image">image</h2>
<p>í”„ë¡œì íŠ¸ì—ì„œ ì§ì ‘ ê°œë°œí•˜ì§€ ì•ŠëŠ” ë°ì´í„°ë² ì´ìŠ¤ì™€ ê°™ì€ ê²½ìš°ì—ëŠ”, ì´ë¯¸ì§€ë¥¼ ì§ì ‘ ë¹Œë“œí•˜ëŠ” ëŒ€ì‹ ì— ì´ë¯¸ì§€ ì €ì¥ì†Œ(repository)ë¡œ ë¶€í„° ì´ë¯¸ì§€ë¥¼ ë‚´ë ¤ë°›ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># image í•­ëª©ì€ ì´ë¯¸ì§€ ì €ì¥ì†Œë¡œ ë¶€í„° ë‚´ë ¤ë°›ì„ ì´ë¯¸ì§€ì˜ ì´ë¦„ê³¼ íƒœê·¸ë¥¼ ëª…ì‹œí•˜ëŠ”ë° ì‚¬ìš©ë©</span>
<span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.7'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">postgres:13</span>
  <span class="na">cache</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">redis</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="ports">ports</h2>
<p><code class="language-plaintext highlighter-rouge">ports</code>Â í•­ëª©ì€ ì™¸ë¶€ë¡œ ë…¸ì¶œì‹œí‚¬ í¬íŠ¸ì˜ ë§µí•‘ì„ ëª…ì‹œí•©ë‹ˆë‹¤. ë°”ì¸ë“œ(bind)ê°€ í•„ìš”í•œ í˜¸ìŠ¤íŠ¸ ì™¸ë¶€ í¬íŠ¸ì™€ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ í¬íŠ¸ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8000:8000"</span>
  <span class="na">db</span><span class="pi">:</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">5432:5432"</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="volumes">volumes</h2>
<p><code class="language-plaintext highlighter-rouge">volumes</code>Â í•­ëª©ì€ ë³¼ë¥¨ ì„¤ì •ì„ ìœ„í•´ ì“°ì…ë‹ˆë‹¤. ë§ˆìš´íŠ¸(mount)ê°€ í•„ìš”í•œ í˜¸ìŠ¤íŠ¸ì˜ ê²½ë¡œì™€ ì»¨í…Œì´ë„ˆì˜ ê²½ë¡œë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># í˜¸ìŠ¤íŠ¸ì˜ ê²½ë¡œë¡œ ë³¼ë¥¨ ì„¤ì •</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.:/web</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ë¯¸ë¦¬ ìƒì„±í•œ docker volumeìœ¼ë¡œ ë³¼ë¥¨ ì„¤ì •</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">frontend</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">node:lts</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">myapp:/home/node/app</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">myapp</span><span class="pi">:</span>
    <span class="na">external</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="depends_on">depends_on</h2>
<p><code class="language-plaintext highlighter-rouge">depends_on</code> í•­ëª©ì€ ì„œë¹„ìŠ¤ ê°„ ì˜ì¡´ ê´€ê³„ë¥¼ ì§€ì •í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì˜¬ë¼ì˜¤ê¸° ì „ì— ë°ì´í„°ë² ì´ìŠ¤, ë ˆë””ìŠ¤ ì„œë¹„ìŠ¤ê°€ ë¨¼ì € ì˜¬ë¼ì™€ì•¼ í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.7"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">db</span>
      <span class="pi">-</span> <span class="s">redis</span>
  <span class="na">redis</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">redis</span>
  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">postgres</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="command">command</h2>
<p><code class="language-plaintext highlighter-rouge">command</code>Â í•­ëª©ì€ í•´ë‹¹ ì„œë¹„ìŠ¤ê°€ ì˜¬ë¼ì˜¬ ë•ŒÂ <code class="language-plaintext highlighter-rouge">Dockerfile</code> ì˜Â <code class="language-plaintext highlighter-rouge">CMD</code>Â ëª…ë ¹ë¬¸ì„ ë¬´ì‹œí•˜ê³  ì‹¤í–‰í•  ëª…ë ¹ì–´ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">node .</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="environment">environment</h2>
<p><code class="language-plaintext highlighter-rouge">environment</code>Â í•­ëª©ì€ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
   <span class="na">db</span><span class="pi">:</span>
     <span class="na">image</span><span class="pi">:</span> <span class="s">mysql:5.7</span>
     <span class="na">volumes</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">db_data:/var/lib/mysql</span>
     <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
     <span class="na">environment</span><span class="pi">:</span>
       <span class="na">MYSQL_ROOT_PASSWORD</span><span class="pi">:</span> <span class="s">wordpress</span>
       <span class="na">MYSQL_DATABASE</span><span class="pi">:</span> <span class="s">wordpress</span>
       <span class="na">MYSQL_USER</span><span class="pi">:</span> <span class="s">wordpress</span>
       <span class="na">MYSQL_PASSWORD</span><span class="pi">:</span> <span class="s">wordpress</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ì•„ë˜ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
<span class="na">environment</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">RACK_ENV=development</span>
  <span class="pi">-</span> <span class="s">SHOW=true</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="ë ˆí¼ëŸ°ìŠ¤-ì°¸ê³ ">ë ˆí¼ëŸ°ìŠ¤ ì°¸ê³ </h2>
<p><a href="https://docs.docker.com/compose/compose-file" target="_blank">docker-compose</a>
<br />
<br />
<br />
<br />
<br /></p>

<h1 id="ï¸-ì°¸ê³ ì‚¬ì´íŠ¸">ğŸ™‡ğŸ»â€â™‚ï¸ ì°¸ê³ ì‚¬ì´íŠ¸</h1>
<ul>
  <li><a href="https://www.daleseo.com/?tag=Docker" target="_blank">https://www.daleseo.com</a></li>
</ul>]]></content><author><name>Oh</name></author><category term="Docker" /><category term="Docker" /><category term="Docker Compose" /><category term="Container" /><summary type="html"><![CDATA[ğŸ’¾ ë„ì»¤ ì»´í¬ì¦ˆì˜ ê¸°ë³¸ êµ¬ì„± ìš”ì†Œë£° ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ìì£¼ ì‚¬ìš©í•˜ëŠ” í•­ëª©ë§Œ ì •ë¦¬í•˜ì˜€ê³ , ë‹¤ë¥¸ í•­ëª©ë“¤ì„ í™•ì¸í•˜ì‹œë ¤ë©´ docker-composeë¥¼ í™•ì¸í•˜ì„¸ìš”.]]></summary></entry><entry><title type="html">ğŸ³ Docker ì´ë¯¸ì§€ ë§Œë“¤ê¸°</title><link href="http://localhost:4000/docker/docker-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EB%93%A4%EA%B8%B0/" rel="alternate" type="text/html" title="ğŸ³ Docker ì´ë¯¸ì§€ ë§Œë“¤ê¸°" /><published>2023-02-21T00:00:00+09:00</published><updated>2023-02-21T00:00:00+09:00</updated><id>http://localhost:4000/docker/docker-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EB%93%A4%EA%B8%B0</id><content type="html" xml:base="http://localhost:4000/docker/docker-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EB%93%A4%EA%B8%B0/"><![CDATA[<p>ğŸ’¾ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´Â Dockerfile ì´ë¼ëŠ” ì´ë¯¸ì§€ ë¹Œë“œìš© íŒŒì¼ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

<p><br /></p>

<p><img src="/assets/images/posts/docker/20230221/d1969bd2-2ec2-41d2-924e-38202359d741.png" alt="docker_image_build" />
<br />
<br /></p>

<h1 id="-dockerfile-êµ¬ì¡°">ğŸ¯ Dockerfile êµ¬ì¡°</h1>
<p>Ruby ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ubuntuì— ë°°í¬í•˜ëŠ” ê³¼ì •ì„ í†µí•´ êµ¬ì¡°ë¥¼ ì‚´í´ë´…ë‹ˆë‹¤.</p>

<h2 id="dockerfile-ìƒì„±">Dockerfile ìƒì„±</h2>
<p>ì•„ë˜ ê³¼ì •ì„ ì‰˜ ìŠ¤í¬ë¦½íŠ¸, Dockerfileë¡œ ë§Œë“¤ì–´ ë¹„êµí•©ë‹ˆë‹¤.</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ìˆœì„œ  |  ì‘ì—…
---------------------
1    |  ubuntu ì„¤ì¹˜
2    |  ruby ì„¤ì¹˜
3    |  ì†ŒìŠ¤ ë³µì‚¬
4    |  Gem íŒ¨í‚¤ì§€ ì„¤ì¹˜
5    |  Sinatra ì„œë²„ ì‹¤í–‰
</code></pre></div></div>
<p><br /></p>

<p><strong>ì‰˜ ìŠ¤í¬ë¦½íŠ¸</strong></p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. ubuntu ì„¤ì¹˜ (íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸)</span>
apt-get update

<span class="c"># 2. ruby ì„¤ì¹˜</span>
apt-get <span class="nb">install </span>ruby
gem <span class="nb">install </span>bundler

<span class="c"># 3. ì†ŒìŠ¤ ë³µì‚¬</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /usr/src/app
scp Gemfile app.rb root@ubuntu:/usr/src/app  <span class="c"># From host</span>

<span class="c"># 4. Gem íŒ¨í‚¤ì§€ ì„¤ì¹˜</span>
bundle <span class="nb">install</span>

<span class="c"># 5. Sinatra ì„œë²„ ì‹¤í–‰</span>
bundle <span class="nb">exec </span>ruby app.rb
</code></pre></div></div>
<p><br /></p>

<p><strong>Dockerfile</strong></p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">## í•µì‹¬ ëª…ë ¹ì–´ëŠ” íŒŒì¼ì„ ë³µì‚¬í•˜ëŠ” COPYì™€ ì‹¤í–‰í•˜ëŠ” RUN ì…ë‹ˆë‹¤.</span>
<span class="c"># 1. ubuntu ì„¤ì¹˜ (íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ + ë§Œë“ ì‚¬ëŒ í‘œì‹œ)</span>
<span class="k">FROM</span><span class="s">       ubuntu:16.04</span>
<span class="k">MAINTAINER</span><span class="s"> subicura@subicura.com</span>
<span class="k">RUN        </span>apt-get <span class="nt">-y</span> update

<span class="c"># 2. ruby ì„¤ì¹˜</span>
<span class="k">RUN </span>apt-get <span class="nt">-y</span> <span class="nb">install </span>ruby
<span class="k">RUN </span>gem <span class="nb">install </span>bundler

<span class="c"># 3. ì†ŒìŠ¤ ë³µì‚¬</span>
<span class="k">COPY</span><span class="s"> . /usr/src/app</span>

<span class="c"># 4. Gem íŒ¨í‚¤ì§€ ì„¤ì¹˜ (ì‹¤í–‰ ë””ë ‰í† ë¦¬ ì„¤ì •)</span>
<span class="k">WORKDIR</span><span class="s"> /usr/src/app</span>
<span class="k">RUN     </span>bundle <span class="nb">install</span>

<span class="c"># 5. Sinatra ì„œë²„ ì‹¤í–‰ (Listen í¬íŠ¸ ì •ì˜)</span>
<span class="k">EXPOSE</span><span class="s"> 4567</span>
<span class="k">CMD</span><span class="s">    bundle exec ruby app.rb -o 0.0.0.0</span>
</code></pre></div></div>
<p>ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì˜ ë‚´ìš©ì„ ê±°ì˜ ê·¸ëŒ€ë¡œ Dockerfileë¡œ ì˜®ê²¼ìŠµë‹ˆë‹¤. ì°¨ì´ì ì€ ë„ì»¤ ë¹Œë“œ ì¤‘ì—” í‚¤ë³´ë“œë¥¼ ì…ë ¥í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—Â (y/n) ì„ ë¬¼ì–´ë³´ëŠ” ê±¸ ë°©ì§€í•˜ê¸° ìœ„í•´Â -yÂ ì˜µì…˜ì„ ì¶”ê°€í•œ ê²ƒ ì •ë„ì…ë‹ˆë‹¤.
<br /></p>

<h2 id="ì´ë¯¸ì§€-ìƒì„±">ì´ë¯¸ì§€ ìƒì„±</h2>
<p>ìƒì„±í•œ Dockerfileì„ ê¸°ë°˜ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Dockerfileì„ ë§Œë“  ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ì—¬ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.</span>
<span class="c"># docker build -t [ìƒˆë¡œ ìƒì„±í•  ì´ë¯¸ì§€ ì´ë¦„] [Dockerfile ë””ë ‰í† ë¦¬ ê²½ë¡œ]</span>
<span class="nv">$ </span>docker build <span class="nt">-t</span> app <span class="nb">.</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="í™•ì¸">í™•ì¸</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
app                 latest              54d239c00f11        4 minutes ago       209 MB
ubuntu              16.04               f49eec89601e        2 weeks ago         129 MB
</code></pre></div></div>
<p><br />
<br />
<br />
<br />
<br /></p>

<h1 id="-dockerfile-ê¸°ë³¸-ëª…ë ¹ì–´">ğŸ¯ Dockerfile ê¸°ë³¸ ëª…ë ¹ì–´</h1>
<p>Dockerfileì˜ ê¸°ë³¸ì ì¸ ëª…ë ¹ì–´ë¥¼ ì‚´í´ë´…ë‹ˆë‹¤.</p>

<h2 id="from">FROM</h2>
<p>í•˜ë‚˜ì˜ Docker ì´ë¯¸ì§€ëŠ” base ì´ë¯¸ì§€ë¶€í„° ì‹œì‘í•´ì„œ ê¸°ì¡´ ì´ë¯¸ì§€ìœ„ì— ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ì¤‘ì²©í•´ì„œ ì—¬ëŸ¬ ë‹¨ê³„ì˜ ì´ë¯¸ì§€ ì¸µ(layer)ì„ ìŒ“ì•„ê°€ë©° ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">FROM</code>Â ëª…ë ¹ë¬¸ì€ ì´ base ì´ë¯¸ì§€ë¥¼ ì§€ì •í•´ì£¼ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ”ë°, ë³´í†µ Dockerfile ë‚´ì—ì„œ ìµœìƒë‹¨ì— ìœ„ì¹˜í•©ë‹ˆë‹¤. base ì´ë¯¸ì§€ëŠ” ì¼ë°˜ì ìœ¼ë¡œ Docker Hubì™€ ê°™ì€ Docker repositoryì— ì˜¬ë ¤ë†“ì€ ì˜ ì•Œë ¤ì§„ ê³µê°œ ì´ë¯¸ì§€ì¸ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># FROM &lt;ì´ë¯¸ì§€&gt;</span>
<span class="c"># FROM &lt;ì´ë¯¸ì§€&gt;:&lt;íƒœê·¸&gt;</span>

<span class="c"># Ubuntu ìµœì‹  ë²„ì „ì„ base ì´ë¯¸ì§€ë¡œ ì‚¬ìš©</span>
<span class="k">FROM</span><span class="s"> ubuntu:latest</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="maintainer-deprecated">MAINTAINER (deprecated)</h2>
<p>Dockerfileì„ ê´€ë¦¬í•˜ëŠ” ì‚¬ëŒì˜ ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼ ì •ë³´ë¥¼ ì ìŠµë‹ˆë‹¤. ë¹Œë“œì— ì˜í–¥ì„ ì£¼ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># MAINTAINER &lt;name&gt;</span>

<span class="k">MAINTAINER</span><span class="s"> name@gmail.com</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="copy">COPY</h2>
<p>íŒŒì¼ì´ë‚˜ ë””ë ‰í† ë¦¬ë¥¼ ì´ë¯¸ì§€ë¡œ ë³µì‚¬í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì†ŒìŠ¤ë¥¼ ë³µì‚¬í•˜ëŠ” ë° ì‚¬ìš©í•©ë‹ˆë‹¤.Â target ë””ë ‰í† ë¦¬ê°€ ì—†ë‹¤ë©´ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;</span>
<span class="c"># COPY [--chown=&lt;user&gt;:&lt;group&gt;] ["&lt;src&gt;",... "&lt;dest&gt;"]</span>

<span class="k">COPY</span><span class="s"> . /usr/src/app</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="add">ADD</h2>
<p><code class="language-plaintext highlighter-rouge">COPY</code> ëª…ë ¹ì–´ì™€ ë§¤ìš° ìœ ì‚¬í•˜ë‚˜ ëª‡ê°€ì§€ ì¶”ê°€ ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.Â src ì— íŒŒì¼ ëŒ€ì‹  URLì„ ì…ë ¥í•  ìˆ˜ ìˆê³ Â src
ì— ì••ì¶• íŒŒì¼ì„ ì…ë ¥í•˜ëŠ” ê²½ìš° ìë™ìœ¼ë¡œ ì••ì¶•ì„ í•´ì œí•˜ë©´ì„œ ë³µì‚¬ë©ë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ADD [--chown=&lt;user&gt;:&lt;group&gt;] [--checksum=&lt;checksum&gt;] &lt;src&gt;... &lt;dest&gt;</span>
<span class="c"># ADD [--chown=&lt;user&gt;:&lt;group&gt;] ["&lt;src&gt;",... "&lt;dest&gt;"]</span>

<span class="k">ADD</span><span class="s"> . /usr/src/app</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="run">RUN</h2>
<p>ëª…ë ¹ì–´ë¥¼ ê·¸ëŒ€ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œÂ /bin/sh -cÂ ë’¤ì— ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># RUN &lt;command&gt;</span>
<span class="k">RUN </span>npm <span class="nb">install</span> <span class="nt">--silent</span>

<span class="c"># RUN ["executable", "param1", "param2"]</span>
<span class="k">RUN </span><span class="o">[</span><span class="s2">"/bin/bash"</span>, <span class="s2">"-c"</span>, <span class="s2">"echo hello"</span><span class="o">]</span>

<span class="c"># ë©€í‹°ë¼ì¸</span>
<span class="k">RUN </span>/bin/bash <span class="nt">-c</span> <span class="s1">'source $HOME/.bashrc &amp;&amp; </span><span class="se">\
</span><span class="s1">echo $HOME'</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="entrypoint">ENTRYPOINT</h2>
<p><code class="language-plaintext highlighter-rouge">ENTRYPOINT</code>Â ëª…ë ¹ë¬¸ì€ ì´ë¯¸ì§€ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë„ìš¸ ë•Œ í•­ìƒ ì‹¤í–‰ë˜ì•¼ í•˜ëŠ” ì»¤ë§¨ë“œë¥¼ ì§€ì •í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code>Â ëª…ë ¹ë¬¸ì€ Docker ì´ë¯¸ì§€ë¥¼ ë§ˆì¹˜ í•˜ë‚˜ì˜ ì‹¤í–‰ íŒŒì¼ì²˜ëŸ¼ ì‚¬ìš©í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì»¨í…Œì´ë„ˆê°€ ëœ° ë•ŒÂ <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code>Â ëª…ë ¹ë¬¸ìœ¼ë¡œ ì§€ì •ëœ ì»¤ë§¨ë“œê°€ ì‹¤í–‰ë˜ê³ , ì´ ì»¤ë§¨ë“œë¡œ ì‹¤í–‰ëœ í”„ë¡œì„¸ìŠ¤ê°€ ì£½ì„ ë•Œ, ì»¨í…Œì´ë„ˆë¡œ ë”°ë¼ì„œ ì¢…ë£Œë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ENTRYPOINT ["&lt;ì»¤ë§¨ë“œ&gt;", "&lt;íŒŒë¼ë¯¸í„°1&gt;", "&lt;íŒŒë¼ë¯¸í„°2&gt;"]</span>
<span class="c"># ENTRYPOINT &lt;ì „ì²´ ì»¤ë§¨ë“œ&gt;</span>
<span class="k">ENTRYPOINT</span><span class="s"> ["npm", "start"]</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="cmd">CMD</h2>
<p>Dockerfileì—ëŠ” í•˜ë‚˜ì˜ <code class="language-plaintext highlighter-rouge">CMD</code> ëª…ë ¹ì–´ë§Œ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‘˜ ì´ìƒì˜ <code class="language-plaintext highlighter-rouge">CMD</code>ë¥¼ ë‚˜ì—´í•˜ë©´ ë§ˆì§€ë§‰ <code class="language-plaintext highlighter-rouge">CMD</code>ë§Œ ì ìš©ë©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">CMD</code>ì˜ ì£¼ìš” ëª©ì ì€ ì‹¤í–‰ ì»¨í…Œì´ë„ˆì— ëŒ€í•œ ê¸°ë³¸ê°’ì„ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">CMD</code>Â ëª…ë ¹ë¬¸ì€ ë§ì€ê²½ìš° <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code> ëª…ë ¹ë¬¸ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë°,Â <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code>Â ëª…ë ¹ë¬¸ìœ¼ë¡œëŠ” ì»¤ë§¨ë“œë¥¼ ì§€ì •í•˜ê³ ,Â <code class="language-plaintext highlighter-rouge">CMD</code>Â ëª…ë ¹ë¬¸ìœ¼ë¡œ ë””í´íŠ¸ íŒŒë¦¬ë¯¸í„°ë¥¼ ì§€ì •í•´ì£¼ë©´ ë§¤ìš° ìœ ì—°í•˜ê²Œ ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CMD</span><span class="s"> ["executable","param1","param2"]</span>
<span class="k">CMD</span><span class="s"> command param1 param2</span>
<span class="k">CMD</span><span class="s"> bundle exec ruby app.rb</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="workdir">WORKDIR</h2>
<p><code class="language-plaintext highlighter-rouge">RUN</code>, <code class="language-plaintext highlighter-rouge">CMD</code>, <code class="language-plaintext highlighter-rouge">ADD</code>, <code class="language-plaintext highlighter-rouge">COPY</code>ë“±ì´ ì´ë£¨ì–´ì§ˆ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ê° ëª…ë ¹ì–´ì˜ í˜„ì¬ ë””ë ‰í† ë¦¬ëŠ” í•œ ì¤„ í•œ ì¤„ë§ˆë‹¤ ì´ˆê¸°í™”ë˜ê¸° ë•Œë¬¸ì—Â RUN cd /path ë¥¼ í•˜ë”ë¼ë„ ë‹¤ìŒ ëª…ë ¹ì–´ì—ì„  ë‹¤ì‹œ ìœ„ì¹˜ê°€ ì´ˆê¸°í™” ë©ë‹ˆë‹¤. ê°™ì€ ë””ë ‰í† ë¦¬ì—ì„œ ê³„ì† ì‘ì—…í•˜ê¸° ìœ„í•´ì„œÂ <code class="language-plaintext highlighter-rouge">WORKDIR</code> ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WORKDIR</span><span class="s"> /path/to/workdir</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="expose">EXPOSE</h2>
<p>ë„ì»¤ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ì—ˆì„ ë•Œ ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ”(Listen) í¬íŠ¸ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì—¬ëŸ¬ê°œì˜ í¬íŠ¸ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># EXPOSE &lt;port&gt; [&lt;port&gt;...]</span>
<span class="c"># EXPOSE &lt;í¬íŠ¸&gt;/&lt;í”„ë¡œí† ì½œ&gt;</span>

<span class="k">EXPOSE</span><span class="s"> 4567</span>
<span class="k">EXPOSE</span><span class="s"> 9999/udp</span>
</code></pre></div></div>

<div class="notice--info">
<p><strong>ì°¸ê³ </strong></p>

<p><code class="language-plaintext highlighter-rouge">EXPOSE</code>Â ëª…ë ¹ë¬¸ìœ¼ë¡œ ì§€ì •ëœ í¬íŠ¸ëŠ” í•´ë‹¹ ì»¨í…Œì´ë„ˆì˜ ë‚´ë¶€ì—ì„œë§Œ ìœ íš¨í•˜ë©°, í˜¸ìŠ¤íŠ¸(host) ì»´í“¨í„°ì—ì„œëŠ” ì´ í¬íŠ¸ë¥¼ ë°”ë¡œ ì ‘ê·¼ì„ í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë¼ëŠ” ê²ë‹ˆë‹¤. í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°ë¡œë¶€í„° í•´ë‹¹ í¬íŠ¸ë¡œì˜ ì ‘ê·¼ì„ í—ˆìš©í•˜ë ¤ë©´,Â <code class="language-plaintext highlighter-rouge">docker run</code>Â ì»¤ë§¨ë“œë¥¼Â <code class="language-plaintext highlighter-rouge">-p</code>Â ì˜µì…˜ì„ í†µí•´ í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°ì˜ íŠ¹ì • í¬íŠ¸ë¥¼ í¬ì›Œë”©(forwarding)ì‹œì¼œì¤˜ì•¼ í•©ë‹ˆë‹¤.</p>
</div>
<p><br /></p>

<h2 id="volume">VOLUME</h2>
<p>ì»¨í…Œì´ë„ˆ ì™¸ë¶€ì— íŒŒì¼ì‹œìŠ¤í…œì„ ë§ˆìš´íŠ¸ í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">VOLUME</span><span class="s"> ["/data"]</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="env">ENV</h2>
<p>ì»¨í…Œì´ë„ˆì—ì„œ ì‚¬ìš©í•  í™˜ê²½ë³€ìˆ˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•ŒÂ <code class="language-plaintext highlighter-rouge">-e</code> ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ ê°’ì„ ì˜¤ë²„ë¼ì´ë”© í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ENV &lt;key&gt; &lt;value&gt;</span>
<span class="c"># ENV &lt;key&gt;=&lt;value&gt; ...</span>
<span class="k">ENV</span><span class="s"> DB_URL mysql</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="arg">ARG</h2>
<p><code class="language-plaintext highlighter-rouge">ARG</code>Â ëª…ë ¹ë¬¸ì€Â <code class="language-plaintext highlighter-rouge">docker build</code>Â ì»¤ë§¨ë“œë¡œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œ ì‹œ,Â <code class="language-plaintext highlighter-rouge">--build-arg</code>Â ì˜µì…˜ì„ í†µí•´ ë„˜ê¸¸ ìˆ˜ ìˆëŠ” ì¸ìë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì˜ˆë¥¼ ë“¤ì–´, Dockerfileì— ë‹¤ìŒê³¼ ê°™ì´ ARG ëª…ë ¹ë¬¸ìœ¼ë¡œ portë¥¼ ì¸ìë¡œ ì„ ì–¸í•´ì£¼ë©´</span>
<span class="k">ARG</span><span class="s"> port</span>

<span class="c"># ë‹¤ìŒê³¼ ê°™ì´ docker build ì»¤ë§¨ë“œì— --build-arg ì˜µì…˜ì— port ê°’ì„ ë„˜ê¸¸ ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤.</span>
$ docker build --build-arg port=8080 .



# ì¸ìì˜ ë””í´íŠ¸ê°’ì„ ì§€ì •í•´ì£¼ë©´, --build-arg ì˜µì…˜ìœ¼ë¡œ í•´ë‹¹ ì¸ìê°€ ë„˜ì–´ì˜¤ì§€ ì•Šì•˜ì„ ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
<span class="k">ARG</span><span class="s"> port=8080</span>

<span class="c"># ì„¤ì •ëœ ì¸ì ê°’ì€ ë‹¤ìŒê³¼ ê°™ì´ ${ì¸ìëª…} í˜•íƒœë¡œ ì½ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
<span class="k">CMD</span><span class="s"> start.sh -h 127.0.0.1 -p ${port}</span>
</code></pre></div></div>

<div class="notice--info">
<p><strong>ì°¸ê³ </strong></p>

<p><code class="language-plaintext highlighter-rouge">ENV</code> ì™€ ë‹¬ë¦¬Â <code class="language-plaintext highlighter-rouge">ARG</code> ë¡œ ì„¤ì •í•œ ê°’ì€ ì´ë¯¸ì§€ê°€ ë¹Œë“œë˜ëŠ” ë™ì•ˆì—ë§Œ ìœ íš¨</p>
</div>
<p><br /></p>

<h2 id="dockerignore-íŒŒì¼">.dockerignore íŒŒì¼</h2>
<p>Docker ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•  ë•Œ ì œì™¸ ì‹œí‚¤ê³  ì‹¶ì€ íŒŒì¼ì´ ìˆë‹¤ë©´,Â <code class="language-plaintext highlighter-rouge">.dockerignore</code>Â íŒŒì¼ì— ì¶”ê°€í•´ì£¼ë©´ ë©ë‹ˆë‹¤.</p>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># .dockerignore\</span>
<span class="c"># ì œì™¸ í•  íŒŒì¼ì„ ì‘ì„±</span>
.git
*.md
</code></pre></div></div>
<p><br /></p>

<h2 id="ì •ë¦¬">ì •ë¦¬</h2>

<table>
  <thead>
    <tr>
      <th>ëª…ë ¹ì–´</th>
      <th>ìš©ë„</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>FROM</td>
      <td>base ì´ë¯¸ì§€ ì„¤ì •</td>
    </tr>
    <tr>
      <td>WORKDIR</td>
      <td>ì‘ì—… ë””ë ‰í„°ë¦¬ ì„¤ì •</td>
    </tr>
    <tr>
      <td>RUN</td>
      <td>ì´ë¯¸ì§€ ë¹Œë“œ ì‹œ ì»¤ë§¨ë“œ ì‹¤í–‰</td>
    </tr>
    <tr>
      <td>ENTRYPOINT</td>
      <td>ì´ë¯¸ì§€ ì‹¤í–‰ ì‹œ í•­ìƒ ì‹¤í–‰ë˜ì•¼ í•˜ëŠ” ì»¤ë§¨ë“œ ì„¤ì •</td>
    </tr>
    <tr>
      <td>CMD</td>
      <td>ì´ë¯¸ì§€ ì‹¤í–‰ ì‹œ ë””í´íŠ¸ ì»¤ë§¨ë“œ ë˜ëŠ” íŒŒë¼ë¯¸í„° ì„¤ì •</td>
    </tr>
    <tr>
      <td>EXPOSE</td>
      <td>ì»¨í…Œì´ë„ˆê°€ ë¦¬ìŠ¤ë‹í•  í¬íŠ¸ ë° í”„ë¡œí† ì½œ ì„¤ì •</td>
    </tr>
    <tr>
      <td>COPY/ADD</td>
      <td>ì´ë¯¸ì§€ì˜ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ íŒŒì¼ ë˜ëŠ” ë””ë ‰í„°ë¦¬ ë³µì‚¬</td>
    </tr>
    <tr>
      <td>ENV</td>
      <td>í™˜ê²½ ë³€ìˆ˜ ì„¤ì •</td>
    </tr>
    <tr>
      <td>ARG</td>
      <td>ë¹Œë“œ ì‹œ ë„˜ì–´ì˜¬ ìˆ˜ ìˆëŠ” ì¸ì ì„¤ì •</td>
    </tr>
    <tr>
      <td>VOLUME</td>
      <td>ì»¨í…Œì´ë„ˆ ì™¸ë¶€ì— íŒŒì¼ì‹œìŠ¤í…œì„ ë§ˆìš´íŠ¸ í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h2 id="ë ˆí¼ëŸ°ìŠ¤-ì°¸ê³ ">ë ˆí¼ëŸ°ìŠ¤ ì°¸ê³ </h2>
<ul>
  <li><a href="https://docs.docker.com/engine/reference/builder/" target="_blank">Dockerfile</a>
<br />
<br />
<br />
<br />
<br /></li>
</ul>

<h1 id="ï¸-ì°¸ê³ ì‚¬ì´íŠ¸">ğŸ™‡ğŸ»â€â™‚ï¸ ì°¸ê³ ì‚¬ì´íŠ¸</h1>
<ul>
  <li><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank">https://subicura.com</a></li>
  <li><a href="https://www.daleseo.com/?tag=Docker" target="_blank">https://www.daleseo.com</a></li>
</ul>]]></content><author><name>Oh</name></author><category term="Docker" /><category term="Docker" /><category term="Container" /><summary type="html"><![CDATA[ğŸ’¾ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´Â Dockerfile ì´ë¼ëŠ” ì´ë¯¸ì§€ ë¹Œë“œìš© íŒŒì¼ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">ğŸ³ Docker ê¸°ë³¸ ëª…ë ¹ì–´</title><link href="http://localhost:4000/docker/docker-%EA%B8%B0%EB%B3%B8%EB%AA%85%EB%A0%B9%EC%96%B4/" rel="alternate" type="text/html" title="ğŸ³ Docker ê¸°ë³¸ ëª…ë ¹ì–´" /><published>2023-02-20T00:00:00+09:00</published><updated>2023-02-20T00:00:00+09:00</updated><id>http://localhost:4000/docker/docker-%EA%B8%B0%EB%B3%B8%EB%AA%85%EB%A0%B9%EC%96%B4</id><content type="html" xml:base="http://localhost:4000/docker/docker-%EA%B8%B0%EB%B3%B8%EB%AA%85%EB%A0%B9%EC%96%B4/"><![CDATA[<p>ğŸ’¾ ë„ì»¤ì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.</p>

<p><br /></p>

<h1 id="-ì»¨í…Œì´ë„ˆ-ê´€ë ¨-ëª…ë ¹ì–´">ğŸ¯ ì»¨í…Œì´ë„ˆ ê´€ë ¨ ëª…ë ¹ì–´</h1>
<p>Docker CLI ë„êµ¬ëŠ” Docker ì»¨í…Œì´ë„ˆ(container)ì˜ íš¨ê³¼ì ì¸ ê´€ë¦¬ë¥¼ ìœ„í•´ì„œ ë‹¤ì–‘í•œ ì»¤ë§¨ë“œ(command)ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>

<h2 id="ì»¨í…Œì´ë„ˆ-ì¡°íšŒ">ì»¨í…Œì´ë„ˆ ì¡°íšŒ</h2>
<p><code class="language-plaintext highlighter-rouge">docker ps</code>Â ì»¤ë§¨ë“œëŠ” Docker ì»¨í…Œì´ë„ˆë¥¼ ì¡°íšŒë¥¼ ìœ„í•´ ì‚¬ìš©ë˜ë©° ê¸°ë³¸ì ìœ¼ë¡œ ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ëª©ë¡ì´ ì¶œë ¥ë©ë‹ˆë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ê¸°ë³¸ ì¡°íšŒ</span>
<span class="nv">$ </span>docker ps

<span class="c"># -a ì˜µì…˜</span>
<span class="c"># í˜„ì¬ ì¤‘ì§€ë˜ì–´ ìˆëŠ” ì»¨í…Œì´ë„ˆê¹Œì§€ í•¨ê»˜ ì¶œë ¥ë©ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker ps <span class="nt">-a</span>

<span class="c"># -s ì˜µì…˜</span>
<span class="c"># ê° ì»¨í…Œì´ë„ˆì˜ ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ê¹Œì§€ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker ps <span class="nt">-s</span>

<span class="c"># -f ì˜µì…˜</span>
<span class="c"># ì¡°íšŒ ê²°ê³¼ë¥¼ íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ í•„í„°ë§í•´ì„œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
<span class="c"># ì˜ˆë¥¼ ë“¤ì–´, íŠ¹ì • ì´ë¯¸ì§€ë¡œ ë¶€í„° ë§Œë“¤ì–´ì§„ ì»¨í…Œì´ì–´ë§Œ ë³´ê³  ì‹¶ë‹¤ë©´ ancestor í•„í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker ps <span class="nt">-af</span> <span class="s2">"ancestor=python:alpine"</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                         PORTS               NAMES
b1bae952f7a6        python:alpine       <span class="s2">"python -m http.servâ€¦"</span>   About an hour ago   Exited <span class="o">(</span>137<span class="o">)</span> 3 minutes ago                         amazing_chatelet
518d8bb6afaf        python:alpine       <span class="s2">"python3"</span>                About an hour ago   Exited <span class="o">(</span>0<span class="o">)</span> About an hour ago                       focused_gauss
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ì‹¤í–‰">ì»¨í…Œì´ë„ˆ ì‹¤í–‰</h2>
<p><code class="language-plaintext highlighter-rouge">docker run</code>Â ì»¤ë§¨ë“œëŠ” ìƒë‹¹íˆ ì—¬ëŸ¬ê°€ì§€ ì˜µì…˜ì„ í†µí•´ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ê¸°ë³¸ ì‹¤í–‰</span>
<span class="c"># $ docker run (&lt;ì˜µì…˜&gt;) &lt;ì´ë¯¸ì§€ ì‹ë³„ì&gt; (&lt;ëª…ë ¹ì–´&gt;) (&lt;ì¸ì&gt;)</span>
<span class="nv">$ </span>docker run hello-world

<span class="c"># -d ì˜µì…˜</span>
<span class="c"># ì»¨í…Œì´ë„ˆë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰</span>
<span class="c"># -d ì˜µì…˜ì—†ì´ ì‹¤í–‰í–ˆë‹¤ë©´, í•´ë‹¹ í„°ë¯¸ë„ì—ì„œ Ctrl + Cë¥¼ ëˆŒëŸ¬ì„œ ë¹ ì ¸ë‚˜ì˜¤ëŠ” ìˆœê°„ í•´ë‹¹ ì»¨í…Œì´ë„ˆëŠ” ì¢…ë£Œë  ê²ƒì…ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker run <span class="nt">-d</span> python:3.8-alpine python <span class="nt">-m</span> http.server

<span class="c"># -it ì˜µì…˜</span>
<span class="c"># -iì™€ -të¥¼ ë™ì‹œì— ì‚¬ìš©í•œ ê²ƒìœ¼ë¡œ í„°ë¯¸ë„ ì…ë ¥ì„ ìœ„í•œ ì˜µì…˜</span>
<span class="nv">$ </span>docker run <span class="nt">-it</span> python:3.8-alpine
<span class="nv">$ </span>docker run <span class="nt">-it</span> python:3.8-alpine /bin/sh

<span class="c"># -name ì˜µì…˜</span>
<span class="c"># ì»¨í…Œì´ë„ˆ ì´ë¦„ ì„¤ì •</span>
<span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">--name</span> my-server python:3.8-alpine python <span class="nt">-m</span> http.server

<span class="c"># -e ì˜µì…˜</span>
<span class="c"># ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ì‚¬ìš©í•  í™˜ê²½ë³€ìˆ˜ ì„¤ì •</span>
<span class="c">## Docker ì»¨í…Œì´ë„ˆì˜ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” -e ì˜µì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</span>
<span class="c">## ë˜í•œ, -e ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ Dockerfileì˜ ENV ì„¤ì •ë„ ë®ì–´ì¨ì§€ê²Œ ë©ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker run <span class="nt">-e</span> <span class="nv">FOO</span><span class="o">=</span>bar python:3.8-alpine <span class="nb">env</span>

<span class="c"># -p ì˜µì…˜</span>
<span class="c"># í˜¸ìŠ¤íŠ¸ì™€ ì»¨í…Œì´ë„ˆì˜ í¬íŠ¸ë¥¼ ì—°ê²° (í¬ì›Œë”©)</span>
<span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">-p</span> 80:8000 python:3.8-alpine python <span class="nt">-m</span> http.server

<span class="c"># -v ì˜µì…˜</span>
<span class="c"># í˜¸ìŠ¤íŠ¸ì™€ ì»¨í…Œì´ë„ˆì˜ ë””ë ‰í† ë¦¬ë¥¼ ì—°ê²° (ë§ˆìš´íŠ¸)</span>
<span class="nv">$ </span><span class="nb">echo </span>Hi <span class="o">&gt;</span> test.txt
<span class="nv">$ </span>docker run <span class="nt">-v</span> <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>:/etc python:3.8-alpine <span class="nb">cat</span> /etc/test.txt
Hi

<span class="c"># -rm ì˜µì…˜</span>
<span class="c"># ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ ì»¨í…Œì´ë„ˆì™€ ê´€ë ¨ëœ ë¦¬ì†ŒìŠ¤(íŒŒì¼ ì‹œìŠ¤í…œ, ë³¼ë¥¨)ê¹Œì§€ ê¹¨ë—ì´ ì œê±°í•´ì¤ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker run <span class="nt">--rm</span> <span class="nt">-it</span> ubuntu:16.04 /bin/bash
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ì¤‘ì§€">ì»¨í…Œì´ë„ˆ ì¤‘ì§€</h2>
<p>ì‹¤í–‰ ì¤‘ì¸ Docker ì»¨í…Œì´ë„ˆë¥¼ ì¤‘ì§€í•˜ë ¤ë©´Â <code class="language-plaintext highlighter-rouge">docker stop</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¤‘ì§€í•˜ê³  ì‹¶ì€ ì»¨í…Œì´ë„ˆì˜ ì•„ì´ë””ë‚˜ ì´ë¦„ì„ ì¸ìë¡œ ë„˜ê¹ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì•„ì´ë””ë‚˜ ì´ë¦„ì„ ì¸ìë¡œ ì»¨í…Œì´ë„ˆ ì¤‘ì§€</span>
<span class="nv">$ </span>docker stop container_name
container_name

<span class="c"># ì¡°íšŒ</span>
<span class="nv">$ </span>docker ps <span class="nt">-af</span> <span class="s2">"name=container_name"</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES
b1bae952f7a6        python:alpine       <span class="s2">"python -m http.servâ€¦"</span>   About an hour ago   Exited <span class="o">(</span>137<span class="o">)</span> 32 seconds ago                       container_name

<span class="c"># ì»¨í…Œì´ë„ˆ ì „ì²´ ì¤‘ì§€</span>
<span class="nv">$ </span>docker stop <span class="si">$(</span>docker ps <span class="nt">-a</span> <span class="nt">-q</span><span class="si">)</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ì‹œì‘">ì»¨í…Œì´ë„ˆ ì‹œì‘</h2>
<p>ì¤‘ì§€ëœ Docker ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ë ¤ë©´Â <code class="language-plaintext highlighter-rouge">docker start</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ì¬ì‹œì‘í•˜ê³  ì‹¶ì€ ì»¨í…Œì´ë„ˆì˜ ì•„ì´ë””ë‚˜ ì´ë¦„ì„ ì¸ìë¡œ ë„˜ê¸°ë©´ ë©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì•„ì´ë””ë‚˜ ì´ë¦„ì„ ì¸ìë¡œ ì»¨í…Œì´ë„ˆ ì‹œì‘</span>
<span class="nv">$ </span>docker start b1bae952f7m1
b1bae952f7m1

<span class="nv">$ </span>docker ps <span class="nt">-af</span> <span class="s2">"id=b1bae952f7m1"</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
b1bae952f7m1        python:alpine       <span class="s2">"python -m http.servâ€¦"</span>   About an hour ago   Up About a minute                       amazing_chatelet
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ìƒëŒ€ë¡œ-ëª…ë ¹ì–´-ì‹¤í–‰">ì»¨í…Œì´ë„ˆ ìƒëŒ€ë¡œ ëª…ë ¹ì–´ ì‹¤í–‰</h2>
<p>ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ìƒëŒ€ë¡œ ëª…ë ¹ì–´ë¥¼ ë‚ ë¦¬ê³  ì‹¶ë‹¤ë©´Â <code class="language-plaintext highlighter-rouge">docker exec</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì–´ë–¤ ì»¨í…Œì´ë„ˆë¥¼ ìƒëŒ€ë¡œÂ <code class="language-plaintext highlighter-rouge">ls</code>Â ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker <span class="nb">exec </span>b1bae952f7a6 <span class="nb">ls
</span>bin dev etc home lib media mnt ...ìƒëµ...
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">-it</code>Â ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ì»¨í…Œì´ë„ˆì˜ ì‰˜(shell)ê³¼ ì‘ì ‘ ìƒí˜¸ì‘ìš©í•˜ë©´ì„œ ì—°ì†ìœ¼ë¡œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker <span class="nb">exec</span> <span class="nt">-it</span> container_name /bin/sh

<span class="nv">$ </span><span class="nb">ls
</span>bin    etc    lib    mnt    proc   run    srv    tmp    var
dev    home   media  opt    root   sbin   sys    usr
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ë¡œê·¸-í™•ì¸">ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸</h2>
<p>ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ë¥¼ í™•ì¸í•˜ë ¤ë©´Â <code class="language-plaintext highlighter-rouge">docker logs</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker logs b1bae952f7a6

<span class="c"># -f ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ì‹¤ì‹œê°„ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker logs <span class="nt">-f</span> container_name

<span class="c"># ë§ˆì§€ë§‰ 10ì¤„ë§Œ ì¶œë ¥</span>
<span class="nv">$ </span>docker logs <span class="nt">--tail</span> 10 container_name
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ìƒì„¸-ì •ë³´">ì»¨í…Œì´ë„ˆ ìƒì„¸ ì •ë³´</h2>
<p>íŠ¹ì • ì»¨í…Œì´ë„ˆì˜ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´,Â <code class="language-plaintext highlighter-rouge">docker inspect</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker inspect 8c27a672e23c
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Id"</span>: <span class="s2">"8c27a672e23c1c48aaaa0d2e65325aefb36db2934f724634dd4f5684397014ba"</span>,
        <span class="s2">"Created"</span>: <span class="s2">"2020-04-25T18:23:24.651490253Z"</span>,
        <span class="s2">"Path"</span>: <span class="s2">"/bin/sh"</span>,
        <span class="s2">"Args"</span>: <span class="o">[]</span>,
        <span class="s2">"State"</span>: <span class="o">{</span>
            <span class="s2">"Status"</span>: <span class="s2">"exited"</span>,
            <span class="s2">"Running"</span>: <span class="nb">false</span>,
            <span class="s2">"Paused"</span>: <span class="nb">false</span>,
            <span class="s2">"Restarting"</span>: <span class="nb">false</span>,
            <span class="s2">"OOMKilled"</span>: <span class="nb">false</span>,
            <span class="s2">"Dead"</span>: <span class="nb">false</span>,
            <span class="s2">"Pid"</span>: 0,
            <span class="s2">"ExitCode"</span>: 0,
            <span class="s2">"Error"</span>: <span class="s2">""</span>,
            <span class="s2">"StartedAt"</span>: <span class="s2">"2020-04-25T18:23:25.300618082Z"</span>,
            <span class="s2">"FinishedAt"</span>: <span class="s2">"2020-04-25T18:23:25.347690066Z"</span>
        <span class="o">}</span>,
        <span class="s2">"Image"</span>: <span class="s2">"sha256:f70734b6a266dcb5f44c383274821207885b549b75c8e119404917a61335981a"</span>,
        ...ìƒëµ...
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ì œê±°">ì»¨í…Œì´ë„ˆ ì œê±°</h2>
<p>ì»¨í…Œì´ë„ˆë¥¼ ì œê±°í•˜ê³  ì‹¶ì„ ë•ŒëŠ”Â <code class="language-plaintext highlighter-rouge">docker rm</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¤‘ì§€ë˜ì–´ ìˆëŠ” ì»¨í…Œì´ë„ˆëŠ” ì•„ë¬´ ì˜µì…˜ì—†ì´ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì»¨í…Œì´ë„ˆ ì œê±°</span>
<span class="nv">$ </span>docker <span class="nb">rm </span>3722f14f4d2a
3722f14f4d2a

<span class="c"># ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë°”ë¡œ ì œê±°ê°€ í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</span>
<span class="c"># ì´ ë•ŒëŠ”, -f ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ì»¨í…Œì´ë„ˆë¥¼ ë¨¼ì € ì •ì§€ì‹œí‚¨ ë‹¤ìŒì— ì œê±°í•´ì¤ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker <span class="nb">rm </span>d2f83048485e
Error response from daemon: You cannot remove a running container d2f83048485e4fe694dac374be152906e4e20da400305e5095bbb476bcaf718d. Stop the container before attempting removal or force remove
<span class="nv">$ </span>docker <span class="nb">rm</span> <span class="nt">-f</span> d2f83048485e

<span class="c"># ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆëŠ” ê±´ë“¤ì§€ ì•Šê³  ì¤‘ì§€ë˜ì–´ ìˆëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆë¥¼ ì œê±°í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•˜ë©´ ë©ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker <span class="nb">rm</span> <span class="si">$(</span>docker ps <span class="nt">-a</span> <span class="nt">-q</span><span class="si">)</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ë ˆí¼ëŸ°ìŠ¤-ì°¸ê³ ">ì»¨í…Œì´ë„ˆ ë ˆí¼ëŸ°ìŠ¤ ì°¸ê³ </h2>
<ul>
  <li><a href="https://docs.docker.com/engine/reference/run/" target="_blank">Docker run reference</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/run/" target="_blank">docker run</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/ps/" target="_blank">docker ps</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/stop/" target="_blank">docker stop</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/start/" target="_blank">docker start</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/exec/" target="_blank">docker exec</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/logs/" target="_blank">docker logs</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/attach/" target="_blank">docker attach</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/inspect/" target="_blank">docker inspect</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/rm/" target="_blank">docker rm</a>
<br />
<br />
<br />
<br />
<br /></li>
</ul>

<h1 id="-ë³¼ë¥¨ë°”ì¸ë“œ-ë§ˆìš´íŠ¸-ê´€ë ¨-ëª…ë ¹ì–´">ğŸ¯ ë³¼ë¥¨/ë°”ì¸ë“œ ë§ˆìš´íŠ¸ ê´€ë ¨ ëª…ë ¹ì–´</h1>
<p>Docker ì»¨í…Œì´ë„ˆ(container)ì— ì“°ì—¬ì§„ ë°ì´í„°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì»¨í…Œì´ë„ˆê°€ ì‚­ì œë  ë•Œ í•¨ê»˜ ì‚¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤. Dockerì—ì„œ ëŒì•„ê°€ëŠ” ë§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì»¨í…Œì´ë„ˆì˜ ìƒëª… ì£¼ê¸°ì™€ ê´€ê³„ì—†ì´ ë°ì´í„°ë¥¼ ì˜ì†ì ìœ¼ë¡œ ì €ì¥ì„ í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì—¬ëŸ¬ ê°œì˜ Docker ì»¨í…Œì´ë„ˆê°€ í•˜ë‚˜ì˜ ì €ì¥ ê³µê°„ì„ ê³µìœ í•´ì„œ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì¨ì•¼í•˜ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì´ë ‡ê²Œ Docker ì»¨í…Œì´ë„ˆì˜ ìƒëª… ì£¼ê¸°ì™€ ê´€ê³„ì—†ì´ ë°ì´í„°ë¥¼ ì˜ì†ì ìœ¼ë¡œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ DockerëŠ” ë‘ê°€ì§€ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì²«ë²ˆì§¸ëŠ” Docker ë³¼ë¥¨(volume), ë‘ë²ˆì§¸ëŠ” ë°”ì¸ë“œ ë§ˆìš´íŠ¸(bind mount)ì…ë‹ˆë‹¤.</p>

<p><img src="/assets/images/posts/docker/20230220/d1969bd2-2ec2-41d2-924e-38202359d740.png" alt="docker bind volume" />
<br /></p>

<h2 id="ë³¼ë¥¨-ìƒì„±">ë³¼ë¥¨ ìƒì„±</h2>
<p><code class="language-plaintext highlighter-rouge">docker volume create</code>Â ì»¤ë§¨ë“œë¥¼ ì´ìš©í•´ì„œ ë³¼ë¥¨ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker volume create our-vol
our-vol
</code></pre></div></div>
<p><br /></p>

<h2 id="ë³¼ë¥¨-ì¡°íšŒ">ë³¼ë¥¨ ì¡°íšŒ</h2>
<p><code class="language-plaintext highlighter-rouge">docker volume ls</code>Â ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ë³¼ë¥¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker volume <span class="nb">ls
</span>DRIVER              VOLUME NAME
<span class="nb">local               </span>our-vol
</code></pre></div></div>
<p><br /></p>

<h2 id="ë³¼ë¥¨-ìƒì„¸-ì •ë³´">ë³¼ë¥¨ ìƒì„¸ ì •ë³´</h2>
<p><code class="language-plaintext highlighter-rouge">docker volume inspect</code>Â ì»¤ë§¨ë“œë¥¼ í†µí•´ í•´ë‹¹ ë³¼ë¥¨ì„ ì¢€ ë” ìƒì„¸í•œ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker volume inspect our-vol
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"CreatedAt"</span>: <span class="s2">"2020-05-09T17:03:46Z"</span>,
        <span class="s2">"Driver"</span>: <span class="s2">"local"</span>,
        <span class="s2">"Labels"</span>: <span class="o">{}</span>,
        <span class="s2">"Mountpoint"</span>: <span class="s2">"/var/lib/docker/volumes/our-vol/_data"</span>,
        <span class="s2">"Name"</span>: <span class="s2">"our-vol"</span>,
        <span class="s2">"Options"</span>: <span class="o">{}</span>,
        <span class="s2">"Scope"</span>: <span class="s2">"local"</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">Mountpoint</code>Â í•­ëª©ì„ ë³´ë©´ í•´ë‹¹ ë³¼ë¥¨ì´ ì»´í“¨í„°ì˜ ì–´ëŠ ê²½ë¡œì— ìƒì„±ë˜ì—ˆëŠ”ì§€ë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br /></p>

<h2 id="ì»¨í…Œì´ë„ˆì—-ë³¼ë¥¨-ë§ˆìš´íŠ¸">ì»¨í…Œì´ë„ˆì— ë³¼ë¥¨ ë§ˆìš´íŠ¸</h2>
<p>ì»¨í…Œì´ë„ˆê°€ ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë³¼ë¥¨ì„ ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸(mount)í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.Â <code class="language-plaintext highlighter-rouge">docker run</code>Â ì»¤ë§¨ë“œë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•ŒÂ <code class="language-plaintext highlighter-rouge">-v</code>Â ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤. ì½œë¡ (<code class="language-plaintext highlighter-rouge">:</code>)ì„ êµ¬ë¶„ìë¡œ í•´ì„œ ì•ì—ëŠ” ë§ˆìš´íŠ¸í•  ë³¼ë¥¨ëª… ë’¤ì—ëŠ” ì»¨í…Œì´ë„ˆ ë‚´ì˜ ê²½ë¡œë¥¼ ëª…ì‹œí•´ì£¼ë©´ ë©ë‹ˆë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># `our-vol`Â ë³¼ë¥¨ì„Â `one`Â ì»¨í…Œì´ë„ˆì˜Â `/app`Â ê²½ë¡œì— ë§ˆìš´íŠ¸, touch ëª…ë ¹ì–´ë¡œ íŒŒì¼ ìƒì„±</span>
<span class="nv">$ </span>docker run <span class="nt">-v</span> our-vol:/app <span class="nt">--name</span> one busybox <span class="nb">touch</span> /app/test.txt
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">touch /app/test.txt</code>Â ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ì˜€ê¸° ë•Œë¬¸ì—,Â test.txt íŒŒì¼ì´Â our-volÂ ë³¼ë¥¨ì˜ ê²½ë¡œì—ë„ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ls</span> /var/lib/docker/volumes/our-vol/_data
test.txt
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">docker inspect</code>Â ì»¤ë§¨ë“œë¡œ ì»¨í…Œì´ë„ˆì˜ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ë©´Â our-volÂ ë³¼ë¥¨ì´Â volumeÂ íƒ€ì…ìœ¼ë¡œ ë§ˆìš´íŠ¸ë˜ì–´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker inspect one
...ìƒëµ...
    <span class="s2">"Mounts"</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"Type"</span>: <span class="s2">"volume"</span>,
            <span class="s2">"Name"</span>: <span class="s2">"our-vol"</span>,
            <span class="s2">"Source"</span>: <span class="s2">"/var/lib/docker/volumes/our-vol/_data"</span>,
            <span class="s2">"Destination"</span>: <span class="s2">"/app"</span>,
            <span class="s2">"Driver"</span>: <span class="s2">"local"</span>,
            <span class="s2">"Mode"</span>: <span class="s2">"z"</span>,
            <span class="s2">"RW"</span>: <span class="nb">true</span>,
            <span class="s2">"Propagation"</span>: <span class="s2">""</span>
        <span class="o">}</span>
    <span class="o">]</span>,
...ìƒëµ...
</code></pre></div></div>
<p><br /></p>

<h2 id="ë‹¤ë¥¸-ì»¨í…Œì´ë„ˆì—ë„-ë³¼ë¥¨-ë§ˆìš´íŠ¸">ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ë„ ë³¼ë¥¨ ë§ˆìš´íŠ¸</h2>
<p>ê°™ì€Â our-volÂ ë³¼ë¥¨ì„Â twoÂ ì»¨í…Œì´ë„ˆì˜Â /appÂ ê²½ë¡œì— ë§ˆìš´íŠ¸ë¥¼ í•´ë³´ê² ìŠµë‹ˆë‹¤.Â ls /appÂ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•´ë³´ë‹ˆ,Â oneÂ ì»¨í…Œì´ë„ˆê°€ ë³¼ë¥¨ì— ìƒì„±í•´ë†“ì€ íŒŒì¼ì´ ê·¸ëŒ€ë¡œ ë³´ì´ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-v</span> our-vol:/app <span class="nt">--name</span> two busybox <span class="nb">ls</span> /app
test.txt
</code></pre></div></div>
<p>ì´ë ‡ê²Œ <strong>ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆê°€ í•˜ë‚˜ì˜ ë³¼ë¥¨ì— ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì»¨í…Œì´ë„ˆ ê°„ ë°ì´í„° ê³µìœ ê°€ ê°€ëŠ¥</strong>í•©ë‹ˆë‹¤.
<br /></p>

<h2 id="ë³¼ë¥¨-ì‚­ì œ">ë³¼ë¥¨ ì‚­ì œ</h2>
<p><code class="language-plaintext highlighter-rouge">docker volume rm</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•´ì„œ ë³¼ë¥¨ì„ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì œê±°í•˜ë ¤ëŠ” ë³¼ë¥¨ì´ ë§ˆìš´íŠ¸ë˜ì–´ ìˆëŠ” ì»¨í…Œì´ë„ˆê°€ ìˆì„ ë•ŒëŠ” í•´ë‹¹ ë³¼ë¥¨ì´ ì œê±°ê°€ ë˜ì§€ê°€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ëŸ´ ë•ŒëŠ” í•´ë‹¹ ë³¼ë¥¨ì´ ë§ˆìš´íŠ¸ë˜ì–´ ìˆëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆë¥¼ ë¨¼ì € ì‚­ì œí•˜ê³ , ë³¼ë¥¨ì„ ì‚­ì œí•´ì•¼ í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì»¨í…Œì´ë„ˆ ì‚­ì œ</span>
<span class="nv">$ </span>docker <span class="nb">rm</span> <span class="nt">-f</span> one two
one
two

<span class="c"># ë³¼ë¥¨ ì‚­ì œ</span>
<span class="nv">$ </span>docker volume <span class="nb">rm </span>our-vol
our-vol
</code></pre></div></div>
<p><br /></p>

<h2 id="ë³¼ë¥¨-ì²­ì†Œ">ë³¼ë¥¨ ì²­ì†Œ</h2>
<p><code class="language-plaintext highlighter-rouge">docker volume prune</code>Â ì»¤ë§¨ë“œë¥¼ ì´ìš©í•´ì„œ ë§ˆìš´íŠ¸ë˜ì–´ ìˆì§€ ì•Šì€ ëª¨ë“  ë³¼ë¥¨ì„ í•œë²ˆì— ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker volume prune
WARNING! This will remove all <span class="nb">local </span>volumes not used by at least one container.
Are you sure you want to <span class="k">continue</span>? <span class="o">[</span>y/N] y
</code></pre></div></div>
<p><br /></p>

<h2 id="ë°”ì¸ë“œ-ë§ˆìš´íŠ¸">ë°”ì¸ë“œ ë§ˆìš´íŠ¸</h2>
<p>Docker ì»¨í…Œì´ë„ˆì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ë°”ì¸ë“œ ë§ˆìš´íŠ¸(bind mount)ë¼ëŠ” ê²ƒë„ ìˆìŠµë‹ˆë‹¤. ë°”ì¸ë“œ ë§ˆìš´íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ í˜¸ìŠ¤íŠ¸ íŒŒì¼ ì‹œìŠ¤í…œì˜ íŠ¹ì • ê²½ë¡œë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë°”ë¡œ ë§ˆìš´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ë°”ì¸ë“œ ë§ˆìš´íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€Â <code class="language-plaintext highlighter-rouge">docker run</code>Â ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•  ë•Œ,Â <code class="language-plaintext highlighter-rouge">-v</code>Â ì˜µì…˜ì˜ ì½œë¡ (<code class="language-plaintext highlighter-rouge">:</code>) ì• ë¶€ë¶„ì— ë§ˆìš´íŠ¸ëª… ëŒ€ì‹ ì— í˜¸ìŠ¤íŠ¸ì˜ ê²½ë¡œë¥¼ ì§€ì •í•´ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ì–´, í˜„ì¬ ê²½ë¡œì—Â <code class="language-plaintext highlighter-rouge">test.txt</code>Â íŒŒì¼ì„ ìƒì„±í•˜ê³ , í•´ë‹¹ í˜¸ìŠ¤íŠ¸ ê²½ë¡œë¥¼ ì»¨í…Œì´ë„ˆì˜Â <code class="language-plaintext highlighter-rouge">/app</code>Â ê²½ë¡œì— ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆì— í„°ë¯¸ë„ì— ì ‘ì†í•˜ì—¬Â <code class="language-plaintext highlighter-rouge">ls /app</code>Â ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•´ë³´ë©´Â <code class="language-plaintext highlighter-rouge">test.txt</code>Â íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># íŒŒì¼ ìƒì„±</span>
<span class="nv">$ </span><span class="nb">touch </span>test.txt

<span class="c"># ë°”ì¸ë“œ ë§ˆìš´íŠ¸, ì»¨í…Œì´ë„ˆ ì‰˜ ì ‘ì†</span>
<span class="nv">$ </span>docker run <span class="nt">-v</span> <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>:/app <span class="nt">-it</span> <span class="nt">--name</span> one busybox /bin/bash

<span class="c"># ì¡°íšŒ</span>
<span class="nv">$ </span><span class="nb">ls</span> /app
test.txt
</code></pre></div></div>
<p>ë°˜ëŒ€ë¡œ ì»¨í…Œì´ë„ˆì˜Â /appÂ ê²½ë¡œ ìƒì—ì„œÂ test2.txtÂ íŒŒì¼ì„ ì‹¤í–‰í•´ë³´ë©´ í˜¸ìŠ¤íŠ¸ì˜ í˜„ì¬ ê²½ë¡œì—ì„œë„ í•´ë‹¹ íŒŒì¼ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ íŒŒì¼ ìƒì„±</span>
<span class="nv">$ </span><span class="nb">touch</span> /app/test2.txt

<span class="c"># ì»¨í…Œì´ë„ˆ ì‰˜ ì¢…ë£Œ</span>
<span class="nv">$ </span><span class="nb">exit</span>

<span class="c"># í˜¸ìŠ¤íŠ¸ì—ì„œ ì¡°íšŒ</span>
<span class="nv">$ </span><span class="nb">ls
</span>test.txt   test2.txt
</code></pre></div></div>
<p><br /></p>

<h2 id="ë³¼ë¥¨-vs-ë°”ì¸ë“œ-ë§ˆìš´íŠ¸">ë³¼ë¥¨ VS ë°”ì¸ë“œ ë§ˆìš´íŠ¸</h2>
<p>ë³¼ë¥¨(volume)ê³¼ ë°”ì¸ë“œ ë§ˆìš´íŠ¸(bind mount)ì˜ ê°€ì¥ í° ì°¨ì´ì ì€ Dockerì˜ í•´ë‹¹ ë§ˆìš´íŠ¸ í¬ì¸íŠ¸ ê´€ë¦¬ ì—¬ë¶€ì…ë‹ˆë‹¤.</p>

<p>ë³¼ë¥¨ì„ ì‚¬ìš©í•  ë•ŒëŠ” ìš°ë¦¬ê°€ ìŠ¤ìŠ¤ë¡œ ë³¼ë¥¨ì„ ìƒì„±í•˜ê±°ë‚˜ ì‚­ì œí•´ì•¼í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆì§€ë§Œ, í•´ë‹¹ ë³¼ë¥¨ì€ Docker ìƒì—ì„œ ì´ë¯¸ì§€(image)ë‚˜ ì»¨í…Œì´ë„ˆ(container), ë„¤íŠ¸ì›Œí¬(network)ì™€ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬ê°€ ë˜ëŠ” ì´ì ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ëŒ€ë¶€ë¶„ì˜ ìƒí™©ì—ì„œëŠ” ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë˜ì§€ë§Œ ì»¨í…Œì´ë„ˆí™”ëœ ë¡œì»¬ ê°œë°œ í™˜ê²½ì„ êµ¬ì„±í•  ë•ŒëŠ” ë°”ì¸ë“œ ë§ˆìš´íŠ¸ê°€ ë” ìœ ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ë¡œì»¬ì—ì„œ ê°œë°œì„ í•  ë•ŒëŠ” ì¼ë°˜ì ìœ¼ë¡œ í˜„ì¬ ì‘ì—… ë””ë ‰í„°ë¦¬ì— í”„ë¡œì íŠ¸ ì €ì¥ì†Œë¥¼Â <code class="language-plaintext highlighter-rouge">git clone</code>Â ë°›ì•„ë†“ê³  ì½”ë“œë¥¼ ë³€ê²½í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ë°”ì¸ë“œ ë§ˆìš´íŠ¸ë¥¼ ì´ìš©í•´ì„œ í•´ë‹¹ ë””ë ‰í„°ë¦¬ë¥¼ ì»¨í…Œì´ë„ˆì˜ íŠ¹ì • ê²½ë¡œì— ë§ˆìš´íŠ¸í•´ì£¼ë©´ ì½”ë“œë¥¼ ë³€ê²½í•  ë•Œ ë§ˆë‹¤ ë³€ê²½ ì‚¬í•­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ë³€ê²½ëœ ë¶€ë¶„ë„ í˜„ì¬ ì‘ì—… ë””ë ‰í„°ë¦¬ì—ì„œ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í¸ë¦¬í•©ë‹ˆë‹¤.
<br /></p>

<h2 id="ë³¼ë¥¨-ë ˆí¼ëŸ°ìŠ¤-ì°¸ê³ ">ë³¼ë¥¨ ë ˆí¼ëŸ°ìŠ¤ ì°¸ê³ </h2>
<ul>
  <li><a href="https://docs.docker.com/engine/reference/commandline/volume_create/" target="_blank">docker volume create</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/volume_ls/" target="_blank">docker volume ls</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/volume_inspect/" target="_blank">docker volume inspect</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/volume_rm/" target="_blank">docker volume rm</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/volume_prune/" target="_blank">docker volume prune</a>
<br />
<br />
<br />
<br />
<br /></li>
</ul>

<h1 id="-ë„¤íŠ¸ì›Œí¬-ê´€ë ¨-ëª…ë ¹ì–´">ğŸ¯ ë„¤íŠ¸ì›Œí¬ ê´€ë ¨ ëª…ë ¹ì–´</h1>
<p>Docker ì»¨í…Œì´ë„ˆ(container)ëŠ” ê²©ë¦¬ëœ í™˜ê²½ì—ì„œ ëŒì•„ê°€ê¸° ë•Œë¬¸ì— ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì™€ì˜ í†µì‹ ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ í•˜ë‚˜ì˜ Docker ë„¤íŠ¸ì›Œí¬(network)ì— ì—°ê²°ì‹œí‚¤ë©´ ì„œë¡œ í†µì‹ ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.</p>

<h2 id="ë„¤íŠ¸ì›Œí¬-ì¢…ë¥˜">ë„¤íŠ¸ì›Œí¬ ì¢…ë¥˜</h2>
<p>Docker ë„¤íŠ¸ì›Œí¬ëŠ”Â <code class="language-plaintext highlighter-rouge">bridge</code>,Â <code class="language-plaintext highlighter-rouge">host</code>,Â <code class="language-plaintext highlighter-rouge">overlay</code>Â ë“± ëª©ì ì— ë”°ë¼ ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë„¤íŠ¸ì›Œí¬ ë“œë¼ì´ë²„(driver)ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">bridge</code>Â ë„¤íŠ¸ì›Œí¬ëŠ” í•˜ë‚˜ì˜ í˜¸ìŠ¤íŠ¸ ì»´í“¨í„° ë‚´ì—ì„œ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë“¤ì´ ì„œë¡œ ì†Œí†µí•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">host</code>Â ë„¤íŠ¸ì›Œí¬ëŠ” ì»¨í…Œì´ë„ˆë¥¼ í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°ì™€ ë™ì¼í•œ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ëŒë¦¬ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">overlay</code>Â ë„¤íŠ¸ì›Œí¬ëŠ” ì—¬ëŸ¬ í˜¸ìŠ¤íŠ¸ì— ë¶„ì‚°ë˜ì–´ ëŒì•„ê°€ëŠ” ì»¨í…Œì´ë„ˆë“¤ ê°„ì— ë„¤íŠ¸ì›Œí‚¹ì„ ìœ„í•´ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.<br />
<br /></li>
</ul>

<h2 id="ë„¤íŠ¸ì›Œí¬-ìƒì„±">ë„¤íŠ¸ì›Œí¬ ìƒì„±</h2>
<p><code class="language-plaintext highlighter-rouge">docker network create</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•´ì„œ Docker ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker network create our-net
e6dfe4a9a5ec85abcb484662c30a3a0fc76df217dde76d52fac39fae8412ca68
</code></pre></div></div>
<p><br /></p>

<h2 id="ë„¤íŠ¸ì›Œí¬-ì¡°íšŒ">ë„¤íŠ¸ì›Œí¬ ì¡°íšŒ</h2>
<p><code class="language-plaintext highlighter-rouge">docker network ls</code> ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•˜ë©´ í˜„ì¬ ìƒì„±ë˜ì–´ ìˆëŠ” Docker ë„¤íŠ¸ì›Œí¬ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker network <span class="nb">ls
</span>NETWORK ID          NAME                DRIVER              SCOPE
143496b94e57        bridge              bridge              <span class="nb">local
</span>311d6534f79f        host                host                <span class="nb">local
</span>aa89f58200a6        none                null                <span class="nb">local</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="ë„¤íŠ¸ì›Œí¬-ìƒì„¸-ì •ë³´">ë„¤íŠ¸ì›Œí¬ ìƒì„¸ ì •ë³´</h2>
<p><code class="language-plaintext highlighter-rouge">docker network inspect</code>Â ì»¤ë§¨ë“œë¡œ ë„¤íŠ¸ì›Œí¬ì˜ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker network inspect our-net
</code></pre></div></div>
<p><br /></p>

<h2 id="ë„¤íŠ¸ì›Œí¬ì—-ì»¨í…Œì´ë„ˆ-ì—°ê²°">ë„¤íŠ¸ì›Œí¬ì— ì»¨í…Œì´ë„ˆ ì—°ê²°</h2>
<p>ë¨¼ì € ì»¨í…Œì´ë„ˆ í•˜ë‚˜ë¥¼Â <code class="language-plaintext highlighter-rouge">one</code> ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì‹¤í–‰í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-itd</span> <span class="nt">--name</span> one busybox
660bafdce2996378cde070dfd894731bb90745e46d2ab10d6504c0cc9f4bdea9
</code></pre></div></div>
<p>ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•ŒÂ <code class="language-plaintext highlighter-rouge">--network</code>Â ì˜µì…˜ì„ ëª…ì‹œí•´ì£¼ì§€ ì•Šìœ¼ë©´, ê¸°ë³¸ì ìœ¼ë¡œÂ <code class="language-plaintext highlighter-rouge">bride</code> ë¼ëŠ” ì´ë¦„ì˜ ë””í´íŠ¸ ë„¤íŠ¸ì›Œí¬ì— ë¶™ê²Œ ë©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker network inspect bridge
... ìƒëµ ...
        <span class="s2">"Containers"</span>: <span class="o">{</span>
            <span class="s2">"660bafdce2996378cde070dfd894731bb90745e46d2ab10d6504c0cc9f4bdea9"</span>: <span class="o">{</span>
                <span class="s2">"Name"</span>: <span class="s2">"one"</span>,
                <span class="s2">"EndpointID"</span>: <span class="s2">"40b4bbd8385debf86eef2fc2136315e1a82fa1ef72877bfae25477d6e8e46726"</span>,
                <span class="s2">"MacAddress"</span>: <span class="s2">"02:42:ac:11:00:04"</span>,
                <span class="s2">"IPv4Address"</span>: <span class="s2">"172.17.0.4/16"</span>,
                <span class="s2">"IPv6Address"</span>: <span class="s2">""</span>
            <span class="o">}</span>,
        <span class="o">}</span>,
... ìƒëµ ...
</code></pre></div></div>
<p><br /></p>

<p>ì´ì œ <code class="language-plaintext highlighter-rouge">one</code>Â ì»¨í…Œì´ë„ˆì™€Â <code class="language-plaintext highlighter-rouge">our-net</code>Â ë„¤íŠ¸ì›Œí¬ë¥¼ ì—°ê²°í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.<br />
Docker ë„¤íŠ¸ì›Œí¬ì— ì»¨í…Œì´ë„ˆë¥¼ ì—°ê²°í•  ë•ŒëŠ”Â <code class="language-plaintext highlighter-rouge">docker network connect</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker network connect our-net one
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">our-net</code>Â ë„¤íŠ¸ì›Œí¬ì˜ ìƒì„¸ ì •ë³´ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ë³´ë©´Â <code class="language-plaintext highlighter-rouge">Containers</code>Â í•­ëª©ì—Â <code class="language-plaintext highlighter-rouge">one</code>Â ì»¨í…Œì´ë„ˆê°€ ì¶”ê°€ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.Â <code class="language-plaintext highlighter-rouge">one</code>Â ì»¨í…Œì´ë„ˆì— IPÂ <code class="language-plaintext highlighter-rouge">172.19.0.2</code>ê°€ í• ë‹¹ëœ ê²ƒë„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker network inspect our-net
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Name"</span>: <span class="s2">"our-net"</span>,
        <span class="s2">"Id"</span>: <span class="s2">"e6dfe4a9a5ec85abcb484662c30a3a0fc76df217dde76d52fac39fae8412ca68"</span>,
        <span class="s2">"Created"</span>: <span class="s2">"2020-04-26T19:23:04.563643516Z"</span>,
        <span class="s2">"Scope"</span>: <span class="s2">"local"</span>,
        <span class="s2">"Driver"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"EnableIPv6"</span>: <span class="nb">false</span>,
        <span class="s2">"IPAM"</span>: <span class="o">{</span>
            <span class="s2">"Driver"</span>: <span class="s2">"default"</span>,
            <span class="s2">"Options"</span>: <span class="o">{}</span>,
            <span class="s2">"Config"</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">"Subnet"</span>: <span class="s2">"172.19.0.0/16"</span>,
                    <span class="s2">"Gateway"</span>: <span class="s2">"172.19.0.1"</span>
                <span class="o">}</span>
            <span class="o">]</span>
        <span class="o">}</span>,
        <span class="s2">"Internal"</span>: <span class="nb">false</span>,
        <span class="s2">"Attachable"</span>: <span class="nb">false</span>,
        <span class="s2">"Ingress"</span>: <span class="nb">false</span>,
        <span class="s2">"ConfigFrom"</span>: <span class="o">{</span>
            <span class="s2">"Network"</span>: <span class="s2">""</span>
        <span class="o">}</span>,
        <span class="s2">"ConfigOnly"</span>: <span class="nb">false</span>,
        <span class="s2">"Containers"</span>: <span class="o">{</span>
            <span class="s2">"660bafdce2996378cde070dfd894731bb90745e46d2ab10d6504c0cc9f4bdea9"</span>: <span class="o">{</span>
                <span class="s2">"Name"</span>: <span class="s2">"one"</span>,
                <span class="s2">"EndpointID"</span>: <span class="s2">"cc490148a533d40b3aff33a421cc9a01c731c75a8deb70ab729a5358f2fd381c"</span>,
                <span class="s2">"MacAddress"</span>: <span class="s2">"02:42:ac:13:00:02"</span>,
                <span class="s2">"IPv4Address"</span>: <span class="s2">"172.19.0.2/16"</span>,
                <span class="s2">"IPv6Address"</span>: <span class="s2">""</span>
            <span class="o">}</span>
        <span class="o">}</span>,
        <span class="s2">"Options"</span>: <span class="o">{}</span>,
        <span class="s2">"Labels"</span>: <span class="o">{}</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="ë„¤íŠ¸ì›Œí¬ë¡œë¶€í„°-ì»¨í…Œì´ë„ˆ-ì—°ê²°-í•´ì œ">ë„¤íŠ¸ì›Œí¬ë¡œë¶€í„° ì»¨í…Œì´ë„ˆ ì—°ê²° í•´ì œ</h2>
<p>í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆëŠ” ì—¬ëŸ¬ ê°œì˜ ë„¤íŠ¸ì›Œí¬ì— ë™ì‹œì— ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìµœì´ˆì—Â <code class="language-plaintext highlighter-rouge">one</code>Â ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•ŒÂ <code class="language-plaintext highlighter-rouge">bridge</code>Â ë„¤íŠ¸ì›Œí¬ ë¶™ì—ˆê¸° ë•Œë¬¸ì—, í˜„ì¬Â <code class="language-plaintext highlighter-rouge">one</code>Â ì»¨í…Œì´ë„ˆëŠ”Â <code class="language-plaintext highlighter-rouge">our-net</code>Â ë„¤íŠ¸ì›Œí¬ì™€Â <code class="language-plaintext highlighter-rouge">bridge</code>Â ë„¤íŠ¸ì›Œí¬ì— ë™ì‹œì— ë¶™ì–´ìˆê²Œ ë©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">one</code>Â ì»¨í…Œì´ë„ˆë¥¼Â <code class="language-plaintext highlighter-rouge">bridge</code>Â ë„¤íŠ¸ì›Œí¬ë¡œë¶€í„° í•´ì œ í•˜ê² ìŠµë‹ˆë‹¤. Docker ë„¤íŠ¸ì›Œí¬ë¡œë¶€í„° ì»¨í…Œì´ë„ˆì˜ ì—°ê²°ì„ ëŠì„ ë•ŒëŠ”Â <code class="language-plaintext highlighter-rouge">docker network disconnect</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker network disconnect bridge one
</code></pre></div></div>
<p><br /></p>

<h2 id="ë‘ë²ˆì§¸-ì»¨í…Œì´ë„ˆ-ì—°ê²°">ë‘ë²ˆì§¸ ì»¨í…Œì´ë„ˆ ì—°ê²°</h2>
<p>í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆë¥¼ ë”Â <code class="language-plaintext highlighter-rouge">our-net</code>Â ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°í•©ë‹ˆë‹¤. ì´ë²ˆì—ëŠ”Â <code class="language-plaintext highlighter-rouge">--network</code>Â ì˜µì…˜ì„ ì‚¬ìš©í•´ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ë°”ë¡œ ì—°ê²°í•  ë„¤íŠ¸ì›Œí¬ë¥¼ ì§€ì •í•´ì£¼ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-itd</span> <span class="nt">--name</span> two <span class="nt">--network</span> our-net busybox
0e7fe8a59f9d3f8bd545d3e557ffd34100a09b8ebe92ae5a375f37a5d072873d
</code></pre></div></div>
<p><br /></p>

<h2 id="ì»¨í…Œì´ë„ˆ-ê°„-ë„¤íŠ¸ì›Œí‚¹">ì»¨í…Œì´ë„ˆ ê°„ ë„¤íŠ¸ì›Œí‚¹</h2>
<p>ì»¨í…Œì´ë„ˆ ì´ë¦„ì„ í˜¸ìŠ¤íŠ¸ë„¤ì„(hostname)ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker <span class="nb">exec </span>one ping two
PING two <span class="o">(</span>172.19.0.3<span class="o">)</span>: 56 data bytes
64 bytes from 172.19.0.3: <span class="nb">seq</span><span class="o">=</span>0 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.119 ms
64 bytes from 172.19.0.3: <span class="nb">seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.105 ms
64 bytes from 172.19.0.3: <span class="nb">seq</span><span class="o">=</span>2 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.116 ms
64 bytes from 172.19.0.3: <span class="nb">seq</span><span class="o">=</span>3 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.883 ms
64 bytes from 172.19.0.3: <span class="nb">seq</span><span class="o">=</span>4 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.127 ms
</code></pre></div></div>
<p><br /></p>

<h2 id="ë„¤íŠ¸ì›Œí¬-ì œê±°">ë„¤íŠ¸ì›Œí¬ ì œê±°</h2>
<p><code class="language-plaintext highlighter-rouge">docker network rm</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•´ì„œÂ our-netÂ ë„¤íŠ¸ì›Œí¬ë¥¼ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆê°€ ìˆì„ ë•ŒëŠ” ì œê±°ê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¨¼ì € í•´ë‹¹ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ë˜ì–´ ì‹¤í–‰ ì¤‘ì¸ ëª¨ë“  ì»¨í…Œì´ë„ˆë¥¼ ì¤‘ì§€ì‹œí‚¤ê³ , ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚­ì œí•´ì•¼ í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì»¨í…Œì´ë„ˆ ì¤‘ì§€</span>
<span class="nv">$ </span>docker stop one two
one
two

<span class="c"># ë„¤íŠ¸ì›Œí¬ ì‚­ì œ</span>
<span class="nv">$ </span>docker network <span class="nb">rm </span>our-net
our-net
</code></pre></div></div>
<p><br /></p>

<h2 id="ë„¤íŠ¸ì›Œí¬-ì²­ì†Œ">ë„¤íŠ¸ì›Œí¬ ì²­ì†Œ</h2>
<p><code class="language-plaintext highlighter-rouge">docker network prune</code>Â ì»¤ë§¨ë“œë¥¼ ì´ìš©í•´ì„œ ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ë¥¼ í•œë²ˆì— ëª¨ë‘ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker network prune
WARNING! This will remove all networks not used by at least one container.
Are you sure you want to <span class="k">continue</span>? <span class="o">[</span>y/N] y
</code></pre></div></div>
<p><br /></p>

<h2 id="ë„¤íŠ¸ì›Œí¬-ë ˆí¼ëŸ°ìŠ¤-ì°¸ê³ ">ë„¤íŠ¸ì›Œí¬ ë ˆí¼ëŸ°ìŠ¤ ì°¸ê³ </h2>
<ul>
  <li><a href="https://docs.docker.com/engine/reference/commandline/network_ls/" target="_blank">docker network ls</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/network_create/" target="_blank">docker network create</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/network_inspect/" target="_blank">docker network inspect</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/network_connect/" target="_blank">docker network connect</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/network_disconnect/" target="_blank">docker network disconnect</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/network_rm/" target="_blank">docker network rm</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/network_prune/" target="_blank">docker network prune</a>
<br />
<br />
<br />
<br />
<br /></li>
</ul>

<h1 id="-ì´ë¯¸ì§€-ê´€ë ¨-ëª…ë ¹ì–´">ğŸ¯ ì´ë¯¸ì§€ ê´€ë ¨ ëª…ë ¹ì–´</h1>
<p>Docker CLI ë„êµ¬ëŠ” Docker ì´ë¯¸ì§€(image)ì˜ íš¨ê³¼ì ì¸ ê´€ë¦¬ë¥¼ ìœ„í•´ì„œ ë‹¤ì–‘í•œ ì»¤ë§¨ë“œ(command)ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
<br /></p>

<h2 id="ì´ë¯¸ì§€-ì¡°íšŒ">ì´ë¯¸ì§€ ì¡°íšŒ</h2>
<p><code class="language-plaintext highlighter-rouge">docker images</code> ì»¤ë§¨ë“œë¡œ ì´ë¯¸ì§€ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì´ë¯¸ì§€ ì¡°íšŒ</span>
<span class="nv">$ </span>docker images

<span class="c">## íŠ¹ì • ë¦¬íŒŒì§€í† ë¦¬(repository)ì— í•´ë‹¹í•˜ëŠ” ì´ë¯¸ì§€ë§Œ í•„í„°ë§í•´ì„œ ë³´ê³  ì‹¶ì„ ë•ŒëŠ”</span>
<span class="c">## ë¦¬íŒŒì§€í† ë¦¬ë¥¼ ì¸ìë¡œ ë„˜ê²¨ì£¼ë©´ ë©ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker images node
node                10-alpine           34a10d47f150        2 weeks ago         83.5MB
node                12-alpine           f77abbe89ac1        2 weeks ago         88.1MB

<span class="c"># íƒœê·¸ê¹Œì§€ ì¸ìë¡œ ë„˜ê¸°ë©´ íŠ¹ì • ì´ë¯¸ì§€ê°€ ì¡°íšŒë©ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker images node:12-alpine
node                12-alpine           f77abbe89ac1        2 weeks ago         88.1MB
</code></pre></div></div>
<p><br /></p>

<h2 id="ì´ë¯¸ì§€-ë‹¤ìš´ë¡œë“œ">ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</h2>
<p><code class="language-plaintext highlighter-rouge">docker pull</code> ì»¤ë§¨ë“œë¥¼ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">run</code> ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ì´ë¯¸ì§€ê°€ ì—†ì„ ë•Œ ìë™ìœ¼ë¡œ ë‹¤ìš´ë°›ìœ¼ë‹ˆÂ <code class="language-plaintext highlighter-rouge">pull</code> ëª…ë ¹ì–´ë¥¼ ì–¸ì œ ì“°ëŠ”ì§€ ê¶ê¸ˆí•  ìˆ˜ ìˆëŠ”ë°Â <code class="language-plaintext highlighter-rouge">pull</code>ì€ ì´ë¯¸ì§€ë¥¼ ìµœì‹ ë²„ì „ìœ¼ë¡œ ë‹¤ì‹œ ë‹¤ìš´ ë°›ìŠµë‹ˆë‹¤. ê°™ì€ íƒœê·¸ì§€ë§Œ ì´ë¯¸ì§€ê°€ ì—…ë°ì´íŠ¸ ëœ ê²½ìš°ëŠ”Â <code class="language-plaintext highlighter-rouge">pull</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ ì´ë¯¸ì§€ë¥¼ ìƒˆë¡œ ë‹¤ìš´ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì´ë¯¸ì§€ ë‹¤ìš´</span>
<span class="nv">$ </span>docker pull ubuntu:14.04
</code></pre></div></div>
<p><br /></p>

<h2 id="ì´ë¯¸ì§€-ë¹Œë“œ">ì´ë¯¸ì§€ ë¹Œë“œ</h2>
<p><code class="language-plaintext highlighter-rouge">docker build</code>Â ì»¤ë§¨ë“œëŠ” Docker ì´ë¯¸ì§€ë¥¼ ë¹Œë“œ(build)í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>

<p>Docker ë°ëª¬ì´ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ë ¤ë©´ ì†Œìœ„ ì»¨í…ìŠ¤íŠ¸(context)ë¼ê³ ë„ ë¶ˆë¦¬ëŠ” Dockerfileì„ ë‹´ê³  ìˆëŠ” ë””ë ‰í„°ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤. Dockerfileì€ ë³´í†µ ê°™ì€ ë””ë ‰í„°ë¦¬ ì•ˆì— ìˆëŠ” ì„¤ì • íŒŒì¼ì´ë‚˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì´ìš©í•´ì„œ ì´ë¯¸ì§€ì˜ ë¹Œë“œ ì ˆì°¨ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># í˜„ì¬ ì‘ì—… ë””ë ‰í„°ë¦¬ ê¸°ì¤€ ì´ë¯¸ì§€ ë¹Œë“œ</span>
<span class="nv">$ </span>docker build <span class="nb">.</span>

<span class="c"># ë„¤íŠ¸ì›Œí¬ ìƒì˜ Git repository ì£¼ì†Œë‚˜ ì••ì¶• íŒŒì¼ ë¹Œë“œ</span>
<span class="nv">$ </span>docker build github.com/creack/docker-firefox

<span class="c"># -t ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ Docker ì´ë¯¸ì§€ì— íƒœê·¸(tag)ë¥¼ ì„¤ì •</span>
<span class="c">## íƒœê·¸ëŠ” ë¦¬íŒŒì§€í† ë¦¬(repository):íƒœê·¸(tag) í˜•íƒœë¡œ ì§€ì •ì´ ê°€ëŠ¥í•˜ë©°</span>
<span class="c">## íƒœê·¸ ë¶€ë¶„ì„ ìƒëµí•˜ë©´ latestê°€ íƒœê·¸ê°€ ë©ë‹ˆë‹¤.</span>
<span class="nv">$ </span>docker build <span class="nt">-t</span> <span class="nb">test</span>:1.0 <span class="nb">.</span>

<span class="c"># -f ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ë””í´íŠ¸ì¸ Dockerfile ëŒ€ì‹ ì— ë‹¤ë¥¸ íŒŒì¼ë¡œ ë¶€í„° Docker ì´ë¯¸ì§€ë¥¼ ë¹Œë“œ</span>
<span class="nv">$ </span>docker build <span class="nt">-f</span> Dockerfile.dev <span class="nb">.</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="ì´ë¯¸ì§€-íƒœê¹…">ì´ë¯¸ì§€ íƒœê¹…</h2>
<p>ì´ë¯¸ì§€ íƒœê¹…ì€ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œ í•œ í›„ì— ë³„ë„ë¡œ í•´ì¤„ ìˆ˜ë„ ìˆëŠ”ë°, ì´ ë•ŒÂ <code class="language-plaintext highlighter-rouge">docker tag</code>Â ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì²«ë²ˆì§¸ ì¸ìë¡œ ì´ë¯¸ì§€ID, ë‘ë²ˆì§¸ ì¸ìë¡œ ë¦¬íŒŒì§€í† ë¦¬ ë˜ëŠ” íƒœê·¸ê¹Œì§€ ë„˜ê²¨ì£¼ë©´ ë©ë‹ˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker tag 8bae72379b48 <span class="nb">test</span>:2.0
</code></pre></div></div>
<p><br /></p>

<h2 id="ì´ë¯¸ì§€-ì‚­ì œ">ì´ë¯¸ì§€ ì‚­ì œ</h2>
<p><code class="language-plaintext highlighter-rouge">docker rmi</code>Â ì»¤ë§¨ë“œë¡œ Docker ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚­ì œí•˜ë ¤ëŠ” ì´ë¯¸ì§€ì˜ IDë‚˜ íƒœê·¸ë¥¼ ì¸ìë¡œ ë„˜ê²¨ì£¼ë©´ í•´ë‹¹ ì´ë¯¸ì§€ê°€ ì‚­ì œê°€ ë©ë‹ˆë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì´ë¯¸ì§€ ì‚­ì œ</span>
<span class="nv">$ </span>docker rmi f77abbe89ac1
<span class="nv">$ </span>docker rmi node:12-alpine

<span class="c"># ì´ë¯¸ì§€ ì¡°íšŒ</span>
<span class="nv">$ </span>docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
test2               latest              8bae72379b48        56 minutes ago      5.6MB
<span class="nb">test                </span>latest              8bae72379b48        56 minutes ago      5.6MB

<span class="c"># -f ì˜µì…˜ì„ ì£¼ê³  ì´ë¯¸ì§€ IDë¥¼ ì¸ìë¡œ ë„˜ê¸°ë©´ ì´ë¯¸ì§€ ì‚­ì œ</span>
<span class="nv">$ </span>docker rmi <span class="nt">-f</span> 8bae72379b48
Untagged: test2:latest
Untagged: <span class="nb">test</span>:latest
Deleted: sha256:8bae72379b4

<span class="c"># ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ ì „ì²´ ì‚­ì œ</span>
<span class="nv">$ </span>docker rmi <span class="si">$(</span>docker images <span class="nt">-q</span><span class="si">)</span> <span class="nt">-f</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="ì´ë¯¸ì§€-ë ˆí¼ëŸ°ìŠ¤-ì°¸ê³ ">ì´ë¯¸ì§€ ë ˆí¼ëŸ°ìŠ¤ ì°¸ê³ </h2>
<ul>
  <li><a href="https://docs.docker.com/engine/reference/commandline/images/" target="_blank">docker images</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/build/" target="_blank">docker build</a></li>
  <li><a href="https://docs.docker.com/engine/reference/commandline/rmi/" target="_blank">docker rmi</a>
<br />
<br />
<br />
<br />
<br /></li>
</ul>

<h1 id="ï¸-ì°¸ê³ ì‚¬ì´íŠ¸">ğŸ™‡ğŸ»â€â™‚ï¸ ì°¸ê³ ì‚¬ì´íŠ¸</h1>
<ul>
  <li><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank">https://subicura.com</a></li>
  <li><a href="https://www.daleseo.com/?tag=Docker" target="_blank">https://www.daleseo.com</a></li>
</ul>]]></content><author><name>Oh</name></author><category term="Docker" /><category term="Docker" /><category term="Container" /><summary type="html"><![CDATA[ğŸ’¾ ë„ì»¤ì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">ğŸ³ Docker ì‚´í´ë³´ê¸°</title><link href="http://localhost:4000/docker/docker-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0/" rel="alternate" type="text/html" title="ğŸ³ Docker ì‚´í´ë³´ê¸°" /><published>2023-02-16T00:00:00+09:00</published><updated>2023-02-16T00:00:00+09:00</updated><id>http://localhost:4000/docker/docker-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0</id><content type="html" xml:base="http://localhost:4000/docker/docker-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0/"><![CDATA[<p>ğŸ’¾ ë„ì»¤ ê¸°ë³¸ ê°œë…ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.</p>

<p><br /></p>

<h1 id="-ë„ì»¤ë€">ğŸ¤” ë„ì»¤ë€?</h1>
<p>ë„ì»¤ëŠ” <span class="danger-color">ì»¨í…Œì´ë„ˆ ê¸°ë°˜ì˜ ì˜¤í”ˆì†ŒìŠ¤ ê°€ìƒí™” í”Œë«í¼</span>ì…ë‹ˆë‹¤.</p>

<h2 id="ì»¨í…Œì´ë„ˆcontainer">ì»¨í…Œì´ë„ˆ(Container)</h2>
<p>ì»¨í…Œì´ë„ˆëŠ” ê²©ë¦¬ëœ ê³µê°„ì—ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‘í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ê°€ìƒí™” ê¸°ìˆ ì˜ í•˜ë‚˜ì§€ë§Œ ê¸°ì¡´ë°©ì‹ê³¼ëŠ” ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤.</p>

<p>ê¸°ì¡´ì˜ ê°€ìƒí™” ë°©ì‹ì€ ì£¼ë¡œÂ <strong>OSë¥¼ ê°€ìƒí™”</strong> í•˜ì˜€ìŠµë‹ˆë‹¤. <strong>VMwareë‚˜ VirtualBoxê°™ì€ ê°€ìƒë¨¸ì‹ ì€ í˜¸ìŠ¤íŠ¸ OSìœ„ì— ê²ŒìŠ¤íŠ¸ OS ì „ì²´ë¥¼ ê°€ìƒí™”í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ì‹</strong>ì…ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ì—¬ëŸ¬ê°€ì§€ OSë¥¼ ê°€ìƒí™”(ë¦¬ëˆ…ìŠ¤ì—ì„œ ìœˆë„ìš°ë¥¼ ëŒë¦°ë‹¤ë˜ê°€) í•  ìˆ˜ ìˆê³  ë¹„êµì  ì‚¬ìš©ë²•ì´ ê°„ë‹¨í•˜ì§€ë§Œ <strong>ë¬´ê²ê³  ëŠë ¤ì„œ</strong> ìš´ì˜í™˜ê²½ì—ì„  ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.</p>

<p><img src="/assets/images/posts/docker/20230216/d1969bd2-2ec2-41d2-924e-38202359d727.png" alt="vm_docker" /></p>

<p>OS ê°€ìƒí™”ëŠ” ì„±ëŠ¥ë¬¸ì œê°€ ìˆì—ˆê³  ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´Â <strong>í”„ë¡œì„¸ìŠ¤ë¥¼ ê²©ë¦¬</strong>Â í•˜ëŠ” ë°©ì‹ì´ ë“±ì¥í•©ë‹ˆë‹¤.</p>

<p><strong>ë¦¬ëˆ…ìŠ¤ì—ì„œëŠ” ì´ ë°©ì‹ì„ ë¦¬ëˆ…ìŠ¤ ì»¨í…Œì´ë„ˆë¼ê³  í•˜ê³  ë‹¨ìˆœíˆ í”„ë¡œì„¸ìŠ¤ë¥¼ ê²©ë¦¬ì‹œí‚¤ê¸° ë•Œë¬¸ì— ê°€ë³ê³  ë¹ ë¥´ê²Œ ë™ì‘í•©ë‹ˆë‹¤. CPUë‚˜ ë©”ëª¨ë¦¬ëŠ” ë”± í”„ë¡œì„¸ìŠ¤ê°€ í•„ìš”í•œ ë§Œí¼ë§Œ ì¶”ê°€ë¡œ ì‚¬ìš©í•˜ê³  ì„±ëŠ¥ì ìœ¼ë¡œë„ ê±°ì˜ ì†ì‹¤ì´ ì—†ìŠµë‹ˆë‹¤.</strong></p>

<p>í•˜ë‚˜ì˜ ì„œë²„ì— ì—¬ëŸ¬ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©´ ì„œë¡œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê³  ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ ë§ˆì¹˜ ê°€ë²¼ìš´ Virtual Machineì„ ì‚¬ìš©í•˜ëŠ” ëŠë‚Œì„ ì¤ë‹ˆë‹¤.
<br />
<br />
<br /></p>

<h2 id="ì´ë¯¸ì§€image">ì´ë¯¸ì§€(Image)</h2>
<p>ë„ì»¤ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê°œë…ì€ ì»¨í…Œì´ë„ˆì™€ í•¨ê»˜ ì´ë¯¸ì§€ë¼ëŠ” ê°œë…ì…ë‹ˆë‹¤.</p>

<p><img src="/assets/images/posts/docker/20230216/d1969bd2-2ec2-41d2-924e-38202359d722.png" alt="docker image" /></p>

<p><strong>ì´ë¯¸ì§€ëŠ”Â ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì— í•„ìš”í•œ íŒŒì¼ê³¼ ì„¤ì •ê°’ë“±ì„ í¬í•¨í•˜ê³  ìˆëŠ” ê²ƒ</strong>ìœ¼ë¡œ ìƒíƒœê°’ì„ ê°€ì§€ì§€ ì•Šê³  ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.(Immutable)</p>

<p>ì»¨í…Œì´ë„ˆëŠ” ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•œ ìƒíƒœë¼ê³  ë³¼ ìˆ˜ ìˆê³  ì¶”ê°€ë˜ê±°ë‚˜ ë³€í•˜ëŠ” ê°’ì€ ì»¨í…Œì´ë„ˆì— ì €ì¥ë©ë‹ˆë‹¤. ê°™ì€ ì´ë¯¸ì§€ì—ì„œ ì—¬ëŸ¬ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ìˆ˜ ìˆê³  ì»¨í…Œì´ë„ˆì˜ ìƒíƒœê°€ ë°”ë€Œê±°ë‚˜ ì»¨í…Œì´ë„ˆê°€ ì‚­ì œë˜ë”ë¼ë„ ì´ë¯¸ì§€ëŠ” ë³€í•˜ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤.</p>

<p>ubuntu ì´ë¯¸ì§€ëŠ” ubuntuë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ëª¨ë“  íŒŒì¼ì„ ê°€ì§€ê³  ìˆê³  MySQL ì´ë¯¸ì§€ëŠ” debianì„ ê¸°ë°˜ìœ¼ë¡œ MySQLì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ íŒŒì¼ê³¼ ì‹¤í–‰ ëª…ë ¹ì–´, í¬íŠ¸ ì •ë³´ë“±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>

<p>ë§ê·¸ëŒ€ë¡œ <strong>ì´ë¯¸ì§€ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— ë” ì´ìƒ ì˜ì¡´ì„± íŒŒì¼ì„ ì»´íŒŒì¼í•˜ê³  ì´ê²ƒì €ê²ƒ ì„¤ì¹˜í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.</strong> ì´ì œ ìƒˆë¡œìš´ ì„œë²„ê°€ ì¶”ê°€ë˜ë©´ ë¯¸ë¦¬ ë§Œë“¤ì–´ ë†“ì€ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ê³  ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<p><strong>ë„ì»¤ ì´ë¯¸ì§€ëŠ”Â <a href="https://hub.docker.com/search?q=" target="_blank">Docker hub</a>ì— ë“±ë¡í•˜ê±°ë‚˜Â Docker RegistryÂ ì €ì¥ì†Œë¥¼ ì§ì ‘ ë§Œë“¤ì–´ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong>
<br />
<br />
<br />
<br />
<br /></p>

<h1 id="-íŠ¹ì§•">ğŸ¯ íŠ¹ì§•</h1>
<h2 id="ë ˆì´ì–´layer-ì €ì¥ë°©ì‹">ë ˆì´ì–´(Layer) ì €ì¥ë°©ì‹</h2>
<p>ë„ì»¤ ì´ë¯¸ì§€ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— ë³´í†µ ìš©ëŸ‰ì´ ìˆ˜ë°±MBì— ì´ë¦…ë‹ˆë‹¤. ì²˜ìŒ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ì„ ë• í¬ê²Œ ë¶€ë‹´ì´ ì•ˆë˜ì§€ë§Œ ê¸°ì¡´ ì´ë¯¸ì§€ì— íŒŒì¼ í•˜ë‚˜ ì¶”ê°€í–ˆë‹¤ê³  ìˆ˜ë°±MBë¥¼ ë‹¤ì‹œ ë‹¤ìš´ë°›ëŠ”ë‹¤ë©´ ë§¤ìš° ë¹„íš¨ìœ¨ì ì¼ ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.</p>

<p><img src="/assets/images/posts/docker/20230216/d1969bd2-2ec2-41d2-924e-38202359d728.png" alt="docker layer" /></p>

<p>ë„ì»¤ëŠ” ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´Â ë ˆì´ì–´ë¼ëŠ” ê°œë…ì„ ì‚¬ìš©í•˜ê³  ìœ ë‹ˆì˜¨ íŒŒì¼ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ì—¬ ì—¬ëŸ¬ê°œì˜ ë ˆì´ì–´ë¥¼ í•˜ë‚˜ì˜ íŒŒì¼ì‹œìŠ¤í…œìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ë¯¸ì§€ëŠ” ì—¬ëŸ¬ê°œì˜ ì½ê¸° ì „ìš©Â ë ˆì´ì–´ë¡œ êµ¬ì„±ë˜ê³  íŒŒì¼ì´ ì¶”ê°€ë˜ê±°ë‚˜ ìˆ˜ì •ë˜ë©´ ìƒˆë¡œìš´ ë ˆì´ì–´ê°€ ìƒì„±ë©ë‹ˆë‹¤.</p>

<p>ubuntu ì´ë¯¸ì§€ê°€Â AÂ +Â BÂ +Â Cì˜ ì§‘í•©ì´ë¼ë©´, ubuntu ì´ë¯¸ì§€ë¥¼ ë² ì´ìŠ¤ë¡œ ë§Œë“  nginx ì´ë¯¸ì§€ëŠ”Â AÂ +Â BÂ +Â CÂ +Â nginxê°€ ë©ë‹ˆë‹¤.</p>

<p>webapp ì´ë¯¸ì§€ë¥¼ nginx ì´ë¯¸ì§€ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤ë©´Â AÂ +Â BÂ +Â CÂ +Â nginxÂ +Â sourceÂ ë ˆì´ì–´ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.</p>

<p>webapp ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•˜ë©´Â A,Â B,Â C,Â nginxÂ ë ˆì´ì–´ë¥¼ ì œì™¸í•œ ìƒˆë¡œìš´Â source(v2)Â ë ˆì´ì–´ë§Œ ë‹¤ìš´ë°›ìœ¼ë©´ ë˜ê¸° ë•Œë¬¸ì— êµ‰ì¥íˆ íš¨ìœ¨ì ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br />
<br />
<br /></p>

<h2 id="ì´ë¯¸ì§€-ê²½ë¡œ">ì´ë¯¸ì§€ ê²½ë¡œ</h2>
<p><img src="/assets/images/posts/docker/20230216/d1969bd2-2ec2-41d2-924e-38202359d729.png" alt="docker layer" /></p>

<p>ì´ë¯¸ì§€ëŠ” url ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬í•˜ë©° íƒœê·¸ë¥¼ ë¶™ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ubuntu 14.04 ì´ë¯¸ì§€ëŠ” <strong>docker.io/library/ubuntu:14.04</strong> ë˜ëŠ” <strong>docker.io/libray/ubuntu:trusty</strong> ì´ê³  <strong>docker.io/library</strong> ëŠ” <strong>ìƒëµ ê°€ëŠ¥</strong>í•˜ë©° <strong>ubuntu:14.04</strong>ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì´ëŸ¬í•œ ë°©ì‹ì€ ì´í•´í•˜ê¸° ì‰½ê³  í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° íƒœê·¸ ê¸°ëŠ¥ì„ ì˜ ì´ìš©í•˜ë©´ í…ŒìŠ¤íŠ¸ë‚˜ ë¡¤ë°±ë„ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br />
<br />
<br /></p>

<h2 id="dockerfile">Dockerfile</h2>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> subicura/vertx3:3.3.1</span>
<span class="k">MAINTAINER</span><span class="s"> chungsub.kim@purpleworks.co.kr</span>

<span class="k">ADD</span><span class="s"> build/distributions/app-3.3.1.tar /</span>
<span class="k">ADD</span><span class="s"> config.template.json /app-3.3.1/bin/config.json</span>
<span class="k">ADD</span><span class="s"> docker/script/start.sh /usr/local/bin/</span>
<span class="k">RUN </span><span class="nb">ln</span> <span class="nt">-s</span> /usr/local/bin/start.sh /start.sh

<span class="k">EXPOSE</span><span class="s"> 8080</span>
<span class="k">EXPOSE</span><span class="s"> 7000</span>

<span class="k">CMD</span><span class="s"> ["start.sh"]</span>
</code></pre></div></div>
<p>ë„ì»¤ëŠ” ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê¸° <code class="language-plaintext highlighter-rouge">ìœ„í•´Â Dockerfile</code> ì´ë¼ëŠ” íŒŒì¼ì— ìì²´ <code class="language-plaintext highlighter-rouge">DSLDomain-specific language</code> ì–¸ì–´ë¥¼ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€ ìƒì„± ê³¼ì •ì„ ì‘ì„±í•©ë‹ˆë‹¤.
<br />
<br />
<br /></p>

<h2 id="docker-hub">Docker Hub</h2>
<p>ë„ì»¤ ì´ë¯¸ì§€ì˜ ìš©ëŸ‰ì€ ë³´í†µ ìˆ˜ë°± MBì´ê³ , ìˆ˜ GBê°€ ë„˜ëŠ” ê²½ìš°ë„ í”í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í° ìš©ëŸ‰ì˜ ì´ë¯¸ì§€ë¥¼ ì„œë²„ì— ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šì€ë° ë„ì»¤ëŠ” <a href="https://hub.docker.com/search?q=" target="_blank">Docker hub</a>ë¥¼ í†µí•´ ê³µê°œ ì´ë¯¸ì§€ë¥¼ ë¬´ë£Œë¡œ ê´€ë¦¬í•´ ì¤ë‹ˆë‹¤. 
<br />
<br />
<br /></p>

<h2 id="commandì™€-api">Commandì™€ API</h2>
<p>ë„ì»¤ í´ë¼ì´ì–¸íŠ¸ì˜ ì»¤ë§¨ë“œ ëª…ë ¹ì–´ëŠ” ì§ê´€ì ì´ê³  ì‚¬ìš©í•˜ê¸° ì‰¬ìš°ë©° ì»¨í…Œì´ë„ˆì˜ ë³µì¡í•œ ì‹œìŠ¤í…œ êµ¬ì„±ì„ ì´í•´í•˜ì§€ ëª»í•˜ë”ë¼ë„ í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ httpê¸°ë°˜ì˜ Rest APIë„ ì§€ì›í•˜ì—¬ í™•ì¥ì„±ì´ êµ‰ì¥íˆ ì¢‹ìŠµë‹ˆë‹¤.
<br />
<br />
<br /></p>

<h2 id="í›Œë¥­í•œ-ìƒíƒœê³„">í›Œë¥­í•œ ìƒíƒœê³„</h2>
<p>ë„ì»¤ëŠ” êµ‰ì¥íˆ í° ìƒíƒœê³„ë¥¼ ê°€ì§€ê³  ìˆê³  ì»¤ë‹¤ë€ ê¸°ì—…ê³¼ í˜‘ë ¥í•˜ì—¬ ì‚¬ì‹¤ìƒ í´ë¼ìš°ë“œ ì»¨í…Œì´ë„ˆ ì„¸ê³„ì˜ ê¸°ì¤€ì´ ë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê¹…, ëª¨ë‹ˆí„°ë§, ìŠ¤í† ë¦¬ì§€, ë„¤íŠ¸ì›Œí¬, ì»¨í…Œì´ë„ˆ ê´€ë¦¬, ë°°í¬ë“± ë‹¤ì–‘í•œ ë¶„ì•¼ì—ì„œ ë‹¤ì–‘í•œ íˆ´ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
<br />
<br />
<br /></p>

<h2 id="ì»¤ë®¤ë‹ˆí‹°-ì§€ì›">ì»¤ë®¤ë‹ˆí‹° ì§€ì›</h2>
<p>ë„ì»¤ëŠ” í™ë³´ì™€ ì»¤ë®¤ë‹ˆí‹° ê´€ë¦¬ì— êµ‰ì¥íˆ ì‹ ê²½ì“°ê³  ìˆìŠµë‹ˆë‹¤. í™ˆí˜ì´ì§€ì—ì„œëŠ” ì „ì„¸ê³„ì—ì„œ ì—´ë¦¬ëŠ” ë°‹ì—… ìƒí™©ì„ ë³¼ ìˆ˜ ìˆê³  ì¼ì£¼ì¼ë§ˆë‹¤ ë°œì†¡ë˜ëŠ” ë‰´ìŠ¤ë ˆí„°ì—ëŠ” ë‹¤ì–‘í•œ ê°œë°œìë“¤ì˜ ê¸€ì´ ì‹¤ë ¤ìˆìŠµë‹ˆë‹¤.
<br />
<br />
<br />
<br />
<br /></p>

<h1 id="-ë„ì»¤-êµ¬ì¡°">ğŸ¯ ë„ì»¤ êµ¬ì¡°</h1>
<p>ë„ì»¤ëŠ” í´ë¼ì´ì–¸íŠ¸-ì„œë²„ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
<img src="/assets/images/posts/docker/20230216/d1969bd2-2ec2-41d2-924e-38202359d730.png" alt="ë„ì»¤ êµ¬ì¡°" /></p>

<h2 id="docker-daemon">Docker Daemon</h2>
<p>ë„ì»¤ ë°ëª¬(<code class="language-plaintext highlighter-rouge">dockerd</code>)ì€ ë„ì»¤ REST API ìš”ì²­ì„ ë“£ê³  ë„ì»¤ ì˜¤ë¸Œì íŠ¸ë“¤(ì´ë¯¸ì§€, ì»¨í…Œì´ë„ˆ, ë„¤íŠ¸ì›Œí¬, ë³¼ë¥¨)ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ë˜í•œ ë„ì»¤ ë°ëª¬ì€ ë„ì»¤ ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë‹¤ë¥¸ ë„ì»¤ ë°ëª¬ê³¼ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br />
<br /></p>

<h2 id="docker-client">Docker Client</h2>
<p>ë„ì»¤ í´ë¼ì´ì–¸íŠ¸(<code class="language-plaintext highlighter-rouge">docker</code>)ëŠ” ë„ì»¤ í˜¸ìŠ¤íŠ¸ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, docker run ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ë„ì»¤ í´ë¼ì´ì–¸íŠ¸ëŠ” í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ REST API Callìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë„ì»¤ ë°ëª¬(<code class="language-plaintext highlighter-rouge">dockerd</code>)ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.</p>

<p>ë„ì»¤ í´ë¼ì´ì–¸íŠ¸ì˜ ì£¼ìš” ëª©ì ì€ ì§ì ‘ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ í˜¸ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
<br />
<br /></p>

<h2 id="docker-registries">Docker Registries</h2>
<p>Docker RegistriesëŠ” ë„ì»¤ ì´ë¯¸ì§€ ì €ì¥ì†Œ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
<br />
<br /></p>

<h2 id="docker-objects">Docker Objects</h2>
<p>Docker ObjectëŠ” Docker Daemonì— ì˜í•´, ìƒì„± ë° ê´€ë¦¬ë˜ëŠ” ì´ë¯¸ì§€, ì»¨í…Œì´ë„ˆ, ë„¤íŠ¸ì›Œí¬, ë³¼ë¥¨ ë“±ì˜ ê°œì²´ë¥¼ ë§í•©ë‹ˆë‹¤.
<br />
<br />
<br />
<br />
<br /></p>

<h1 id="-ë„ì»¤-ì„¤ì¹˜">ğŸ³ ë„ì»¤ ì„¤ì¹˜</h1>
<p>ê° OSë³„ ì„¤ì¹˜ ë°©ë²•ì€ ë‹¤ìŒ ë§í¬ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<ul>
  <li><a href="https://docs.docker.com/desktop/mac/install/" target="_blank">MacOSì—ì„œ ë„ì»¤ ì„¤ì¹˜</a></li>
  <li><a href="https://docs.docker.com/desktop/linux/install/" target="_blank">Linuxì—ì„œ ë„ì»¤ ì„¤ì¹˜</a></li>
  <li><a href="https://docs.docker.com/desktop/windows/install/" target="_blank">Windowsì—ì„œ ë„ì»¤ ì„¤ì¹˜</a>
<br />
<br />
<br />
<br />
<br /></li>
</ul>

<h1 id="ï¸-ì°¸ê³ ì‚¬ì´íŠ¸">ğŸ™‡ğŸ»â€â™‚ï¸ ì°¸ê³ ì‚¬ì´íŠ¸</h1>
<ul>
  <li><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank">https://subicura.com</a></li>
  <li><a href="https://www.daleseo.com/?tag=Docker" target="_blank">https://www.daleseo.com</a></li>
</ul>]]></content><author><name>Oh</name></author><category term="Docker" /><category term="Docker" /><category term="Container" /><summary type="html"><![CDATA[ğŸ’¾ ë„ì»¤ ê¸°ë³¸ ê°œë…ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">Spring Boot Test Cheat Sheet</title><link href="http://localhost:4000/spring/spring-boot-test-cheat-sheet/" rel="alternate" type="text/html" title="Spring Boot Test Cheat Sheet" /><published>2023-02-13T00:00:00+09:00</published><updated>2023-02-13T00:00:00+09:00</updated><id>http://localhost:4000/spring/spring-boot-test-cheat-sheet</id><content type="html" xml:base="http://localhost:4000/spring/spring-boot-test-cheat-sheet/"><![CDATA[<p>ğŸ“ Spring Boot Test Cheat Sheet ì…ë‹ˆë‹¤. ì„¤ëª…ì€ ì—†ê³  ìì£¼ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ ì°¸ê³ ìš© ì…ë‹ˆë‹¤.</p>
<ul>
  <li><a href="/java/TDD(Test-Driven-Development)-í…ŒìŠ¤íŠ¸-ì£¼ë„-ê°œë°œ" target="_blank">JUnit 5, AssertJ Cheat Sheet</a></li>
</ul>

<p><br /></p>

<h2 id="buildgradle">build.gradle</h2>
<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">runtimeOnly</span> <span class="s1">'com.h2database:h2'</span>
    <span class="n">implementation</span> <span class="s1">'com.google.guava:guava:31.1-jre'</span>
    <span class="n">testImplementation</span> <span class="s1">'org.springframework.boot:spring-boot-starter-test'</span>
    <span class="n">testImplementation</span> <span class="s1">'io.rest-assured:rest-assured'</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="application-testyml">application-test.yml</h2>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">spring</span><span class="pi">:</span>
  <span class="na">datasource</span><span class="pi">:</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">jdbc:h2:mem:test</span>
    <span class="na">username</span><span class="pi">:</span> <span class="s">sa</span>
    <span class="na">password</span><span class="pi">:</span>
    <span class="na">driver-class-name</span><span class="pi">:</span> <span class="s">org.h2.Driver</span>
  <span class="na">jpa</span><span class="pi">:</span>
    <span class="na">hibernate</span><span class="pi">:</span>
      <span class="na">ddl-auto</span><span class="pi">:</span> <span class="s1">'</span><span class="s">create-drop'</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="import">import</h2>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">hamcrest</span><span class="o">.</span><span class="na">Matchers</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">jupiter</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">assertj</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.*;</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="databasecleanup">DatabaseCleanup</h2>
<p>JPAìš©, ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ ëª¨ë“  ì—”í‹°í‹° í…Œì´ë¸” ì´ˆê¸°í™” í´ë˜ìŠ¤</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="nd">@ActiveProfiles</span><span class="o">(</span><span class="s">"test"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DatabaseCleanup</span> <span class="kd">implements</span> <span class="nc">InitializingBean</span> <span class="o">{</span>
    <span class="nd">@PersistenceContext</span>
    <span class="kd">private</span> <span class="nc">EntityManager</span> <span class="n">entityManager</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">tableNames</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterPropertiesSet</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">tableNames</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">getMetamodel</span><span class="o">().</span><span class="na">getEntities</span><span class="o">().</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="n">e</span><span class="o">.</span><span class="na">getJavaType</span><span class="o">().</span><span class="na">getAnnotation</span><span class="o">(</span><span class="nc">Entity</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="nc">CaseFormat</span><span class="o">.</span><span class="na">UPPER_CAMEL</span><span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="nc">CaseFormat</span><span class="o">.</span><span class="na">LOWER_UNDERSCORE</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getName</span><span class="o">()))</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Transactional</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">entityManager</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
        <span class="n">entityManager</span><span class="o">.</span><span class="na">createNativeQuery</span><span class="o">(</span><span class="s">"SET REFERENTIAL_INTEGRITY FALSE"</span><span class="o">).</span><span class="na">executeUpdate</span><span class="o">();</span>

        <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">tableName</span> <span class="o">:</span> <span class="n">tableNames</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">entityManager</span><span class="o">.</span><span class="na">createNativeQuery</span><span class="o">(</span><span class="s">"TRUNCATE TABLE "</span> <span class="o">+</span> <span class="n">tableName</span><span class="o">).</span><span class="na">executeUpdate</span><span class="o">();</span>
            <span class="n">entityManager</span><span class="o">.</span><span class="na">createNativeQuery</span><span class="o">(</span><span class="s">"ALTER TABLE "</span> <span class="o">+</span> <span class="n">tableName</span> <span class="o">+</span> <span class="s">" ALTER COLUMN ID RESTART WITH 1"</span><span class="o">).</span><span class="na">executeUpdate</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">entityManager</span><span class="o">.</span><span class="na">createNativeQuery</span><span class="o">(</span><span class="s">"SET REFERENTIAL_INTEGRITY TRUE"</span><span class="o">).</span><span class="na">executeUpdate</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="acceptance-abstract">Acceptance Abstract</h2>
<p>RestAssured ì‚¬ìš©ì‹œ ê³µí†µ ë¶€ëª¨ í´ë˜ìŠ¤. ëœë¤í¬íŠ¸ì™€ í…Œì´ë¸” ì´ˆê¸°í™”</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootTest</span><span class="o">(</span><span class="n">webEnvironment</span> <span class="o">=</span> <span class="nc">SpringBootTest</span><span class="o">.</span><span class="na">WebEnvironment</span><span class="o">.</span><span class="na">RANDOM_PORT</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AcceptanceTest</span> <span class="o">{</span>

    <span class="nd">@LocalServerPort</span>
    <span class="kt">int</span> <span class="n">port</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">DatabaseCleanup</span> <span class="n">databaseCleanup</span><span class="o">;</span>

    <span class="nd">@BeforeEach</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">RestAssured</span><span class="o">.</span><span class="na">port</span> <span class="o">=</span> <span class="n">port</span><span class="o">;</span>
        <span class="n">databaseCleanup</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="restassured">RestAssured</h2>
<ul>
  <li><a href="https://github.com/rest-assured/rest-assured/wiki/Usage" target="_blank">RestAssured ê°€ì´ë“œ</a></li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">ExtractableResponse</span><span class="o">&lt;</span><span class="nc">Response</span><span class="o">&gt;</span> <span class="n">ìë™ì°¨_ë“±ë¡_ìš”ì²­</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>

    <span class="k">return</span> <span class="nc">RestAssured</span>
            <span class="o">.</span><span class="na">given</span><span class="o">().</span><span class="na">log</span><span class="o">().</span><span class="na">all</span><span class="o">()</span>
            <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">params</span><span class="o">)</span>
            <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_VALUE</span><span class="o">)</span>
            <span class="o">.</span><span class="na">when</span><span class="o">().</span><span class="na">post</span><span class="o">(</span><span class="s">"/api/cars"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">then</span><span class="o">().</span><span class="na">log</span><span class="o">().</span><span class="na">all</span><span class="o">()</span>
            <span class="o">.</span><span class="na">extract</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">ìë™ì°¨_ë“±ë¡ë¨</span><span class="o">(</span><span class="nc">ExtractableResponse</span><span class="o">&lt;</span><span class="nc">Response</span><span class="o">&gt;</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">statusCode</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"Location"</span><span class="o">)).</span><span class="na">isNotBlank</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">ExtractableResponse</span><span class="o">&lt;</span><span class="nc">Response</span><span class="o">&gt;</span> <span class="n">ì •ë³´_ì¡°íšŒ_ìš”ì²­</span><span class="o">(</span><span class="nc">String</span> <span class="n">accessToken</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">RestAssured</span>
            <span class="o">.</span><span class="na">given</span><span class="o">().</span><span class="na">log</span><span class="o">().</span><span class="na">all</span><span class="o">()</span>
            <span class="o">.</span><span class="na">auth</span><span class="o">().</span><span class="na">oauth2</span><span class="o">(</span><span class="n">accessToken</span><span class="o">)</span>
            <span class="o">.</span><span class="na">when</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"/members/me"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">then</span><span class="o">().</span><span class="na">log</span><span class="o">().</span><span class="na">all</span><span class="o">()</span>
            <span class="o">.</span><span class="na">extract</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="extendwithspringextensionclass-mockbean">@ExtendWith(SpringExtension.class), @MockBean</h2>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExtendWith</span><span class="o">(</span><span class="nc">SpringExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringExtensionTest</span> <span class="o">{</span>

    <span class="nd">@MockBean</span>
    <span class="kd">private</span> <span class="nc">LineRepository</span> <span class="n">lineRepository</span><span class="o">;</span>

    <span class="nd">@MockBean</span>
    <span class="kd">private</span> <span class="nc">StationService</span> <span class="n">stationService</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">findAllLines</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// given</span>
        <span class="n">when</span><span class="o">(</span><span class="n">lineRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">()).</span><span class="na">thenReturn</span><span class="o">(</span><span class="nc">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">(</span><span class="k">new</span> <span class="nc">Line</span><span class="o">()));</span>
        <span class="nc">LineService</span> <span class="n">lineService</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LineService</span><span class="o">(</span><span class="n">lineRepository</span><span class="o">,</span> <span class="n">stationService</span><span class="o">);</span>

        <span class="c1">// when</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LineResponse</span><span class="o">&gt;</span> <span class="n">responses</span> <span class="o">=</span> <span class="n">lineService</span><span class="o">.</span><span class="na">findLineResponses</span><span class="o">();</span>

        <span class="c1">// then</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">responses</span><span class="o">).</span><span class="na">hasSize</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="extendwithmockitoextensionclass-mock-injectmocks">@ExtendWith(MockitoExtension.class), @Mock, @InjectMocks</h2>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExtendWith</span><span class="o">(</span><span class="nc">MockitoExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MockitoExtensionTest</span> <span class="o">{</span>

    <span class="nd">@Mock</span>
    <span class="kd">private</span> <span class="nc">CarRepository</span> <span class="n">carRepository</span><span class="o">;</span>

    <span class="nd">@InjectMocks</span>
    <span class="kd">private</span> <span class="nc">CarService</span> <span class="n">carService</span><span class="o">;</span>

    <span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"ì´ë¦„ì„ ë°›ì•„ ìë™ì°¨ë¥¼ ì €ì¥í•œë‹¤."</span><span class="o">)</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">(){</span>
        <span class="c1">// given</span>
        <span class="kd">final</span> <span class="nc">String</span> <span class="no">NAME</span> <span class="o">=</span> <span class="s">"Boong-Boong"</span><span class="o">;</span>
        <span class="n">when</span><span class="o">(</span><span class="n">carRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">any</span><span class="o">())).</span><span class="na">thenReturn</span><span class="o">(</span><span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">Car</span><span class="o">(</span><span class="no">NAME</span><span class="o">)));</span>
        
        <span class="c1">// when</span>
        <span class="nc">CarResponse</span> <span class="n">carResponse</span> <span class="o">=</span> <span class="n">carService</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="no">NAME</span><span class="o">);</span>

        <span class="c1">// then</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">carResponse</span><span class="o">.</span><span class="na">getName</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="no">NAME</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="webmvctest-mockbean-mockmvc">@WebMvcTest, @MockBean, MockMvc</h2>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebMvcTest</span><span class="o">(</span><span class="nc">CarController</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarControllerTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_BASE_PATH</span> <span class="o">=</span> <span class="s">"/api/cars"</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span>

    <span class="nd">@MockBean</span>
    <span class="kd">private</span> <span class="nc">CarService</span> <span class="n">carService</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">ObjectMapper</span> <span class="n">objectMapper</span><span class="o">;</span>

    <span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"ìë™ì°¨ë¥¼ ìƒì„±í•œë‹¤."</span><span class="o">)</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createCar</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="c1">//given</span>
        <span class="nc">CarRequest</span> <span class="n">carRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">carRequest</span><span class="o">(</span><span class="s">"Boong-Boong"</span><span class="o">);</span>
        <span class="nc">CarResponse</span> <span class="n">carResponse</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CarResponse</span><span class="o">(</span><span class="mi">1L</span><span class="o">,</span> <span class="n">carRequest</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">given</span><span class="o">(</span><span class="n">carService</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">any</span><span class="o">())).</span><span class="na">willReturn</span><span class="o">(</span><span class="n">carResponse</span><span class="o">);</span>

        <span class="c1">//when, then</span>
        <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">post</span><span class="o">(</span><span class="no">API_BASE_PATH</span><span class="o">)</span>
                <span class="o">.</span><span class="na">content</span><span class="o">(</span><span class="n">objectMapper</span><span class="o">.</span><span class="na">writeValueAsString</span><span class="o">(</span><span class="n">carRequest</span><span class="o">))</span>
                <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">))</span>
                <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isCreated</span><span class="o">())</span>
                <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">"$.id"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="n">carResponse</span><span class="o">.</span><span class="na">getId</span><span class="o">()));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="springboottest-autoconfiguremockmvc-mockmvc">@SpringBootTest, @AutoConfigureMockMvc, MockMvc</h2>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootTest</span>
<span class="nd">@AutoConfigureMockMvc</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarControllerMockTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_BASE_PATH</span> <span class="o">=</span> <span class="s">"/api/cars"</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">ObjectMapper</span> <span class="n">objectMapper</span><span class="o">;</span>

    <span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"ìë™ì°¨ë¥¼ ìƒì„±í•œë‹¤."</span><span class="o">)</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createCar</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="c1">//given</span>
        <span class="nc">CarRequest</span> <span class="n">carRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">carRequest</span><span class="o">(</span><span class="s">"Boong-Boong"</span><span class="o">);</span>
        <span class="nc">CarResponse</span> <span class="n">carResponse</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CarResponse</span><span class="o">(</span><span class="mi">1L</span><span class="o">,</span> <span class="n">carRequest</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>

        <span class="c1">//when, then</span>
        <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">post</span><span class="o">(</span><span class="no">API_BASE_PATH</span><span class="o">)</span>
                <span class="o">.</span><span class="na">content</span><span class="o">(</span><span class="n">objectMapper</span><span class="o">.</span><span class="na">writeValueAsString</span><span class="o">(</span><span class="n">carRequest</span><span class="o">))</span>
                <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">))</span>
                <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isCreated</span><span class="o">())</span>
                <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">"$.id"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="n">carResponse</span><span class="o">.</span><span class="na">getId</span><span class="o">()));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="datajpatest-persistencecontext">@DataJpaTest, @PersistenceContext</h2>
<ul>
  <li>JPA ê´€ë ¨ ì„¤ì •ë§Œ ë¡œë“œ</li>
  <li>ë°ì´í„° ì†ŒìŠ¤, ì—”í‹°í‹° ë§¤ë‹ˆì € ë“± ìƒì„±</li>
  <li>@Entity ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ ë° Spring Data JPA ì— ëŒ€í•œ ì„¤ì •ë“¤ ì ìš©</li>
  <li>ê¸°ë³¸ìœ¼ë¡œ in-memory database ì‚¬ìš©</li>
  <li>@AutoConfigureTestDatabaseë¥¼ ì‚¬ìš©í•˜ì—¬ ì–´ë–¤ databaseë¥¼ ì—°ê²°í• ì§€ ì„ íƒí•  ìˆ˜ ìˆë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@DataJpaTest</span>
<span class="nd">@ActiveProfiles</span><span class="o">(</span><span class="s">"test"</span><span class="o">)</span>
<span class="nd">@AutoConfigureTestDatabase</span><span class="o">(</span><span class="n">replace</span> <span class="o">=</span> <span class="nc">AutoConfigureTestDatabase</span><span class="o">.</span><span class="na">Replace</span><span class="o">.</span><span class="na">NONE</span><span class="o">)</span>
<span class="kd">class</span> <span class="nc">CarRepositoryTest</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">CarRepository</span> <span class="n">carRepository</span><span class="o">;</span>

    <span class="nd">@PersistenceContext</span>
    <span class="kd">private</span> <span class="nc">EntityManager</span> <span class="n">entityManager</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"ìë™ì°¨ë¥¼ ì €ì¥í•œë‹¤."</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
        
        <span class="o">...</span>

        <span class="nc">Car</span> <span class="n">savedCar</span> <span class="o">=</span> <span class="n">carRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="nc">Car</span><span class="o">(</span><span class="s">"Boong-Boong"</span><span class="o">));</span>

        <span class="n">entityManager</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
        <span class="n">entityManager</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
        
        <span class="o">...</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="mybatistest">@MybatisTest</h2>
<ul>
  <li><a href="http://mybatis.org/spring-boot-starter/mybatis-spring-boot-test-autoconfigure/index.html" target="_blank">Mybatis í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ</a></li>
  <li>ê¸°ë³¸ìœ¼ë¡œ in-memory database ì‚¬ìš©</li>
  <li>@AutoConfigureTestDatabaseë¥¼ ì‚¬ìš©í•˜ì—¬ ì–´ë–¤ databaseë¥¼ ì—°ê²°í• ì§€ ì„ íƒí•  ìˆ˜ ìˆë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExtendWith</span><span class="o">(</span><span class="nc">SpringExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@MybatisTest</span>
<span class="nd">@ActiveProfiles</span><span class="o">(</span><span class="s">"test"</span><span class="o">)</span>
<span class="nd">@AutoConfigureTestDatabase</span><span class="o">(</span><span class="n">replace</span> <span class="o">=</span> <span class="nc">AutoConfigureTestDatabase</span><span class="o">.</span><span class="na">Replace</span><span class="o">.</span><span class="na">NONE</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderTest</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">OrderMapper</span> <span class="n">orderMapper</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mybatis_test</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>

        <span class="c1">// given</span>
        <span class="nc">String</span> <span class="n">seq</span> <span class="o">=</span> <span class="s">"1"</span><span class="o">;</span>

        <span class="c1">// when</span>
        <span class="nc">OrderVO</span> <span class="n">vo</span> <span class="o">=</span> <span class="n">orderMapper</span><span class="o">.</span><span class="na">getOrder</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>

        <span class="c1">// then</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">vo</span><span class="o">.</span><span class="na">getSeq</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br />
<br /></p>

<h2 id="mock-mockbean-ì°¨ì´ì ">@Mock, @MockBean ì°¨ì´ì </h2>

<table>
  <thead>
    <tr>
      <th>Mock ì¢…ë¥˜</th>
      <th>ì˜ì¡´ì„± ì£¼ì… ëŒ€ìƒ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>@Mock</td>
      <td>@InjectMocks</td>
    </tr>
    <tr>
      <td>@MockBean</td>
      <td>Spring Context</td>
    </tr>
  </tbody>
</table>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@Mock</code>ì€ <code class="language-plaintext highlighter-rouge">@InjectMocks</code>ì— ëŒ€í•´ì„œë§Œ í•´ë‹¹ í´ë˜ìŠ¤ì•ˆì—ì„œ ì •ì˜ëœ ê°ì²´ë¥¼ ì°¾ì•„ì„œ ì˜ì¡´ì„±ì„ í•´ê²°</li>
  <li><code class="language-plaintext highlighter-rouge">@MockBean</code>ì€ <code class="language-plaintext highlighter-rouge">mock</code> ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ì— ë“±ë¡<br />
<br />
<br /></li>
</ul>

<h2 id="mockmvc-ì£¼ì…ë°©ë²•">MockMVC ì£¼ì…ë°©ë²•</h2>
<ol>
  <li><code class="language-plaintext highlighter-rouge">@SpringBootTest</code> + <code class="language-plaintext highlighter-rouge">@AutoConfigureMockMvc</code> : MockMVCë¥¼ ì´ìš©í•˜ì—¬ í†µí•©í…ŒìŠ¤íŠ¸ í•  ë•Œ ì‚¬ìš©</li>
  <li><code class="language-plaintext highlighter-rouge">@WebMvcTest</code> : MVCë§Œ ìŠ¬ë¼ì´ìŠ¤(slice) í…ŒìŠ¤íŠ¸ í•  ë•Œ ì‚¬ìš©</li>
</ol>]]></content><author><name>Oh</name></author><category term="Spring" /><category term="Spring" /><category term="Java" /><category term="Test" /><category term="CheatSheet" /><summary type="html"><![CDATA[ğŸ“ Spring Boot Test Cheat Sheet ì…ë‹ˆë‹¤. ì„¤ëª…ì€ ì—†ê³  ìì£¼ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ ì°¸ê³ ìš© ì…ë‹ˆë‹¤. JUnit 5, AssertJ Cheat Sheet]]></summary></entry></feed>